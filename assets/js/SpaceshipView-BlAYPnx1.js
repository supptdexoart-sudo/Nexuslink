import{r as c,j as e,ab as w,m as P,x as L,T as O,ae as A,a1 as M,p as R,aX as _,ay as B,a9 as K,h as G,B as V}from"./vendor-Dgu-9KXE.js";import{p as n,G as y,v as p}from"./index-BYSIMSBD.js";import"html5-qrcode";import"./utils-BOwlEK-f.js";const D=[{id:"p1",name:"Terra Nova",distance:"12 AU",danger:"Nízká",type:"Obyvatelná",color:"text-green-400",border:"border-green-500/30"},{id:"p2",name:"Kepler-186f",distance:"450 LY",danger:"Střední",type:"Exoplaneta",color:"text-blue-400",border:"border-blue-500/30"},{id:"p3",name:"Mars Outpost",distance:"0.5 AU",danger:"Vysoká",type:"Kolonie",color:"text-red-400",border:"border-red-500/30"},{id:"p4",name:"Black Nebula",distance:"Unknown",danger:"Extrémní",type:"Anomálie",color:"text-purple-400",border:"border-purple-500/30"}],Y=({playerFuel:i,inventory:k,onPlanetLand:z,onFuelConsume:E,onProgressPlanet:b,masterCatalog:I=[]})=>{const[U]=c.useState(100),[T]=c.useState(60),[r,g]=c.useState(!1),[d,C]=c.useState(null);c.useEffect(()=>{n("open")},[]);const x=D.map(s=>{var f,u,v;const t=k.find(j=>{var N;return j.type===y.PLANET&&((N=j.planetConfig)==null?void 0:N.planetId)===s.id}),l=((f=t==null?void 0:t.planetConfig)==null?void 0:f.phases)||[],o=(t==null?void 0:t.planetProgress)||0,m=l.length,$=m>0&&o>=m;let h=null;return l.length>0&&o<l.length?h=l[o]:h=((u=t==null?void 0:t.planetConfig)==null?void 0:u.landingEventId)||null,{...s,isUnlocked:!!t,navCardId:t==null?void 0:t.id,phases:l,currentPhaseIndex:o,totalPhases:m,isComplete:$,nextEventId:h,fallbackEventType:((v=t==null?void 0:t.planetConfig)==null?void 0:v.landingEventType)||y.ENCOUNTER}}),a=x.find(s=>s.id===d),S=()=>{if(!a||!a.isUnlocked)return;if(a.isComplete){n("error");return}const s=20;if(i<s){n("error"),p(100);return}g(!0),n("scan"),p([50,100,200,50,100]),E(-s),setTimeout(()=>{g(!1),n("success"),p(50),a.nextEventId&&I.find(t=>t.id===a.nextEventId),z(a.id,a.fallbackEventType),a.navCardId&&a.phases.length>0&&b&&b(a.navCardId)},3500)};return e.jsxs("div",{className:"h-full w-full bg-[#0a0b0d] flex flex-col overflow-hidden relative",children:[e.jsx("div",{className:"p-6 pb-2 border-b border-white/10 bg-black/50 z-10 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"p-2 bg-signal-cyan/10 rounded-lg border border-signal-cyan/30",children:e.jsx(w,{className:"w-6 h-6 text-signal-cyan"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter text-white font-display chromatic-text",children:"Moje Loď"}),e.jsx("p",{className:"text-[10px] text-zinc-500 font-mono uppercase tracking-[0.3em]",children:"Interceptor Class V-2"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-6 relative z-10",children:[e.jsxs("div",{className:"relative aspect-video bg-zinc-900/50 rounded-2xl border border-white/10 overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-signal-cyan/10 via-transparent to-transparent opacity-50"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(w,{className:`w-32 h-32 text-zinc-700 transition-all duration-1000 ${r?"animate-pulse text-signal-cyan translate-y-[-10px]":""}`})}),r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 z-20",children:e.jsxs("div",{className:"text-center w-full px-10",children:[e.jsx("div",{className:"text-signal-cyan font-mono text-xs uppercase tracking-widest animate-pulse mb-2",children:"Cestování hyperprostorem..."}),e.jsx("div",{className:"w-full h-1 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx(P.div,{className:"h-full bg-signal-cyan",initial:{width:0},animate:{width:"100%"},transition:{duration:3.5,ease:"linear"}})}),e.jsxs("p",{className:"text-[10px] text-zinc-500 mt-2 font-mono uppercase tracking-widest",children:["Destinace: ",a==null?void 0:a.name]})]})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent flex justify-between items-end",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-400 uppercase font-bold mb-1",children:[e.jsx(L,{className:"w-3 h-3 text-cyan-400"})," Štíty"]}),e.jsx("div",{className:"w-20 h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-cyan-400",style:{width:`${T}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-400 uppercase font-bold mb-1",children:[e.jsx(O,{className:"w-3 h-3 text-red-500"})," Trup"]}),e.jsx("div",{className:"w-20 h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white",style:{width:`${U}%`}})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[10px] text-zinc-400 uppercase font-bold mb-1",children:[e.jsx(A,{className:"w-3 h-3 text-signal-amber"})," Palivo"]}),e.jsxs("span",{className:"text-xl font-mono font-bold text-signal-amber",children:[i,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-4 h-4 text-signal-cyan"}),e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-white",children:"Navigace Sektoru"})]}),e.jsx("div",{className:"space-y-3",children:x.map(s=>e.jsxs("button",{disabled:!s.isUnlocked||r,onClick:()=>{C(s.id),n("click")},className:`w-full p-4 rounded-xl border flex flex-col gap-3 transition-all active:scale-[0.98] relative overflow-hidden ${s.isUnlocked?d===s.id?`bg-zinc-800 ${s.border} ring-1 ring-white/20`:"bg-black/40 border-white/5 hover:bg-white/5":"bg-black/40 border-zinc-800 opacity-60 grayscale"}`,children:[e.jsxs("div",{className:"flex items-center justify-between w-full relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-black ${s.isUnlocked?s.border:"border-zinc-700"}`,children:s.isUnlocked?e.jsx(Z,{className:`w-5 h-5 ${s.color}`}):e.jsx(R,{className:"w-4 h-4 text-zinc-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"text-sm font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[s.name,!s.isUnlocked&&e.jsx("span",{className:"text-[8px] bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-500",children:"ZAMČENO"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded bg-white/5 border border-white/5 ${s.isUnlocked?s.color:"text-zinc-600"} font-mono uppercase`,children:s.isUnlocked?s.type:"Neznámá Data"}),e.jsx("span",{className:"text-[9px] text-zinc-500 font-mono",children:s.distance})]})]})]}),d===s.id&&s.isUnlocked&&e.jsx(_,{className:"w-5 h-5 text-white animate-pulse"})]}),s.isUnlocked&&s.phases.length>0&&e.jsxs("div",{className:"w-full bg-black/50 p-2 rounded-lg border border-white/5 flex items-center gap-3",children:[e.jsx(B,{className:"w-3 h-3 text-zinc-500"}),e.jsx("div",{className:"flex-1 h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.isComplete?"bg-green-500":"bg-signal-cyan"}`,style:{width:`${Math.min(100,s.currentPhaseIndex/s.totalPhases*100)}%`}})}),e.jsx("span",{className:`text-[9px] font-mono font-bold ${s.isComplete?"text-green-500":"text-zinc-400"}`,children:s.isComplete?"DOKONČENO":`${s.currentPhaseIndex}/${s.totalPhases}`})]})]},s.id))}),!x.some(s=>s.isUnlocked)&&e.jsxs("div",{className:"mt-4 p-3 bg-zinc-900/50 border border-white/5 rounded-lg flex items-start gap-3",children:[e.jsx(K,{className:"w-4 h-4 text-zinc-500 mt-0.5"}),e.jsxs("p",{className:"text-[10px] text-zinc-400 font-mono leading-relaxed",children:["Pro odemčení destinací naskenujte ",e.jsx("span",{className:"text-white font-bold",children:"Navigační Karty (QR)"}),"."]})]})]}),d&&(a==null?void 0:a.isUnlocked)&&e.jsx("div",{className:"animate-in slide-in-from-bottom-4 fade-in duration-300",children:a.isComplete?e.jsxs("div",{className:"w-full py-4 bg-green-900/20 border border-green-500/30 rounded-xl flex items-center justify-center gap-2 text-green-500 font-bold uppercase text-xs tracking-widest",children:[e.jsx(G,{className:"w-4 h-4"})," Planeta Dobyta"]}):e.jsx("button",{disabled:r||i<20,onClick:S,className:`w-full py-4 font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-lg transition-all flex items-center justify-center gap-3 ${i<20?"bg-red-900/50 text-red-500 border border-red-900 cursor-not-allowed":"bg-white text-black hover:bg-signal-cyan border border-white/50"}`,children:r?e.jsx(e.Fragment,{children:"Iniciace Motorů..."}):i<20?e.jsx(e.Fragment,{children:"Nedostatek Paliva (20%)"}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-4 h-4"})," Zahájit Skok (-20% Paliva)"]})})})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5 z-0",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"30px 30px"}})]})},Z=({className:i})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]});export{Y as default};
