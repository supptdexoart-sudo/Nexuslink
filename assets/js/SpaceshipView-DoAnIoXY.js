import{c as G,r as i,G as H,p as l,j as e,_ as Q,A as L,m as d,I as o,b as h,f as T,$ as J,a0 as Y,y as _,l as W,w as X,v as I}from"./index-BfI42yMj.js";import{C as ee}from"./chevron-right-CDxbFoS_.js";import"html5-qrcode";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=G("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=G("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),le=({playerFuel:u=0,inventory:K=[],onAnalyzePlanet:p,onResetPlanet:g,onClaimPlanetReward:b,isAdmin:M=!1,isTestMode:$=!1})=>{var y,w,k,z,P,C,A;const[D]=i.useState(60),[R,f]=i.useState(null),[x,v]=i.useState(!1),[Z,N]=i.useState(0),[j,r]=i.useState(null),m=K.filter(s=>s.type===H.PLANET);i.useEffect(()=>{l("open")},[]);const a=m.find(s=>s.id===R),F=s=>{var t;if(!((t=s.planetConfig)!=null&&t.hasVisited)){l("error"),I([50,50]),r("LOKACE NEPOTVRZENA. Naskenuj fyzickou kartu na herním plánu."),setTimeout(()=>r(null),3e3);return}f(s.id),l("click")},q=()=>{var n,c;if(!a||!p)return;if(!((n=a.planetConfig)!=null&&n.scanAvailable)){l("error"),r("SKEN ZABLOKOVÁN. Musíte se znovu přesunout na orbitu (naskenovat fyzickou kartu)."),setTimeout(()=>r(null),4e3);return}if(u<(((c=a.planetConfig)==null?void 0:c.scanCost)||10)){l("error"),r("NEDOSTATEK PALIVA pro manévr."),setTimeout(()=>r(null),3e3);return}v(!0),l("scan"),I([50,50,50]);let s=0;const t=setInterval(()=>{s+=2,N(s),s>=100&&(clearInterval(t),v(!1),N(0),p(a.id))},30)},B=()=>{a&&b&&b(a.id)},U=s=>s>=100?"IDENTIFIKACE KOMPLETNÍ":s>=66?"POVRCHOVÁ ANALÝZA":s>=33?"ATMOSFÉRICKÁ DATA":"NEZNÁMÝ SIGNÁL";return e.jsxs("div",{className:"h-full w-full bg-[#0a0b0d] flex flex-col overflow-hidden relative",children:[e.jsx("div",{className:"p-6 pb-2 border-b border-white/10 bg-black/50 z-10 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"p-2 bg-signal-cyan/10 rounded-lg border border-signal-cyan/30",children:e.jsx(Q,{className:"w-6 h-6 text-signal-cyan"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter text-white font-display chromatic-text",children:"Moje Loď"}),e.jsx("p",{className:"text-[10px] text-zinc-500 font-mono uppercase tracking-[0.3em]",children:"Interceptor Class V-2"})]})]})}),e.jsx(L,{children:j&&e.jsx(d.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},className:"absolute top-24 left-4 right-4 bg-red-900/90 border border-red-500 text-white p-3 rounded-xl z-50 text-center shadow-2xl",children:e.jsxs("p",{className:"text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"})," ",j]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-6 relative z-10",children:e.jsx(L,{mode:"wait",children:a?e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex flex-col h-full",children:[e.jsxs("button",{onClick:()=>f(null),className:"text-xs font-bold text-zinc-500 uppercase mb-4 flex items-center gap-1 hover:text-white",children:[e.jsx(ee,{className:"w-4 h-4 rotate-180"})," Zpět na seznam"]}),e.jsxs("div",{className:"relative aspect-square max-h-64 mx-auto mb-6 w-full flex items-center justify-center",children:[e.jsx("div",{className:`w-48 h-48 rounded-full border-2 ${a.discoveryProgress===100?"border-green-500 bg-green-900/20":"border-dashed border-zinc-600 animate-spin-slow"}`}),e.jsx(h,{className:`absolute w-24 h-24 ${a.discoveryProgress===100?"text-green-400":"text-zinc-700 animate-pulse"}`}),x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-56 h-56 border-t-2 border-signal-cyan rounded-full animate-spin"})})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-black uppercase tracking-widest text-white",children:a.discoveryProgress===100?(y=a.planetConfig)==null?void 0:y.realName:(w=a.planetConfig)==null?void 0:w.unknownName}),e.jsx("p",{className:"text-xs font-mono text-signal-cyan mt-1",children:U(a.discoveryProgress||0)})]}),e.jsxs("div",{className:"w-full bg-zinc-900 h-4 rounded-full overflow-hidden border border-zinc-700 mb-6 relative",children:[e.jsx(d.div,{className:"h-full bg-signal-cyan",initial:{width:0},animate:{width:`${a.discoveryProgress||0}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-[9px] font-black text-white mix-blend-difference uppercase",children:["Data Průzkumu: ",a.discoveryProgress||0,"%"]})]}),e.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-white/5 mb-6 flex-1 overflow-y-auto",children:[e.jsx("p",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-2",children:"Palubní Deník:"}),e.jsxs("div",{className:"space-y-2 font-mono text-xs text-zinc-300",children:[e.jsx("p",{className:"opacity-50",children:"> Signál zachycen."}),(k=a.planetConfig)==null?void 0:k.layers.filter(s=>(a.discoveryProgress||0)>=s.requiredProgress).sort((s,t)=>s.requiredProgress-t.requiredProgress).map((s,t)=>e.jsxs("p",{className:"text-green-400 border-l-2 border-green-500/50 pl-2 animate-in slide-in-from-left-2",children:["> ",s.logText]},t)),(a.discoveryProgress||0)<100&&e.jsx("p",{className:"text-zinc-600 italic animate-pulse",children:"> Čekám na další data..."})]})]}),(a.discoveryProgress||0)>=100?e.jsx("button",{onClick:B,disabled:(a.accumulatedPassiveGold||0)<=0,className:`w-full py-4 font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-lg transition-all flex items-center justify-center gap-3 ${(a.accumulatedPassiveGold||0)>0?"bg-yellow-600 hover:bg-yellow-500 text-black shadow-yellow-500/20 animate-pulse":"bg-zinc-800 text-zinc-500 cursor-default border border-zinc-700"}`,children:(a.accumulatedPassiveGold||0)>0?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"})," VYZVEDNOUT ODMĚNU (+",a.accumulatedPassiveGold," G)"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"})," PLANETA OSVOJENA"]})}):e.jsx("button",{onClick:q,disabled:x||!((z=a.planetConfig)!=null&&z.scanAvailable),className:`w-full py-4 font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-lg transition-all flex items-center justify-center gap-3 ${(P=a.planetConfig)!=null&&P.scanAvailable?"bg-white text-black hover:bg-signal-cyan hover:scale-[1.02]":"bg-zinc-800 text-zinc-500 cursor-not-allowed border border-zinc-700"}`,children:x?e.jsxs(e.Fragment,{children:["SKENOVÁNÍ POVRCHU ",Z,"%..."]}):(C=a.planetConfig)!=null&&C.scanAvailable?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4"})," HLOUBKOVÝ SKEN (-",(A=a.planetConfig)==null?void 0:A.scanCost," PALIVA)"]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4"})," SKEN ZABLOKOVÁN (Naskenuj QR)"]})}),M&&$&&g&&e.jsxs("button",{onClick:()=>g(a.id),className:"w-full mt-4 py-2 border border-red-500/50 bg-red-950/30 text-red-500 font-bold uppercase text-[9px] tracking-widest rounded-lg hover:bg-red-900/50 flex items-center justify-center gap-2",children:[e.jsx(ae,{className:"w-3 h-3"})," RESET DATA (DEBUG)"]}),e.jsx("p",{className:"text-[9px] text-zinc-500 text-center mt-3 uppercase",children:(a.discoveryProgress||0)>=100?"Zásoby jsou připravovány každé kolo po provedení akce.":"Pro postup v průzkumu naskenujte fyzickou kartu na herním plánu."})]},"detail"):e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{className:"w-4 h-4 text-signal-cyan"}),e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-white",children:"Aktivní Cíle (Questy)"})]}),e.jsx("div",{className:"space-y-3",children:m.length===0?e.jsxs("div",{className:"text-center py-10 opacity-50 border border-dashed border-zinc-700 rounded-xl",children:[e.jsx(h,{className:"w-12 h-12 text-zinc-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold uppercase text-zinc-500",children:"Žádné aktivní signály"}),e.jsx("p",{className:"text-[9px] text-zinc-600 mt-1",children:"Navštivte stanici pro získání souřadnic."})]}):m.map(s=>{var t,n,c,E,S,O,V;return e.jsxs("button",{onClick:()=>F(s),className:`w-full p-4 rounded-xl border flex items-center justify-between transition-all active:scale-[0.98] ${(t=s.planetConfig)!=null&&t.hasVisited?"bg-zinc-900/50 border-zinc-800 hover:border-signal-cyan/30":"bg-zinc-900/20 border-zinc-800/50 opacity-60 grayscale"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full border-2 flex items-center justify-center bg-black ${s.discoveryProgress===100?"border-green-500":"border-zinc-700"}`,children:(n=s.planetConfig)!=null&&n.hasVisited?e.jsx(h,{className:`w-6 h-6 ${s.discoveryProgress===100?"text-green-500":"text-zinc-500"}`}):e.jsx(o,{className:"w-5 h-5 text-zinc-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wider",children:s.discoveryProgress===100?(c=s.planetConfig)==null?void 0:c.realName:(E=s.planetConfig)==null?void 0:E.unknownName}),(S=s.planetConfig)!=null&&S.hasVisited?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-20 h-1.5 bg-black rounded-full overflow-hidden border border-zinc-700",children:e.jsx("div",{className:"h-full bg-signal-cyan",style:{width:`${s.discoveryProgress||0}%`}})}),e.jsxs("span",{className:"text-[9px] text-zinc-500 font-mono",children:[s.discoveryProgress||0,"%"]})]}):e.jsx("p",{className:"text-[9px] text-red-500 font-bold mt-1 uppercase tracking-wider",children:"LOKACE NEPOTVRZENA"})]})]}),s.discoveryProgress===100&&(s.accumulatedPassiveGold||0)>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-900/50 px-2 py-1 rounded text-yellow-500 text-[9px] font-bold border border-yellow-700",children:[e.jsx(T,{className:"w-3 h-3"})," ",s.accumulatedPassiveGold]}),!((O=s.planetConfig)!=null&&O.scanAvailable)&&((V=s.planetConfig)==null?void 0:V.hasVisited)&&(s.discoveryProgress||0)<100&&e.jsx(o,{className:"w-4 h-4 text-zinc-600"})]},s.id)})}),e.jsxs("div",{className:"mt-8 p-4 bg-zinc-900/30 border border-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"w-4 h-4 text-zinc-500"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Stav Systémů"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-400 uppercase font-bold mb-1",children:[e.jsx(W,{className:"w-3 h-3 text-cyan-400"})," Štíty"]}),e.jsx("div",{className:"w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-cyan-400",style:{width:`${D}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-400 uppercase font-bold mb-1",children:[e.jsx(X,{className:"w-3 h-3 text-signal-amber"})," Palivo"]}),e.jsx("div",{className:"w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-signal-amber",style:{width:`${u}%`}})})]})]})]})]},"list")})}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5 z-0",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"30px 30px"}})]})};export{le as default};
