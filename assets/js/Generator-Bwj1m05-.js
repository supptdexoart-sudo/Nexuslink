import{r as z,j as e,_ as ve,z as se,$ as te,n as ye,l as ke,F as Ce,ay as V,Q as D,az as ze,U as Se,G as Ne,X as Z,w as Pe,x as ae,V as Ie,y as be,a2 as re,Z as ue,aA as Re,a6 as me,O as Oe,a4 as Te,ad as Ae,aB as Ee,o as Me,ag as _e,J as he,aC as Le,ac as Ve,a7 as we,aD as De,ao as Be,Y as He,a5 as Ke,aE as $e,as as Ge,g as Fe,aF as xe,e as Ue,aG as Ze,T as ge,u as qe,aH as Ye,aI as Qe,aJ as Xe,A as fe,m as ee}from"./vendor-D0m_jY5z.js";import{G as g,P as ne,d as Je,p as L,v as je,a as We}from"./index-B9gvzmFS.js";import"html5-qrcode";import"./utils-CiN0I5A8.js";const es=({event:s,onUpdate:x})=>{var p,v,k,O,A;const[c,b]=z.useState(""),[N,f]=z.useState(1),[a,m]=z.useState(0),[w,l]=z.useState(0),n=u=>{x({canSellToMerchant:u.target.checked})},r=(u,y)=>{x({tradeConfig:{...s.tradeConfig||{warriorDiscount:10,clericDiscount:45,mageDiscount:25,rogueStealChance:30},[u]:y}})},o=()=>{if(!c)return;const u={id:c,stock:N,price:a,sellPrice:w};x({merchantItems:[...s.merchantItems||[],u]}),b(""),f(1),m(0),l(0)},d=u=>{x({merchantItems:(s.merchantItems||[]).filter((y,S)=>S!==u)})};return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-black border border-yellow-700 rounded-xl p-5 shadow-[0_0_30px_rgba(234,179,8,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500 border-b border-yellow-900/50 pb-2",children:[e.jsx(ve,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Sklad Obchodníka"})]}),e.jsxs("div",{className:"mb-4 bg-yellow-900/20 p-3 rounded-lg border border-yellow-900/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-bold text-yellow-200 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"})," Povolit Výkup od hráčů?"]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"canSellToMerchant",className:"sr-only peer",checked:s.canSellToMerchant??!1,onChange:n}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-yellow-500"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-yellow-900/30",children:[e.jsx("h4",{className:"text-[10px] font-bold text-yellow-500 uppercase mb-2",children:"Třídní Bonusy"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-red-900/50 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Válečník Sleva %"}),e.jsx("input",{type:"number",value:((p=s.tradeConfig)==null?void 0:p.warriorDiscount)??10,onChange:u=>r("warriorDiscount",parseInt(u.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-yellow-900/50 flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Kněz (Heal) Sleva %"}),e.jsx("input",{type:"number",value:((v=s.tradeConfig)==null?void 0:v.clericDiscount)??45,onChange:u=>r("clericDiscount",parseInt(u.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-blue-900/50 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Mág (Svitky) Sleva %"}),e.jsx("input",{type:"number",value:((k=s.tradeConfig)==null?void 0:k.mageDiscount)??25,onChange:u=>r("mageDiscount",parseInt(u.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-green-900/50 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Zloděj Krádež %"}),e.jsx("input",{type:"number",value:((O=s.tradeConfig)==null?void 0:O.rogueStealChance)??30,onChange:u=>r("rogueStealChance",parseInt(u.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"ID Předmětu (např. ITEM-001)",value:c,onChange:u=>b(u.target.value),className:"flex-[2] bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm min-w-[150px]"}),e.jsx("input",{type:"number",placeholder:"Ks",value:N,onChange:u=>f(parseInt(u.target.value)),className:"w-16 bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm"}),e.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase",children:"Cena (Nákup)"}),e.jsx("input",{type:"number",placeholder:"Cena",value:a,onChange:u=>m(parseInt(u.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-yellow-500 font-mono text-sm font-bold"})]}),e.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase",children:"Cena (Výkup)"}),e.jsx("input",{type:"number",placeholder:"Výkup",value:w,onChange:u=>l(parseInt(u.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-green-500 font-mono text-sm font-bold"})]}),e.jsx("button",{type:"button",onClick:o,className:"px-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded flex items-center justify-center self-end h-10 mt-auto",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[(A=s.merchantItems)==null?void 0:A.map((u,y)=>e.jsxs("div",{className:"flex justify-between items-center bg-zinc-800 p-2 rounded border border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-bold",children:u.id}),e.jsxs("span",{className:"text-zinc-500 text-xs ml-2",children:["x",u.stock]}),e.jsxs("div",{className:"inline-flex gap-3 ml-3",children:[e.jsxs("span",{className:"text-yellow-500 text-xs font-mono font-bold",children:["Nákup: ",u.price||0]}),e.jsxs("span",{className:"text-green-500 text-xs font-mono font-bold",children:["Prodej: ",u.sellPrice||0]})]})]}),e.jsx("button",{type:"button",onClick:()=>d(y),className:"text-red-500 hover:text-white",children:e.jsx(D,{className:"w-4 h-4"})})]},y)),(!s.merchantItems||s.merchantItems.length===0)&&e.jsx("p",{className:"text-zinc-600 text-xs italic text-center",children:"Žádné zboží na skladě."})]})]})},ss=({event:s,onUpdate:x})=>{var w;const c=()=>{var n;const l={label:`Volba ${(((n=s.dilemmaOptions)==null?void 0:n.length)||0)+1}`,successChance:100,consequenceText:"Úspěch!",rewards:[],failMessage:"Nezdařilo se.",failDamage:0,physicalInstruction:""};x({dilemmaOptions:[...s.dilemmaOptions||[],l]})},b=(l,n)=>{const r=[...s.dilemmaOptions||[]];r[l]={...r[l],...n},x({dilemmaOptions:r})},N=l=>{x({dilemmaOptions:(s.dilemmaOptions||[]).filter((n,r)=>r!==l)})},f=l=>{const n=[...s.dilemmaOptions||[]];n[l].rewards||(n[l].rewards=[]),n[l].rewards.push({type:"GOLD",value:10}),x({dilemmaOptions:n})},a=(l,n,r,o)=>{const d=[...s.dilemmaOptions||[]];d[l].rewards&&(d[l].rewards[n]={...d[l].rewards[n],[r]:o},x({dilemmaOptions:d}))},m=(l,n)=>{const r=[...s.dilemmaOptions||[]];r[l].rewards&&(r[l].rewards=r[l].rewards.filter((o,d)=>d!==n),x({dilemmaOptions:r}))};return e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-black border border-purple-700 rounded-xl p-5 shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-neon-purple border-b border-purple-900/50 pb-2",children:[e.jsx(ze,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Editor Křižovatky"})]}),e.jsxs("div",{className:"mb-6 p-3 bg-black/40 rounded border border-purple-500/30 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-purple-300 uppercase tracking-wider",children:"Dosah Dilematu"}),e.jsx("span",{className:"text-[10px] text-zinc-500",children:"Kdo má toto dilema řešit?"})]}),e.jsxs("div",{className:"flex bg-zinc-900 rounded-lg p-1 border border-zinc-700",children:[e.jsxs("button",{type:"button",onClick:()=>x({dilemmaScope:"INDIVIDUAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${s.dilemmaScope==="INDIVIDUAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(Se,{className:"w-3 h-3"})," Jen Hráč"]}),e.jsxs("button",{type:"button",onClick:()=>x({dilemmaScope:"GLOBAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${s.dilemmaScope==="GLOBAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(Ne,{className:"w-3 h-3"})," Všichni"]})]})]}),e.jsx("div",{className:"space-y-6",children:(w=s.dilemmaOptions)==null?void 0:w.map((l,n)=>{var r;return e.jsxs("div",{className:"bg-black/40 border border-purple-500/30 rounded-xl overflow-hidden animate-in slide-in-from-left-4",children:[e.jsxs("div",{className:"bg-purple-900/20 p-3 border-b border-purple-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-[10px] font-black uppercase",children:["Volba ",String.fromCharCode(65+n)]}),e.jsx("input",{value:l.label,onChange:o=>b(n,{label:o.target.value}),placeholder:"Název akce (např. Zaútočit)",className:"bg-transparent border-b border-transparent hover:border-purple-500/50 focus:border-purple-500 text-white font-bold text-sm outline-none px-1"})]}),e.jsx("button",{onClick:()=>N(n),className:"text-red-500 hover:text-red-400 p-1",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold uppercase tracking-wider text-zinc-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"})," Šance na úspěch"]}),e.jsxs("span",{className:l.successChance<100?"text-orange-400":"text-green-400",children:[l.successChance,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.successChance,onChange:o=>b(n,{successChance:parseInt(o.target.value)}),className:"w-full h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-green-900/10 border border-green-500/20 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest",children:"Při Úspěchu"}),e.jsx("textarea",{value:l.consequenceText,onChange:o=>b(n,{consequenceText:o.target.value}),placeholder:"Příběhový text při úspěchu...",className:"w-full bg-black/50 border border-green-900/50 rounded p-2 text-zinc-300 text-xs focus:border-green-500 outline-none",rows:2}),e.jsxs("div",{className:"space-y-2",children:[(r=l.rewards)==null?void 0:r.map((o,d)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:o.type,onChange:p=>a(n,d,"type",p.target.value),className:"bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded uppercase font-bold outline-none",children:[e.jsx("option",{value:"GOLD",children:"Gold"}),e.jsx("option",{value:"HP",children:"HP"}),e.jsx("option",{value:"MANA",children:"Mana"}),e.jsx("option",{value:"XP",children:"XP"})]}),e.jsx("input",{type:"number",value:o.value,onChange:p=>a(n,d,"value",parseInt(p.target.value)),className:"w-16 bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded font-mono",placeholder:"Val"}),e.jsx("button",{onClick:()=>m(n,d),className:"text-zinc-600 hover:text-red-500",children:e.jsx(Z,{className:"w-3 h-3"})})]},d)),e.jsxs("button",{onClick:()=>f(n),className:"text-[9px] font-bold text-green-400 hover:text-green-300 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(V,{className:"w-3 h-3"})," Přidat Odměnu"]})]})]}),l.successChance<100&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-red-900/10 border border-red-500/20 rounded-lg animate-in fade-in",children:[e.jsxs("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"})," Při Neúspěchu"]}),e.jsx("textarea",{value:l.failMessage||"",onChange:o=>b(n,{failMessage:o.target.value}),placeholder:"Příběhový text při selhání...",className:"w-full bg-black/50 border border-red-900/50 rounded p-2 text-zinc-300 text-xs focus:border-red-500 outline-none",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[10px] text-red-400 uppercase font-bold",children:"Poškození (DMG):"}),e.jsx("input",{type:"number",value:l.failDamage||0,onChange:o=>b(n,{failDamage:parseInt(o.target.value)}),className:"w-20 bg-black/50 border border-red-900/50 rounded p-1.5 text-red-500 text-xs font-mono font-bold"})]})]}),e.jsxs("div",{className:"p-3 bg-yellow-900/10 border border-yellow-700/30 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-yellow-500 uppercase tracking-widest block mb-2",children:"Instrukce pro desku (Volitelné)"}),e.jsx("textarea",{value:l.physicalInstruction||"",onChange:o=>b(n,{physicalInstruction:o.target.value}),placeholder:"Např: Posuň figurku o 3 pole zpět...",className:"w-full bg-black/50 border border-yellow-900/50 rounded p-2 text-yellow-200 text-xs font-mono focus:border-yellow-500 outline-none",rows:1})]})]})]},n)})}),e.jsx("button",{type:"button",onClick:c,className:"w-full mt-6 py-3 bg-purple-600 hover:bg-purple-500 text-black font-black uppercase text-xs rounded-xl shadow-lg shadow-purple-500/20 transition-all",children:"+ Přidat Novou Cestu"})]})},ts=({event:s,onUpdate:x})=>{var n;const c=s.type===g.BOSS,b=s.type===g.TRAP,N=(()=>{switch(s.rarity){case"Legendary":return 10;case"Epic":return 30;case"Rare":return 50;default:return 80}})(),f=r=>{var o,d;return((d=(o=s.stats)==null?void 0:o.find(p=>p.label===r))==null?void 0:d.value.toString())||""},a=(r,o)=>{const p=(s.stats?[...s.stats]:[]).filter(v=>v.label!==r);o&&o!=="0"&&p.unshift({label:r,value:o}),x({stats:p})},m=()=>{const r={name:"Nová Fáze",description:"Boss se rozzuří...",triggerType:"HP_PERCENT",triggerValue:50,damageBonus:5};x({bossPhases:[...s.bossPhases||[],r]})},w=(r,o,d)=>{const p=[...s.bossPhases||[]];p[r]={...p[r],[o]:d},x({bossPhases:p})},l=r=>{x({bossPhases:(s.bossPhases||[]).filter((o,d)=>d!==r)})};return c?e.jsxs("div",{className:"bg-gradient-to-br from-red-950 to-black border-2 border-red-800 rounded-xl p-6 shadow-[0_0_50px_rgba(153,27,27,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-red-600 border-b border-red-900 pb-4",children:[e.jsx(Ie,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-display font-black uppercase tracking-widest",children:"Ultimátní Boss"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-900/20 p-3 rounded border border-red-800 text-center",children:[e.jsx(be,{className:"w-5 h-5 text-red-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:f("HP"),onChange:r=>a("HP",r.target.value),placeholder:"HP",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-orange-900/20 p-3 rounded border border-orange-800 text-center",children:[e.jsx(te,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:f("ATK"),onChange:r=>a("ATK",r.target.value),placeholder:"ATK",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-blue-900/20 p-3 rounded border border-blue-800 text-center",children:[e.jsx(re,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:f("DEF"),onChange:r=>a("DEF",r.target.value),placeholder:"DEF",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-red-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"})," Fáze Boje"]}),(n=s.bossPhases)==null?void 0:n.map((r,o)=>e.jsxs("div",{className:"bg-black/60 border border-red-800/50 p-4 rounded-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>l(o),className:"absolute top-2 right-2 text-red-500",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsx("input",{placeholder:"Název Fáze",value:r.name,onChange:d=>w(o,"name",d.target.value),className:"bg-zinc-900 border border-zinc-700 rounded p-2 text-white text-sm font-bold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase",children:"Spustit při % HP:"}),e.jsx("input",{type:"number",value:r.triggerValue,onChange:d=>w(o,"triggerValue",parseInt(d.target.value)),className:"w-16 bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm"})]})]}),e.jsx("textarea",{placeholder:"Popis schopnosti bosse v této fázi...",value:r.description,onChange:d=>w(o,"description",d.target.value),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-zinc-400 text-xs mb-2",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Bonusové Poškození:"}),e.jsx("input",{type:"number",value:r.damageBonus,onChange:d=>w(o,"damageBonus",parseInt(d.target.value)),className:"w-20 bg-red-900/20 border border-red-800 rounded p-1 text-red-400 font-mono text-sm"})]})]},o)),e.jsx("button",{type:"button",onClick:m,className:"w-full py-3 bg-red-900/30 border border-red-600 text-red-400 font-bold uppercase rounded hover:bg-red-900/50 transition-colors",children:"+ Přidat Fázi"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-red-950/40 to-black border border-red-900 rounded-xl p-5 shadow-[0_0_30px_rgba(220,38,38,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-500 border-b border-red-900/50 pb-2",children:[e.jsx(ae,{className:"w-6 h-6"}),e.jsxs("h3",{className:"font-display font-bold uppercase tracking-widest",children:["Konfigurace ",b?"Pasti":"Nepřítele"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3 text-red-500"})," ",b?"Obtížnost":"Zdraví (HP)"]}),e.jsx("input",{type:"number",placeholder:"50",value:f("HP"),onChange:r=>a("HP",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-red-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3 text-orange-500"})," ",b?"Poškození":"Útok (ATK)"]}),e.jsx("input",{type:"number",placeholder:"10",value:f("ATK"),onChange:r=>a("ATK",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-orange-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3 text-blue-500"})," ",b?"Odolnost":"Obrana (DEF)"]}),e.jsx("input",{type:"number",placeholder:"0",value:f("DEF"),onChange:r=>a("DEF",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 text-xs bg-black/40 p-3 rounded border border-zinc-800/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"})," Mechanika Souboje"]}),e.jsxs("ul",{className:"text-zinc-600 space-y-1 list-disc pl-3",children:[e.jsx("li",{children:"Hráč hází kostkou na útok."}),e.jsxs("li",{children:["Poškození = Hod - ",e.jsx("strong",{children:"Obrana"}),"."]}),e.jsxs("li",{children:["Pokud Poškození ",">"," 0, odečte se od ",e.jsx("strong",{children:"HP"}),"."]})]})]}),!b&&e.jsxs("div",{className:"flex-1 border-l border-zinc-800 pl-4",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"})," Šance na Útěk"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Závisí na vzácnosti:"}),e.jsxs("span",{className:`font-mono font-bold ${N<30?"text-red-500":"text-green-500"}`,children:[N,"%"]})]}),e.jsx("p",{className:"text-[10px] text-zinc-600 mt-1",children:"Legendární monstra se loví, před těmi se neutíká."})]})]})]})},as=({event:s,onUpdate:x,masterCatalog:c=[]})=>{var de,E,Q,X,j,C,R,P,M,B,H,K,$,G,F,J,W;const[b,N]=z.useState(""),[f,a]=z.useState(1),[m,w]=z.useState(""),[l,n]=z.useState(1),[r,o]=z.useState(""),[d,p]=z.useState(.8),v=(t,i="+10")=>{const h=[...s.stats||[]];h.some(T=>T.label.toUpperCase()===t.toUpperCase())||x({stats:[...h,{label:t,value:i}]})},k=(t,i,h)=>{const T=[...s.stats||[]];T[t]={...T[t],[i]:h},x({stats:T})},O=t=>{x({stats:(s.stats||[]).filter((i,h)=>h!==t)})},A=(t,i)=>{x({resourceConfig:{...s.resourceConfig||{isResourceContainer:!1,resourceName:"Kovový šrot",resourceAmount:1},[t]:i}})},u=(t,i)=>{x({craftingRecipe:{...s.craftingRecipe||{enabled:!1,requiredResources:[],craftingTimeSeconds:60},[t]:i}})},y=(t,i)=>{x({marketConfig:{...s.marketConfig||{enabled:!1,marketPrice:void 0,saleChance:0,classModifiers:[],recyclingOutput:[]},[t]:i}})},S=()=>{var i;if(!b)return;const t=((i=s.craftingRecipe)==null?void 0:i.requiredResources)||[];t.some(h=>h.resourceName===b)||(u("requiredResources",[...t,{resourceName:b,amount:f}]),a(1))},_=t=>{var h;const i=((h=s.craftingRecipe)==null?void 0:h.requiredResources)||[];u("requiredResources",i.filter((T,I)=>I!==t))},le=()=>{var i;if(!m)return;const t=((i=s.marketConfig)==null?void 0:i.recyclingOutput)||[];t.some(h=>h.resourceName===m)||(y("recyclingOutput",[...t,{resourceName:m,amount:l}]),n(1))},oe=t=>{var h;const i=((h=s.marketConfig)==null?void 0:h.recyclingOutput)||[];y("recyclingOutput",i.filter((T,I)=>I!==t))},ce=()=>{var i;if(!r)return;const t=((i=s.marketConfig)==null?void 0:i.classModifiers)||[];t.some(h=>h.playerClass===r)||(y("classModifiers",[...t,{playerClass:r,priceMultiplier:d}]),o(""),p(.8))},ie=t=>{var h;const i=((h=s.marketConfig)==null?void 0:h.classModifiers)||[];y("classModifiers",i.filter((T,I)=>I!==t))},q=c.filter(t=>{var i;return(i=t.resourceConfig)==null?void 0:i.isResourceContainer}),Y=[{label:"HP",icon:be,color:"text-red-500"},{label:"DMG",icon:te,color:"text-orange-500"},{label:"ARMOR",icon:re,color:"text-zinc-200"},{label:"MANA",icon:ue,color:"text-cyan-400"},{label:"PALIVO",icon:we,color:"text-orange-500"},{label:"ZLATO",icon:se,color:"text-yellow-500"},{label:"KYSLÍK",icon:me,color:"text-cyan-400"}];return e.jsxs("div",{className:"space-y-6 bg-zinc-900/50 p-5 border border-zinc-700 relative rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 border-b border-zinc-700 pb-3",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-[0.2em]",children:"Konfigurace_Assetu:"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-black border border-zinc-700 rounded-lg overflow-hidden transition-colors hover:border-yellow-500",children:e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:s.isConsumable,onChange:t=>x({isConsumable:t.target.checked}),className:"w-6 h-6 rounded border-zinc-700 bg-zinc-900 text-yellow-500 focus:ring-yellow-500 accent-yellow-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[11px] font-black uppercase tracking-widest transition-colors ${s.isConsumable?"text-yellow-500":"text-white"}`,children:"Spotřebovatelný"}),e.jsx("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Zmizí po použití"})]})]})}),e.jsx("div",{className:"bg-black border border-zinc-700 rounded-lg overflow-hidden transition-colors hover:border-red-500",children:e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:s.isSellOnly,onChange:t=>x({isSellOnly:t.target.checked}),className:"w-6 h-6 rounded border-zinc-700 bg-zinc-900 text-red-500 focus:ring-red-500 accent-red-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest transition-colors flex items-center gap-2 ${s.isSellOnly?"text-red-500":"text-white"}`,children:[e.jsx(Te,{className:"w-3 h-3"})," Jen pro Prodej"]}),e.jsx("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Nelze použít, jen prodat"})]})]})})]}),e.jsxs("div",{className:"bg-black border border-zinc-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-500",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Tržní Hodnota (Cena)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s.price||0,onChange:t=>x({price:parseInt(t.target.value)}),className:"w-full bg-zinc-900 border border-zinc-700 p-3 text-white font-mono text-sm focus:border-yellow-500 outline-none rounded"}),e.jsx("span",{className:"absolute right-3 top-3 text-[10px] text-zinc-500 font-bold",children:"GOLD"})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(de=s.marketConfig)!=null&&de.enabled?"bg-indigo-950/20 border-indigo-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((E=s.marketConfig)==null?void 0:E.enabled)||!1,onChange:t=>y("enabled",t.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-indigo-500 focus:ring-indigo-500 accent-indigo-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(Q=s.marketConfig)!=null&&Q.enabled?"text-indigo-400":"text-zinc-400"}`,children:[e.jsx(Ae,{className:"w-3 h-3"})," Konfigurace Tržiště & Recyklace"]})})]}),((X=s.marketConfig)==null?void 0:X.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-5 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Override Tržní Ceny (Volitelné)"}),e.jsx("input",{type:"number",placeholder:"Standardní cena (zleva)",value:s.marketConfig.marketPrice||"",onChange:t=>y("marketPrice",t.target.value?parseInt(t.target.value):void 0),className:"w-full bg-black border border-indigo-500/30 p-2 text-white text-xs font-mono outline-none focus:border-indigo-500 rounded"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"})," Šance na Akci (%)"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:s.marketConfig.saleChance||0,onChange:t=>y("saleChance",parseInt(t.target.value)),className:"w-full h-2 bg-black rounded-lg appearance-none cursor-pointer accent-indigo-500 mb-1"}),e.jsxs("div",{className:"text-right text-[10px] font-mono text-indigo-400",children:[s.marketConfig.saleChance||0,"%"]})]})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-indigo-500/20",children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"})," Třídní Slevy / Přirážky"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:r,onChange:t=>o(t.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"-- Třída --"}),Object.values(ne).map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:d,onChange:t=>p(parseFloat(t.target.value)),className:"flex-1 bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none",children:[e.jsx("option",{value:.5,children:"-50% (Sleva)"}),e.jsx("option",{value:.8,children:"-20% (Sleva)"}),e.jsx("option",{value:1.2,children:"+20% (Dražší)"}),e.jsx("option",{value:1.5,children:"+50% (Dražší)"})]}),e.jsx("button",{type:"button",onClick:ce,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-2 rounded",children:e.jsx(V,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(j=s.marketConfig.classModifiers)==null?void 0:j.map((t,i)=>e.jsxs("div",{className:"flex justify-between items-center bg-indigo-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-indigo-500/10",children:[e.jsx("span",{children:t.playerClass}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:t.priceMultiplier<1?"text-green-400":"text-red-400",children:t.priceMultiplier<1?`SLEVA ${Math.round((1-t.priceMultiplier)*100)}%`:`PŘIRÁŽKA ${Math.round((t.priceMultiplier-1)*100)}%`}),e.jsx("button",{onClick:()=>ie(i),className:"text-zinc-500 hover:text-white",children:e.jsx(Z,{className:"w-3 h-3"})})]})]},i))})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-orange-500/20",children:[e.jsxs("label",{className:"text-[8px] text-orange-400 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(_e,{className:"w-3 h-3"})," Výstup Recyklace"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:m,onChange:t=>w(t.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-orange-500",children:[e.jsx("option",{value:"",children:"-- Surovina --"}),q.map(t=>{var i,h;return e.jsx("option",{value:((i=t.resourceConfig)==null?void 0:i.resourceName)||t.title,children:((h=t.resourceConfig)==null?void 0:h.resourceName)||t.title},t.id)})]}),e.jsx("input",{type:"number",value:l,onChange:t=>n(parseInt(t.target.value)),className:"w-12 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-1.5 rounded outline-none focus:border-orange-500"}),e.jsx("button",{type:"button",onClick:le,className:"bg-orange-600 hover:bg-orange-500 text-white px-2 rounded",children:e.jsx(V,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(C=s.marketConfig.recyclingOutput)==null?void 0:C.map((t,i)=>e.jsxs("div",{className:"flex justify-between items-center bg-orange-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-orange-500/10",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3 text-orange-500"})," ",t.resourceName]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono font-bold text-white",children:["x",t.amount]}),e.jsx("button",{onClick:()=>oe(i),className:"text-zinc-500 hover:text-white",children:e.jsx(Z,{className:"w-3 h-3"})})]})]},i))})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(R=s.resourceConfig)!=null&&R.isResourceContainer?"bg-orange-950/20 border-orange-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((P=s.resourceConfig)==null?void 0:P.isResourceContainer)||!1,onChange:t=>A("isResourceContainer",t.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-orange-500 focus:ring-orange-500 accent-orange-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(M=s.resourceConfig)!=null&&M.isResourceContainer?"text-orange-500":"text-zinc-400"}`,children:[e.jsx(he,{className:"w-3 h-3"})," Je to Surovina?"]})})]}),((B=s.resourceConfig)==null?void 0:B.isResourceContainer)&&e.jsxs("div",{className:"p-4 pt-0 space-y-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-[2fr_1fr] gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Název Suroviny (ID pro crafting)"}),e.jsx("input",{type:"text",value:s.resourceConfig.resourceName||"",onChange:t=>A("resourceName",t.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500 rounded",placeholder:"např. Kovový šrot"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Množství v balíku"}),e.jsx("input",{type:"number",value:s.resourceConfig.resourceAmount||1,onChange:t=>A("resourceAmount",parseInt(t.target.value)),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-orange-500 rounded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Vlastní nápis v Batohu"}),e.jsx("input",{type:"text",value:s.resourceConfig.customLabel||"",onChange:t=>A("customLabel",t.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500 rounded",placeholder:"Výchozí: Surovina k Těžbě"})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(H=s.craftingRecipe)!=null&&H.enabled?"bg-cyan-950/20 border-cyan-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((K=s.craftingRecipe)==null?void 0:K.enabled)||!1,onChange:t=>u("enabled",t.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-cyan-500 focus:ring-cyan-500 accent-cyan-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${($=s.craftingRecipe)!=null&&$.enabled?"text-cyan-500":"text-zinc-400"}`,children:[e.jsx(Le,{className:"w-3 h-3"})," Povolit Výrobu (Recept)"]})})]}),((G=s.craftingRecipe)==null?void 0:G.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-4 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-cyan-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyan-400",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Doba výroby (sekundy)"})]}),e.jsx("input",{type:"number",value:s.craftingRecipe.craftingTimeSeconds||60,onChange:t=>u("craftingTimeSeconds",parseInt(t.target.value)),className:"w-20 bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-cyan-500 rounded"})]}),e.jsxs("div",{className:"p-3 bg-zinc-900/50 rounded border border-zinc-700",children:[e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest block mb-2",children:"Přidat Ingredienci"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:b,onChange:t=>N(t.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-2 rounded outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"-- Vyberte Surovinu --"}),q.map(t=>{var i,h;return e.jsxs("option",{value:((i=t.resourceConfig)==null?void 0:i.resourceName)||t.title,children:[((h=t.resourceConfig)==null?void 0:h.resourceName)||t.title," (",t.id,")"]},t.id)})]}),e.jsx("input",{type:"number",placeholder:"Ks",value:f,onChange:t=>a(parseInt(t.target.value)),className:"w-14 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-2 rounded outline-none focus:border-cyan-500"}),e.jsx("button",{type:"button",onClick:S,className:"bg-cyan-600 hover:bg-cyan-500 text-white px-3 rounded flex items-center justify-center",children:e.jsx(V,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] text-cyan-400/70 uppercase font-bold tracking-widest block",children:"Seznam Požadovaných Surovin:"}),((F=s.craftingRecipe.requiredResources)==null?void 0:F.length)===0&&e.jsx("p",{className:"text-[10px] text-zinc-600 italic text-center py-2",children:"Žádné suroviny. Předmět půjde vyrobit zdarma."}),(J=s.craftingRecipe.requiredResources)==null?void 0:J.map((t,i)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-cyan-500/20 rounded hover:border-cyan-500/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Surovina"}),e.jsx("span",{className:"text-xs text-white font-mono",children:t.resourceName})]}),e.jsxs("div",{className:"px-3 border-l border-zinc-800",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Množství"}),e.jsxs("span",{className:"text-xs text-cyan-400 font-mono font-bold",children:["x",t.amount]})]}),e.jsx("button",{type:"button",onClick:()=>_(i),className:"text-red-500 hover:text-red-400 p-2 ml-2",children:e.jsx(D,{className:"w-4 h-4"})})]},i))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest",children:"Aktivní_stats na kartě:"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(t=>e.jsxs("button",{type:"button",onClick:()=>v(t.label),className:"flex items-center gap-1.5 px-3 py-1.5 border border-zinc-700 hover:border-yellow-500 transition-all active:scale-95 bg-black rounded",children:[e.jsx(t.icon,{className:`w-3 h-3 ${t.color}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-200",children:t.label})]},t.label))}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto no-scrollbar pr-1",children:(W=s.stats)==null?void 0:W.map((t,i)=>{const h=t.label.toUpperCase(),T=Y.find(I=>h.includes(I.label)||I.label==="ARMOR"&&h.includes("ARMOR")||I.label==="KYSLÍK"&&h.includes("OXYGEN")||I.label==="HP"&&(h.includes("HEALTH")||h.includes("ŽIVOT"))||I.label==="PALIVO"&&(h.includes("FUEL")||h.includes("PALIVO")));return e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-zinc-700 rounded animate-in slide-in-from-left-2 duration-200",children:[e.jsx("div",{className:"p-2 border border-zinc-800 bg-zinc-900 rounded",children:T?e.jsx(T.icon,{className:`w-4 h-4 ${T.color}`}):e.jsx(De,{className:"w-4 h-4 text-zinc-400"})}),e.jsx("input",{value:t.label,onChange:I=>k(i,"label",I.target.value),className:"w-24 bg-zinc-900 border border-zinc-700 p-2 text-[10px] font-bold text-white placeholder-zinc-600 outline-none uppercase font-mono rounded focus:border-yellow-500",placeholder:"TAG"}),e.jsx("input",{value:t.value,onChange:I=>k(i,"value",I.target.value),className:"flex-1 bg-zinc-900 border border-zinc-700 px-3 py-2 text-xs text-white font-mono placeholder-zinc-600 focus:border-yellow-500 outline-none rounded",placeholder:"HODNOTA (+/-)"}),e.jsx("button",{type:"button",onClick:()=>O(i),className:"p-2 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(D,{className:"w-4 h-4"})})]},i)})})]})]})},rs=({event:s,onUpdate:x})=>{var b,N,f;const c=(a,m)=>{x({trapConfig:{...s.trapConfig||{difficulty:10,damage:20,disarmClass:ne.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!"},[a]:m}})};return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-arc-red/30 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-arc-red border-b border-arc-red/20 pb-2",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Nástraha_konfigurace:"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Kolik musí hodit hráč kostkou??"}),e.jsx("input",{type:"number",value:((b=s.trapConfig)==null?void 0:b.difficulty)??10,onChange:a=>c("difficulty",parseInt(a.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"DMG po prohře:"}),e.jsx("input",{type:"number",value:((N=s.trapConfig)==null?void 0:N.damage)??20,onChange:a=>c("damage",parseInt(a.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-arc-red font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Pro jakou postavu ??"}),e.jsxs("select",{value:((f=s.trapConfig)==null?void 0:f.disarmClass)??"ANY",onChange:a=>c("disarmClass",a.target.value),className:"w-full bg-black border border-arc-border p-3 text-white text-xs font-mono uppercase focus:ring-1 focus:ring-arc-yellow outline-none",children:[e.jsx("option",{value:"ANY",className:"bg-arc-panel text-white",children:"UNSPECIFIED"}),Object.values(ne).map(a=>e.jsx("option",{value:a,className:"bg-arc-panel text-white",children:a},a))]})]})]})},ns=({event:s,onUpdate:x})=>{var b,N,f;const c=(a,m)=>{x({enemyLoot:{...s.enemyLoot||{goldReward:20,xpReward:10,dropItemChance:0},[a]:m}})};return e.jsxs("div",{className:"mt-4 bg-arc-panel p-5 border border-arc-yellow/20 text-white",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-arc-yellow uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"})," Odměna_po_boji:"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Zlato"}),e.jsx("input",{type:"number",value:((b=s.enemyLoot)==null?void 0:b.goldReward)??0,onChange:a=>c("goldReward",parseInt(a.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Exp_Data"}),e.jsx("input",{type:"number",value:((N=s.enemyLoot)==null?void 0:N.xpReward)??0,onChange:a=>c("xpReward",parseInt(a.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Drop_%"}),e.jsx("input",{type:"number",value:((f=s.enemyLoot)==null?void 0:f.dropItemChance)??0,onChange:a=>c("dropItemChance",parseInt(a.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]})]})]})},ls=({event:s,onUpdate:x})=>{var a,m,w,l;const c=n=>{x({timeVariant:{...s.timeVariant||{enabled:!1,nightStats:[]},...n}})},b=()=>{var r;const n=[...((r=s.timeVariant)==null?void 0:r.nightStats)||[]];n.push({label:"NIGHT_MOD",value:"+5"}),c({nightStats:n})},N=(n,r,o)=>{var p;const d=[...((p=s.timeVariant)==null?void 0:p.nightStats)||[]];d[n]&&(d[n]={...d[n],[r]:o},c({nightStats:d}))},f=n=>{var o;const r=(((o=s.timeVariant)==null?void 0:o.nightStats)||[]).filter((d,p)=>p!==n);c({nightStats:r})};return e.jsxs("div",{className:`mt-6 p-5 border rounded-xl transition-all ${(a=s.timeVariant)!=null&&a.enabled?"bg-indigo-950/30 border-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.2)]":"bg-white/5 border-white/10 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Noční_Protokol_v2.0"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((m=s.timeVariant)==null?void 0:m.enabled)||!1,onChange:n=>c({enabled:n.target.checked})}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-500"})]})]}),((w=s.timeVariant)==null?void 0:w.enabled)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Název karty v noci (Override):"}),e.jsx("input",{value:s.timeVariant.nightTitle||"",onChange:n=>c({nightTitle:n.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-white text-sm outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis karty v noci (Override):"}),e.jsx("textarea",{value:s.timeVariant.nightDescription||"",onChange:n=>c({nightDescription:n.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-zinc-300 text-xs font-mono outline-none focus:border-indigo-500",rows:2})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest",children:"Noční_Statistiky (Nahrazují původní):"}),e.jsx("button",{type:"button",onClick:b,className:"text-[8px] bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded border border-indigo-500/30 font-bold uppercase",children:"+ PŘIDAT NOČNÍ STAT"})]}),(l=s.timeVariant.nightStats)==null?void 0:l.map((n,r)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black/40 p-2 border border-indigo-900/30",children:[e.jsx("input",{value:n.label,onChange:o=>N(r,"label",o.target.value),className:"w-20 bg-transparent border-none p-1 text-[9px] font-bold text-indigo-300 uppercase font-mono",placeholder:"TAG"}),e.jsx("input",{value:n.value,onChange:o=>N(r,"value",o.target.value),className:"flex-1 bg-indigo-950/40 border border-indigo-900/50 px-2 py-1 text-xs text-white font-mono focus:border-indigo-400 outline-none",placeholder:"HODNOTA"}),e.jsx("button",{type:"button",onClick:()=>f(r),className:"text-red-500 p-1 hover:text-red-400",children:e.jsx(D,{className:"w-3.5 h-3.5"})})]},r))]})]})]})},os=({event:s,onUpdate:x})=>{var b,N,f,a;const c=(m,w)=>{x({stationConfig:{...s.stationConfig||{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},[m]:w}})};return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-cyan-500/30 text-white shadow-[0_0_20px_rgba(34,211,238,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-cyan-400 border-b border-cyan-500/20 pb-2",children:[e.jsx(He,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Konfigurace Stanice:"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(Ke,{className:"w-3 h-3"})," Uvítací Zpráva:"]}),e.jsx("input",{type:"text",value:((b=s.stationConfig)==null?void 0:b.welcomeMessage)??"Vítejte na palubě.",onChange:m=>c("welcomeMessage",m.target.value),className:"w-full bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono",placeholder:"Systémy online..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(we,{className:"w-3 h-3 text-orange-500"})," Palivo (Darování)"]}),e.jsx("input",{type:"number",value:((N=s.stationConfig)==null?void 0:N.fuelReward)??50,onChange:m=>c("fuelReward",parseInt(m.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(re,{className:"w-3 h-3 text-slate-300"})," Oprava Lodi (+HP)"]}),e.jsx("input",{type:"number",value:((f=s.stationConfig)==null?void 0:f.repairAmount)??30,onChange:m=>c("repairAmount",parseInt(m.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-cyan-500/20 p-3 rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-cyan-200"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-zinc-300",children:"Doplnit Kyslík (100%)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((a=s.stationConfig)==null?void 0:a.refillO2)??!0,onChange:m=>c("refillO2",m.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-cyan-500"})]})]})]})},cs=({event:s,onUpdate:x,masterCatalog:c})=>{var w,l,n,r,o,d;const b=(p,v)=>{x({planetConfig:{...s.planetConfig||{planetId:"p1",landingEventType:g.ENCOUNTER,phases:[]},[p]:v}})},N=()=>{var v;const p=((v=s.planetConfig)==null?void 0:v.phases)||[];b("phases",[...p,""])},f=(p,v)=>{var O;const k=[...((O=s.planetConfig)==null?void 0:O.phases)||[]];k[p]=v,b("phases",k)},a=p=>{var k;const v=(((k=s.planetConfig)==null?void 0:k.phases)||[]).filter((O,A)=>A!==p);b("phases",v)},m=c.filter(p=>p.type!==g.PLANET);return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-indigo-500/30 text-white shadow-[0_0_20px_rgba(99,102,241,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-400 border-b border-indigo-500/20 pb-2",children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Konfigurace Planety (Kampaň):"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-2",children:[e.jsx($e,{className:"w-3 h-3"})," Cílová Planeta (UI):"]}),e.jsxs("select",{value:((w=s.planetConfig)==null?void 0:w.planetId)??"p1",onChange:p=>b("planetId",p.target.value),className:"w-full bg-black border border-indigo-500/30 p-3 text-white text-xs font-mono focus:border-indigo-500 outline-none rounded",children:[e.jsx("option",{value:"p1",children:"p1 (Terra Nova - Obyvatelná)"}),e.jsx("option",{value:"p2",children:"p2 (Kepler-186f - Ledová)"}),e.jsx("option",{value:"p3",children:"p3 (Mars Outpost - Kolonie)"}),e.jsx("option",{value:"p4",children:"p4 (Black Nebula - Anomálie)"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-indigo-500/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"text-[9px] font-black text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"})," Fáze Mise (Vlny)"]}),e.jsxs("span",{className:"text-[8px] font-mono text-zinc-500",children:[((n=(l=s.planetConfig)==null?void 0:l.phases)==null?void 0:n.length)||0," Fází"]})]}),e.jsxs("div",{className:"space-y-3",children:[(o=(r=s.planetConfig)==null?void 0:r.phases)==null?void 0:o.map((p,v)=>e.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-indigo-900/50 rounded text-[9px] font-bold text-indigo-300 shrink-0 border border-indigo-500/30",children:v+1}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("select",{value:p,onChange:k=>f(v,k.target.value),className:"w-full bg-zinc-900 border border-zinc-700 p-2 text-white text-xs font-mono outline-none focus:border-indigo-500 rounded pl-2 pr-8 appearance-none",children:[e.jsx("option",{value:"",children:"-- Vyberte Kartu --"}),m.map(k=>e.jsxs("option",{value:k.id,children:["[",k.type,"] ",k.title]},k.id))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-500",children:e.jsx(Fe,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>a(v),className:"p-2 text-zinc-500 hover:text-red-500 transition-colors",children:e.jsx(D,{className:"w-4 h-4"})})]},v)),(!((d=s.planetConfig)!=null&&d.phases)||s.planetConfig.phases.length===0)&&e.jsx("div",{className:"text-center p-4 border border-dashed border-zinc-800 rounded-lg text-zinc-600 text-[10px] uppercase font-bold",children:"Žádné fáze. Planeta bude neaktivní."})]}),e.jsxs("button",{type:"button",onClick:N,className:"w-full mt-4 py-3 bg-indigo-600/10 border border-indigo-500/30 hover:bg-indigo-600/20 text-indigo-400 font-bold uppercase text-[10px] tracking-widest rounded-lg flex items-center justify-center gap-2 transition-all",children:[e.jsx(V,{className:"w-4 h-4"})," Přidat Fázi (Krok)"]})]}),e.jsx("p",{className:"text-[9px] text-zinc-500 italic mt-2 border-t border-zinc-800 pt-2 leading-relaxed",children:'Každý "Skok" v lodi spotřebuje palivo a posune hráče na další fázi v seznamu. Po dokončení poslední fáze je planeta dobyta.'})]})},U={id:"",title:"",description:"",type:g.ITEM,rarity:"Common",flavorText:"",stats:[],isShareable:!0,isConsumable:!0,isSellOnly:!1,canBeSaved:!0,price:0,trapConfig:{difficulty:10,damage:20,disarmClass:ne.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!"},enemyLoot:{goldReward:20,xpReward:10,dropItemChance:0},timeVariant:{enabled:!1,nightStats:[]},stationConfig:{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},resourceConfig:{isResourceContainer:!1,resourceName:"Surovina",resourceAmount:1,customLabel:"Surovina k Těžbě"},craftingRecipe:{enabled:!1,requiredResources:[],craftingTimeSeconds:60},planetConfig:{planetId:"p1",landingEventType:g.ENCOUNTER,phases:[]}},pe={[g.ITEM]:"PRE-",[g.ENCOUNTER]:"SET-",[g.TRAP]:"NAS-",[g.MERCHANT]:"OBCH-",[g.DILEMA]:"DIL-",[g.BOSS]:"BOSS-",[g.SPACE_STATION]:"VS-",[g.PLANET]:"PLA-"},bs=({onSaveCard:s,userEmail:x,initialData:c,onClearData:b,onDelete:N,masterCatalog:f=[]})=>{const[a,m]=z.useState(U),[w,l]=z.useState({message:"",type:null}),[n,r]=z.useState(!1),[o,d]=z.useState(!1),[p,v]=z.useState(!1),[k,O]=z.useState(!1),[A,u]=z.useState(!1),y=z.useMemo(()=>!a.id||n&&(c==null?void 0:c.id)===a.id?!1:f.some(j=>j.id.toLowerCase()===a.id.toLowerCase()),[a.id,f,n,c]);z.useEffect(()=>{var j,C,R,P,M,B,H,K,$,G,F;if(c)m({...U,...c,price:c.price!==void 0&&c.price!==null?c.price:U.price,resourceConfig:{isResourceContainer:((j=c.resourceConfig)==null?void 0:j.isResourceContainer)??!1,resourceName:((C=c.resourceConfig)==null?void 0:C.resourceName)??"Surovina",resourceAmount:((R=c.resourceConfig)==null?void 0:R.resourceAmount)??1,customLabel:(P=c.resourceConfig)==null?void 0:P.customLabel},craftingRecipe:{enabled:((M=c.craftingRecipe)==null?void 0:M.enabled)??!1,requiredResources:((B=c.craftingRecipe)==null?void 0:B.requiredResources)??[],craftingTimeSeconds:((H=c.craftingRecipe)==null?void 0:H.craftingTimeSeconds)??60},planetConfig:{planetId:((K=c.planetConfig)==null?void 0:K.planetId)??"p1",landingEventType:(($=c.planetConfig)==null?void 0:$.landingEventType)??g.ENCOUNTER,landingEventId:(G=c.planetConfig)==null?void 0:G.landingEventId,phases:((F=c.planetConfig)==null?void 0:F.phases)??[]},isSellOnly:c.isSellOnly??!1}),r(!0);else{const J=pe[g.ITEM],W=Math.floor(Math.random()*9e3)+1e3;m({...U,id:`${J}${W}`}),r(!1)}},[c]);const S=j=>m(C=>({...C,...j})),_=j=>S({[j.target.name]:j.target.value}),le=j=>{const C=j.target.value;if(n)S({type:C});else{const R=pe[C]||"GEN-",P=Math.floor(Math.random()*9e3)+1e3;S({type:C,id:`${R}${P}`})}},oe=()=>{!N||!a.id||(L("error"),je(50),O(!0))},ce=()=>{a.id&&(L("siren"),je([100,100,100]),u(!0))},ie=()=>{N&&a.id&&(N(a.id),O(!1))},q=async()=>{if(a.id)try{await We(a.id),l({message:"GLOBÁLNÍ VYHLAZENÍ DOKONČENO.",type:"success"}),L("damage"),N&&N(a.id),u(!1)}catch(j){l({message:`Chyba vyhlazení: ${j.message}`,type:"error"})}},Y=async()=>{v(!0);try{await Je(),l({message:"Záloha stažena.",type:"success"}),L("success")}catch{l({message:"Chyba zálohování.",type:"error"}),L("error")}finally{v(!1)}},E=((j,C)=>j?`https://api.qrserver.com/v1/create-qr-code/?size=1000x1000&color=${{[g.BOSS]:"ff3b30",[g.TRAP]:"f5c518",[g.ENCOUNTER]:"ff3b30",[g.DILEMA]:"9333ea",[g.MERCHANT]:"f5c518",[g.ITEM]:"007aff",[g.SPACE_STATION]:"22d3ee",[g.PLANET]:"6366f1"}[C]||"ffffff"}&bgcolor=0a0a0c&margin=20&data=${encodeURIComponent(j)}`:"")(a.id,a.type),Q=async()=>{if(!E||!a.id){l({message:"Identifikátor chybí.",type:"error"});return}d(!0);try{const C=await(await fetch(E)).blob(),R=window.URL.createObjectURL(C),P=document.createElement("a");P.href=R;const M=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"unnamed_asset";P.download=`nexus_${a.type.toLowerCase()}_${M}.png`,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(R),l({message:"Identifikátor stažen do lokální cache.",type:"success"})}catch{l({message:"Chyba protokolu stahování.",type:"error"})}finally{d(!1)}},X=async j=>{if(j.preventDefault(),!x||!a.id){l({message:"Zadejte ID assetu.",type:"error"});return}if(y){l({message:"CHYBA: Toto ID již existuje!",type:"error"}),L("error");return}try{const C={...a};if(x==="zbynekbal97@gmail.com"&&(C.qrCodeUrl=E),await s(C),l({message:"Data synchronizována se serverem.",type:"success"}),!n){const R=pe[g.ITEM],P=Math.floor(Math.random()*9e3)+1e3;m({...U,id:`${R}${P}`})}}catch(C){l({message:C.message,type:"error"})}};return e.jsxs("div",{className:"h-full overflow-y-auto p-6 pb-24 no-scrollbar bg-arc-bg text-white relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 sticky top-0 bg-arc-bg/95 backdrop-blur z-20 pb-4 border-b border-arc-border",children:[e.jsxs("h1",{className:"text-2xl font-bold uppercase tracking-tighter text-white",children:[n?"Editovat":"FABRIKACE"," ",e.jsx("span",{className:"text-arc-yellow",children:"Assetu"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:Y,className:"p-2 bg-black border border-blue-500 text-blue-500 hover:bg-blue-500/10 active:scale-95 transition-all",title:"Stáhnout Zálohu DB",children:p?e.jsx(xe,{className:"w-5 h-5 animate-spin"}):e.jsx(Ue,{className:"w-5 h-5"})}),n&&e.jsx("button",{type:"button",onClick:ce,className:"p-2 bg-black border border-red-600 text-red-600 hover:bg-red-600/20 active:scale-95 transition-all animate-pulse",title:"GLOBÁLNÍ VYHLAZENÍ",children:e.jsx(ae,{className:"w-5 h-5"})}),n&&N&&e.jsx("button",{type:"button",onClick:oe,className:"p-2 bg-black border border-red-900/50 text-red-500 hover:bg-red-900/20 active:scale-95 transition-all",children:e.jsx(D,{className:"w-5 h-5"})}),n&&e.jsx("button",{type:"button",onClick:b,className:"p-2 bg-black border border-arc-border text-arc-yellow hover:bg-arc-yellow/10 active:scale-95 transition-all",children:e.jsx(xe,{className:"w-5 h-5"})})]})]}),e.jsxs("form",{onSubmit:X,className:"space-y-8",children:[e.jsxs("div",{className:"bg-arc-panel p-6 border border-arc-border space-y-6 relative bracket-tl bracket-tr",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"ID_KARTY (jedinečné!):"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"id",value:a.id,onChange:_,placeholder:"NXS-001",className:`w-full bg-black border p-3 text-white font-mono uppercase outline-none text-sm transition-colors ${y?"border-red-500 focus:border-red-600 text-red-500":"border-arc-border focus:border-arc-yellow"}`,required:!0,readOnly:n}),y&&e.jsx("div",{className:"absolute right-3 top-3 animate-pulse",children:e.jsx(Ze,{className:"w-5 h-5 text-red-500"})})]}),y&&e.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1 tracking-widest flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," ID již existuje v databázi!"]}),!y&&a.id.length>3&&e.jsxs("p",{className:"text-[9px] text-green-500 font-bold uppercase mt-1 tracking-widest flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"})," ID Dostupné"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"TYP_karty:"}),e.jsx("select",{name:"type",value:a.type,onChange:le,className:"w-full bg-black border border-arc-border p-3 text-white font-mono uppercase focus:border-arc-yellow outline-none text-sm",children:Object.values(g).map(j=>e.jsx("option",{value:j,className:"bg-arc-panel text-white",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Název_karty:"}),e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2",children:[e.jsx("input",{name:"title",value:a.title,onChange:_,placeholder:"NÁZEV ASSETU",className:"bg-black border border-arc-border p-3 text-white font-bold uppercase focus:border-arc-yellow outline-none text-sm",required:!0}),e.jsx("select",{name:"rarity",value:a.rarity,onChange:_,className:"bg-black border border-arc-border p-3 text-[10px] text-zinc-200 font-mono uppercase outline-none",children:["Common","Rare","Epic","Legendary"].map(j=>e.jsx("option",{value:j,className:"bg-arc-panel text-white",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis_karty:"}),e.jsx("textarea",{name:"description",value:a.description,onChange:_,placeholder:"Analýza objektu...",rows:3,className:"w-full bg-black border border-arc-border p-3 text-zinc-100 text-xs font-mono focus:border-arc-yellow outline-none",required:!0})]})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.type===g.ITEM&&e.jsx(as,{event:a,onUpdate:S,masterCatalog:f}),a.type===g.TRAP&&e.jsx(rs,{event:a,onUpdate:S}),(a.type===g.ENCOUNTER||a.type===g.BOSS)&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{event:a,onUpdate:S}),a.type===g.ENCOUNTER&&e.jsx(ns,{event:a,onUpdate:S})]}),a.type===g.MERCHANT&&e.jsx(es,{event:a,onUpdate:S}),a.type===g.SPACE_STATION&&e.jsx(os,{event:a,onUpdate:S}),a.type===g.PLANET&&e.jsx(cs,{event:a,onUpdate:S,masterCatalog:f}),a.type===g.DILEMA&&e.jsx(ss,{event:a,onUpdate:S}),e.jsx(ls,{event:a,onUpdate:S})]}),e.jsxs("div",{className:"flex items-center gap-6 bg-black p-6 border border-arc-border relative bracket-bl bracket-br",children:[e.jsx("div",{className:"bg-white p-2 border border-zinc-800 shrink-0",children:a.id?e.jsx("img",{src:E,alt:"QR",className:"w-24 h-24 object-contain invert"}):e.jsx("div",{className:"w-24 h-24 flex items-center justify-center bg-zinc-900 border border-zinc-800",children:e.jsx(Ye,{className:"w-10 h-10 text-zinc-700"})})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.3em] mb-1",children:"QR kod karty!:"}),e.jsx("p",{className:"text-[10px] text-zinc-200 font-mono truncate max-w-[120px]",children:a.id||"WAITING_FOR_ID"})]}),e.jsxs("button",{type:"button",onClick:Q,disabled:!a.id||o,className:`w-full py-3 px-4 text-[10px] uppercase font-bold flex items-center justify-center gap-2 border-2 transition-all ${a.id?"text-arc-yellow border-arc-yellow hover:bg-arc-yellow hover:text-black":"text-zinc-700 border-zinc-800 cursor-not-allowed"}`,children:[o?e.jsx(xe,{className:"w-3 h-3 animate-spin"}):e.jsx(Qe,{className:"w-3 h-3"}),o?"Stahování...":"Uložit_PNG_Kód"]})]})]}),w.message&&e.jsxs("div",{className:`p-4 border font-mono text-[10px] uppercase tracking-widest text-center animate-pulse ${w.type==="success"?"text-arc-yellow border-arc-yellow/30 bg-arc-yellow/5":"text-arc-red border-arc-red/30 bg-arc-red/5"}`,children:[">"," ",w.message]}),e.jsxs("button",{type:"submit",disabled:y,className:`w-full py-6 border-2 font-black uppercase text-sm tracking-[0.4em] transition-all shadow-[0_0_30px_rgba(255,157,0,0.3)] rounded-xl flex items-center justify-center gap-3 ${y?"bg-zinc-800 border-zinc-700 text-zinc-500 cursor-not-allowed":"bg-signal-amber border-signal-amber/50 text-black hover:bg-white hover:text-black"}`,children:[e.jsx(Xe,{className:"w-5 h-5"}),n?"Synchronizovat_Změny":"Nahrát kartu do databáze!"]})]}),e.jsx(fe,{children:k&&e.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-sm flex items-center justify-center p-6",children:e.jsxs(ee.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-black border-2 border-red-600 w-full max-w-xs shadow-[0_0_60px_rgba(220,38,38,0.4)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-red-600 animate-pulse"}),e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-red-600/10 rounded-full border border-red-600/50",children:e.jsx(ge,{className:"w-12 h-12 text-red-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-600 uppercase tracking-tighter",children:"Destrukce Dat"}),e.jsx("p",{className:"text-[10px] text-red-600/60 font-mono mt-1 font-bold tracking-widest",children:"Smazat pouze z Master DB"})]}),e.jsxs("p",{className:"text-xs text-zinc-300 font-bold leading-relaxed",children:["Smaže kartu z katalogu. ",e.jsx("br",{}),"Hráči, kteří ji už mají, o ni nepřijdou."]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsx("button",{onClick:()=>O(!1),className:"py-3 bg-zinc-900 text-zinc-400 font-bold uppercase text-[10px] tracking-widest hover:bg-zinc-800 transition-colors border border-zinc-800",children:"Zrušit"}),e.jsx("button",{onClick:ie,className:"py-3 bg-red-600 text-black font-black uppercase text-[10px] tracking-widest hover:bg-red-500 transition-colors shadow-lg animate-pulse",children:"Smazat"})]})]})]})})}),e.jsx(fe,{children:A&&e.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[250] bg-red-950/90 backdrop-blur-md flex items-center justify-center p-6",children:e.jsxs(ee.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-black border-4 border-red-600 w-full max-w-sm shadow-[0_0_100px_rgba(220,38,38,0.8)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-600 animate-pulse"}),e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-6 bg-red-600 rounded-full border-4 border-black animate-bounce",children:e.jsx(ae,{className:"w-16 h-16 text-black"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-black text-red-600 uppercase tracking-tighter",children:"GLOBÁLNÍ VYHLAZENÍ"}),e.jsx("p",{className:"text-xs text-white font-mono mt-2 font-bold tracking-[0.2em] bg-red-600 px-2 py-1 inline-block",children:"ADMIN OVERRIDE: LEVEL 5"})]}),e.jsxs("p",{className:"text-sm text-red-200 font-bold leading-relaxed border-y border-red-900/50 py-4",children:["TATO AKCE JE NEVRATNÁ.",e.jsx("br",{}),e.jsx("br",{}),"1. Smaže kartu z Master Databáze.",e.jsx("br",{}),"2. ",e.jsx("span",{className:"text-white underline",children:"NÁSILÍM ODSTRANÍ"})," kartu z batohu VŠECH hráčů na serveru."]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-6",children:[e.jsx("button",{onClick:q,className:"py-5 bg-red-600 text-black font-black uppercase text-sm tracking-[0.3em] hover:bg-white transition-colors shadow-xl",children:"PROVÉST VYHLAZENÍ"}),e.jsx("button",{onClick:()=>u(!1),className:"py-4 bg-transparent text-zinc-500 font-bold uppercase text-[10px] tracking-widest hover:text-white transition-colors",children:"Zrušit Protokol"})]})]})]})})})]})};export{bs as default};
