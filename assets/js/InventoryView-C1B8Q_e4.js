import{c as x,r as f,G as o,j as e,p as y,v as O}from"./index-DgRZv62J.js";import{F as G,S as K,B as q}from"./star-Dxpx21-z.js";import{D as J}from"./database-C5C3YpZS.js";import{R as X}from"./refresh-cw-CX-bIgtY.js";import{m as k}from"./proxy-Cy90EHSp.js";import{H as V}from"./hammer-kq7--A6H.js";import{B as C,S as W,a as L,b as ee,C as te}from"./swords-CBEjDxKC.js";import{A as ae}from"./index-D-vuHfTn.js";import{X as se}from"./x-BpPr3oMB.js";import{Z as re}from"./zap-CrO_HhGN.js";import"html5-qrcode";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=x("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=x("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=x("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=x("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=x("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=x("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=x("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),I=(p,h)=>{if(h===o.BOSS)return{border:"border-signal-hazard shadow-[0_0_15px_rgba(255,60,60,0.3)]",text:"text-signal-hazard",label:"BOSS_LEVEL"};if(h===o.SPACE_STATION)return{border:"border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",text:"text-cyan-400",label:"ORBITÁLNÍ"};switch((p||"Common").toLowerCase()){case"legendary":return{border:"border-signal-amber shadow-[0_0_15px_rgba(255,157,0,0.4)]",text:"text-signal-amber",label:"LEGENDÁRNÍ"};case"epic":return{border:"border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.3)]",text:"text-purple-400",label:"EPICKÉ"};case"rare":return{border:"border-signal-cyan shadow-[0_0_10px_rgba(0,242,255,0.2)]",text:"text-signal-cyan",label:"VZÁCNÉ"};default:return{border:"border-white/20",text:"text-white/40",label:"BĚŽNÉ"}}},M=(p,h)=>{if(h)return e.jsx(V,{className:"w-4 h-4"});switch(p){case o.BOSS:return e.jsx(te,{className:"w-4 h-4"});case o.ITEM:return e.jsx(C,{className:"w-4 h-4"});case o.MERCHANT:return e.jsx(ee,{className:"w-4 h-4"});case o.TRAP:return e.jsx(L,{className:"w-4 h-4"});case o.ENCOUNTER:return e.jsx(L,{className:"w-4 h-4"});case o.SPACE_STATION:return e.jsx(W,{className:"w-4 h-4"});default:return e.jsx(q,{className:"w-4 h-4"})}},Ne=({inventory:p,loadingInventory:h,isRefreshing:N,playerClass:w,onRefresh:B,onItemClick:$,isTestMode:S})=>{const[g,P]=f.useState("ALL"),[j,D]=f.useState("DEFAULT"),[u,F]=f.useState(!1),[d,m]=f.useState([]),Z=t=>{if(u){y("click"),O(10),d.some(r=>r.id===t.id)?m(r=>r.filter(a=>a.id!==t.id)):d.length<2&&m(r=>[...r,t]);return}y("click"),$(t)},H=()=>{F(!u),m([]),y(u?"click":"open"),O(20)},_=f.useMemo(()=>{const t=new Map;p.forEach(a=>{var c;const n=!!((c=a.resourceConfig)!=null&&c.isResourceContainer),s=n?`RES-${a.resourceConfig.resourceName}`:`ITEM-${a.title}-${a.type}-${a.rarity}`;if(t.has(s)){const l=t.get(s);n?l.resourceConfig.resourceAmount+=a.resourceConfig.resourceAmount:l._stackQty+=1}else{const l={...a,_stackQty:1,_virtualStack:!0,resourceConfig:a.resourceConfig?{...a.resourceConfig}:void 0};t.set(s,l)}});let r=Array.from(t.values());if(g==="RESOURCES")r=r.filter(a=>{var n;return(n=a.resourceConfig)==null?void 0:n.isResourceContainer});else if(g==="ITEMS")r=r.filter(a=>{var n;return(a.type===o.ITEM||a.type==="PŘEDMĚT")&&!((n=a.resourceConfig)!=null&&n.isResourceContainer)});else if(g==="OTHERS"){const a=[o.ENCOUNTER,o.TRAP,o.DILEMA,o.BOSS,o.SPACE_STATION];r=r.filter(n=>a.includes(n.type))}if(j==="RARITY"){const a={legendary:3,epic:2,rare:1,common:0};r.sort((n,s)=>{const c=(n.rarity||"Common").toLowerCase(),l=(s.rarity||"Common").toLowerCase();return(a[l]||0)-(a[c]||0)})}else j==="SPECIALIZATION"&&w?r.sort((a,n)=>{const s=a.classVariants&&a.classVariants[w]?1:0;return(n.classVariants&&n.classVariants[w]?1:0)-s}):(r.sort((a,n)=>{var l,i;const s=(l=a.resourceConfig)!=null&&l.isResourceContainer?1:0,c=(i=n.resourceConfig)!=null&&i.isResourceContainer?1:0;return s!==c?c-s:0}),r.reverse());return r},[p,g,j,w]),U=[{id:"DEFAULT",label:"VÝCHOZÍ",icon:ne},{id:"RARITY",label:"VZÁCNOST",icon:K},{id:"SPECIALIZATION",label:"TŘÍDA",icon:de}],Q=[{id:"ALL",label:"VŠE",icon:ie},{id:"RESOURCES",label:"SUROVINY",icon:V},{id:"ITEMS",label:"VYBAVENÍ",icon:C},{id:"OTHERS",label:"OSTATNÍ",icon:le}],Y=()=>{if(d.length!==2)return null;const[t,r]=d,a=Array.from(new Set([...(t.stats||[]).map(s=>s.label),...(r.stats||[]).map(s=>s.label)])),n=s=>{const c=parseInt(String(s).replace(/[^0-9-]/g,""));return isNaN(c)?0:c};return e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[150] bg-black/95 backdrop-blur-xl p-6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black uppercase text-signal-cyan chromatic-text",children:"Taktické Srovnání"}),e.jsx("p",{className:"text-[10px] text-white/40 font-mono uppercase tracking-widest",children:"Analýza_Assetů_v1.0"})]}),e.jsx("button",{onClick:()=>m([]),className:"p-3 bg-white/5 rounded-full text-zinc-400 hover:text-white",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[t,r].map((s,c)=>{var i;const l=I(s.rarity,s.type);return e.jsxs("div",{className:`p-4 tactical-card bg-white/5 border-t-4 ${l.border}`,children:[e.jsx("div",{className:`mb-2 ${l.text}`,children:M(s.type,!!((i=s.resourceConfig)!=null&&i.isResourceContainer))}),e.jsx("h3",{className:"text-xs font-black uppercase text-white truncate leading-tight",children:s.title}),e.jsx("p",{className:"text-[8px] text-zinc-500 font-mono mt-1",children:l.label})]},c)})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-500 uppercase tracking-widest border-b border-white/10 pb-2",children:[e.jsx(re,{className:"w-3 h-3"})," Parametry_Modulů"]}),a.map(s=>{var A,E,R,T;const c=((E=(A=t.stats)==null?void 0:A.find(v=>v.label===s))==null?void 0:E.value)||"---",l=((T=(R=r.stats)==null?void 0:R.find(v=>v.label===s))==null?void 0:T.value)||"---",i=n(c),b=n(l);return e.jsxs("div",{className:"bg-white/[0.02] border border-white/5 p-3 rounded-xl",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("span",{className:"text-[9px] font-black text-zinc-400 uppercase tracking-widest",children:s})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 relative",children:[e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-px h-6 bg-white/10"}),e.jsxs("div",{className:`text-center font-mono font-black text-lg ${i>b?"text-signal-cyan":i<b?"text-zinc-600":"text-white"}`,children:[c,i>b&&e.jsx("div",{className:"text-[8px] text-signal-cyan/50 mt-1",children:"▲ LEPŠÍ"})]}),e.jsxs("div",{className:`text-center font-mono font-black text-lg ${b>i?"text-signal-cyan":b<i?"text-zinc-600":"text-white"}`,children:[l,b>i&&e.jsx("div",{className:"text-[8px] text-signal-cyan/50 mt-1",children:"▲ LEPŠÍ"})]})]})]},s)})]})]}),e.jsx("button",{onClick:()=>m([]),className:"w-full py-5 bg-signal-cyan text-black font-black uppercase text-xs tracking-[0.3em] rounded-2xl mt-6 shadow-[0_0_30px_rgba(0,242,255,0.2)]",children:"Ukončit_Analýzu"})]})};return e.jsxs("div",{className:"w-full h-full flex flex-col p-6 bg-[#0a0b0d] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-20",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-3xl font-black uppercase tracking-tighter text-white font-sans chromatic-text leading-none",children:"MŮJ BATOH"}),e.jsx("div",{className:"flex items-center gap-3 mt-1.5",children:S?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 text-orange-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] text-orange-500 font-mono font-bold uppercase tracking-[0.4em]",children:"TESTOVACÍ_PROFIL"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 text-signal-cyan/50"}),e.jsx("span",{className:"text-[10px] text-white/40 font-mono font-bold uppercase tracking-[0.4em]",children:"Osobní_Zásoby"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:H,className:`p-3 tactical-card transition-all active:scale-90 border-2 ${u?"bg-signal-cyan border-signal-cyan text-black":"bg-white/5 border-white/10 text-signal-cyan"}`,title:"Srovnání Assetů",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B(),disabled:N,className:"p-3 tactical-card bg-white/5 border-white/10 hover:border-signal-cyan transition-all active:scale-90 disabled:opacity-50",children:e.jsx(X,{className:`w-4 h-4 text-signal-cyan ${N?"animate-spin":""}`})})]})]}),S&&e.jsx("div",{className:"mb-4 bg-orange-950/30 border border-orange-500/50 p-2 rounded text-center",children:e.jsx("p",{className:"text-[9px] text-orange-500 font-bold uppercase tracking-widest",children:"POZOR: Operujete v testovacím trezoru. Data zde neovlivňují Master Databázi."})}),u&&e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-signal-cyan/10 border border-signal-cyan/30 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-signal-cyan rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-signal-cyan uppercase tracking-widest",children:d.length===0?"Vyberte první asset...":d.length===1?"Vyberte druhý asset z Batohu":"Analýza připravena"})]}),d.length>0&&e.jsx("button",{onClick:()=>m([]),className:"text-[9px] font-black text-zinc-500 uppercase underline",children:"Reset"})]}),e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto no-scrollbar pb-1",children:Q.map(t=>e.jsxs("button",{onClick:()=>{P(t.id),y("click")},className:`px-4 py-2.5 rounded-lg flex items-center gap-2 border transition-all whitespace-nowrap ${g===t.id?"bg-white text-black border-white shadow-[0_0_15px_rgba(255,255,255,0.3)]":"bg-white/5 border-white/10 text-zinc-500 hover:text-white hover:border-white/30"}`,children:[e.jsx(t.icon,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:t.label})]},t.id))}),e.jsx("div",{className:"flex gap-2 mb-4",children:U.map(t=>e.jsxs("button",{onClick:()=>{D(t.id),y("click")},className:`flex-1 py-2 flex flex-col items-center justify-center gap-1 border rounded transition-all ${j===t.id?"bg-signal-cyan/20 border-signal-cyan text-signal-cyan shadow-[0_0_10px_rgba(0,242,255,0.2)]":"bg-white/5 border-white/10 text-white/40"}`,children:[e.jsx(t.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest",children:t.label})]},t.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-24 no-scrollbar relative z-10",children:h?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4",children:[e.jsx(oe,{className:"w-10 h-10 animate-spin text-signal-cyan"}),e.jsx("span",{className:"text-[10px] font-mono text-zinc-500 uppercase tracking-widest",children:"Prohledávám Batoh..."})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.length===0?e.jsxs("div",{className:"col-span-2 flex flex-col items-center justify-center py-10 opacity-50",children:[e.jsx(C,{className:"w-12 h-12 text-zinc-600 mb-2"}),e.jsx("span",{className:"text-xs font-mono uppercase text-zinc-500 font-bold",children:"Kategorie je prázdná"})]}):_.map(t=>{var c,l;const r=!!((c=t.resourceConfig)!=null&&c.isResourceContainer),a=r?{border:"border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.2)]",text:"text-orange-500",label:"SUROVINA"}:I(t.rarity,t.type),n=d.some(i=>i.id===t.id),s=t;return e.jsxs(k.div,{onClick:()=>Z(t),initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`tactical-card h-48 flex flex-col justify-between p-4 bg-black/40 border-t-2 ${a.border} active:scale-95 transition-transform group relative ${n?"scale-90 border-2 border-signal-cyan ring-4 ring-signal-cyan/20":""} ${r?"bg-orange-950/10":""}`,children:[n&&e.jsx("div",{className:"absolute inset-0 bg-signal-cyan/10 flex items-center justify-center z-10",children:e.jsx("div",{className:"bg-signal-cyan text-black p-2 rounded-full shadow-[0_0_20px_#00f2ff]",children:e.jsx(z,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`${a.text}`,children:M(t.type,r)}),r&&e.jsxs("div",{className:"text-xs font-mono font-bold text-orange-500 bg-orange-950/50 px-2 py-0.5 rounded border border-orange-500/30 shadow-[0_0_10px_rgba(249,115,22,0.2)]",children:["x",((l=t.resourceConfig)==null?void 0:l.resourceAmount)||1]}),!r&&s._stackQty>1&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-white bg-red-600 px-2 py-0.5 rounded shadow-[0_0_10px_rgba(220,38,38,0.5)] border border-red-400",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsxs("span",{children:["x",s._stackQty]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-[10px] uppercase line-clamp-2 transition-colors ${r?"text-orange-100 group-hover:text-orange-400":"text-white group-hover:text-signal-cyan"}`,children:t.title}),e.jsx("p",{className:"text-[8px] text-zinc-500 font-mono mt-1",children:a.label})]})]},t.id)})})}),e.jsx(ae,{children:Y()})]})};export{Ne as default};
