import{c as A,r,j as e,p as l,v as E}from"./index-DgRZv62J.js";import{g as P,R as u,M as H,d as M,a as f}from"./radio-t-H6IZSU.js";import{m as j}from"./proxy-Cy90EHSp.js";import{a as O,S as y}from"./sun-C7UsbfR3.js";import{X as T}from"./x-BpPr3oMB.js";import{U as $,H as D}from"./users-CuxFfBZU.js";import{D as N}from"./database-C5C3YpZS.js";import{R as L}from"./refresh-cw-CX-bIgtY.js";import{Z as U}from"./zap-CrO_HhGN.js";import{S as Z}from"./send-hnBTejES.js";import"html5-qrcode";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=A("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]),I=({onClose:v,currentRoomId:t,onToggleDayNight:k,isNight:m})=>{const[a,c]=r.useState("players"),[p,w]=r.useState([]),[C,b]=r.useState(!1),[o,g]=r.useState(""),[i,S]=r.useState(null);r.useEffect(()=>{t&&d()},[t]);const d=async()=>{if(t){b(!0);try{const s=await P(t);w(s.members||[])}catch{}finally{b(!1)}}},x=async(s,n,h=0)=>{if(t){l(n==="damage"?"error":"success"),E(50);try{await f(t,s,n,n==="damage"?-h:h),setTimeout(d,500)}catch{l("error")}}},z=async()=>{if(!(!t||!o.trim())){l("message");try{await f(t,"ALL","broadcast",o.toUpperCase()),g("")}catch{l("error")}}};return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-0 z-[200] bg-black font-mono text-green-500 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-green-500/30 flex justify-between items-center bg-green-950/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-6 h-6 animate-pulse"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black uppercase tracking-widest",children:"Nexus_Command"}),e.jsx("p",{className:"text-[10px] text-green-500/60 uppercase",children:"Admin Authority: GRANTED"})]})]}),e.jsx("button",{onClick:v,className:"p-2 border border-green-500/30 rounded hover:bg-green-500/20 text-green-500",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b border-green-500/30",children:[e.jsxs("button",{onClick:()=>c("players"),className:`flex-1 py-4 text-xs font-bold uppercase tracking-widest flex justify-center gap-2 ${a==="players"?"bg-green-500/20 text-white":"text-green-500/60"}`,children:[e.jsx($,{className:"w-4 h-4"})," Jednotky"]}),e.jsxs("button",{onClick:()=>c("global"),className:`flex-1 py-4 text-xs font-bold uppercase tracking-widest flex justify-center gap-2 ${a==="global"?"bg-green-500/20 text-white":"text-green-500/60"}`,children:[e.jsx(u,{className:"w-4 h-4"})," Operace"]}),e.jsxs("button",{onClick:()=>c("db"),className:`flex-1 py-4 text-xs font-bold uppercase tracking-widest flex justify-center gap-2 ${a==="db"?"bg-green-500/20 text-white":"text-green-500/60"}`,children:[e.jsx(N,{className:"w-4 h-4"})," Archiv"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5 bg-[repeating-linear-gradient(0deg,transparent,transparent_1px,#00ff00_1px,#00ff00_2px)]"}),a==="players"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-xs uppercase tracking-widest text-green-500/60",children:["Aktivní v sektoru: ",p.length]}),e.jsx("button",{onClick:d,className:"p-2 bg-green-500/10 rounded hover:bg-green-500/30",children:e.jsx(L,{className:`w-4 h-4 ${C?"animate-spin":""}`})})]}),p.map((s,n)=>e.jsxs("div",{className:`border ${i===s.name?"border-green-500 bg-green-500/10":"border-green-500/30 bg-black"} p-4 rounded-lg transition-all`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 cursor-pointer",onClick:()=>S(i===s.name?null:s.name),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-bold text-white text-lg",children:s.name})]}),e.jsxs("span",{className:`font-mono font-bold ${s.hp<30?"text-red-500":"text-green-500"}`,children:[s.hp," HP"]})]}),i===s.name&&e.jsxs(j.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"grid grid-cols-2 gap-2 pt-2 border-t border-green-500/20",children:[e.jsxs("button",{onClick:()=>x(s.name,"damage",10),className:"py-3 bg-red-900/20 border border-red-500/50 text-red-500 font-bold uppercase text-[10px] rounded flex items-center justify-center gap-2 hover:bg-red-900/40",children:[e.jsx(U,{className:"w-4 h-4"})," Smite (-10)"]}),e.jsxs("button",{onClick:()=>x(s.name,"heal",20),className:"py-3 bg-blue-900/20 border border-blue-500/50 text-blue-400 font-bold uppercase text-[10px] rounded flex items-center justify-center gap-2 hover:bg-blue-900/40",children:[e.jsx(D,{className:"w-4 h-4"})," Heal (+20)"]}),e.jsxs("button",{onClick:()=>x(s.name,"kick"),className:"col-span-2 py-3 bg-zinc-900 border border-zinc-700 text-zinc-500 font-bold uppercase text-[10px] rounded flex items-center justify-center gap-2 hover:bg-red-950 hover:text-red-500 hover:border-red-500",children:[e.jsx(B,{className:"w-4 h-4"})," Vyhodit ze sektoru"]})]})]},n))]}),a==="global"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-green-500/5 border border-green-500/20 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"})," Emergency Broadcast"]}),e.jsx("textarea",{value:o,onChange:s=>g(s.target.value),className:"w-full bg-black border border-green-500/30 p-3 text-green-500 font-mono text-sm mb-3 outline-none focus:border-green-500 h-24",placeholder:"Zadejte systémovou zprávu..."}),e.jsxs("button",{onClick:z,className:"w-full py-3 bg-green-600 text-black font-black uppercase text-xs tracking-widest rounded hover:bg-green-500 flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"})," Odeslat Varování"]})]}),e.jsxs("div",{className:"bg-green-500/5 border border-green-500/20 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," Kontrola Prostředí"]}),e.jsxs("button",{onClick:k,className:"w-full py-4 border border-green-500/30 bg-black hover:bg-green-500/10 text-green-500 font-bold uppercase text-xs flex items-center justify-center gap-3 rounded transition-all",children:[m?e.jsx(y,{className:"w-5 h-5 text-yellow-500"}):e.jsx(H,{className:"w-5 h-5 text-blue-400"}),m?"Vynutit: DENNÍ REŽIM":"Vynutit: NOČNÍ REŽIM"]})]})]}),a==="db"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-6",children:[e.jsx(N,{className:"w-16 h-16 text-green-500/30"}),e.jsx("p",{className:"text-xs text-green-500/60 text-center max-w-xs",children:"Zde můžete stáhnout kompletní JSON zálohu všech předmětů v databázi pro archivaci."}),e.jsx("button",{onClick:()=>M(),className:"px-8 py-4 border-2 border-green-500 text-green-500 font-black uppercase tracking-widest hover:bg-green-500 hover:text-black transition-all rounded",children:"STÁHNOUT ZÁLOHU"})]})]})]})};export{I as default};
