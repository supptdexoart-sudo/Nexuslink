import{c as A,r as P,j as e,e as we,f as U,d as Z,g as ye,W as ke,h as Ce,T as B,U as ze,b as ge,X as $,P as Se,i as fe,G as k,C as Pe,k as W,l as Q,Z as ee,n as te,B as je,o as Re,q as Me,s as Y,t as Ie,H as ue,u as Ne,w as ve,M as Te,S as Ae,x as Oe,y as _e,A as Le,m as me,z as Ee,E as De,p as X,v as Ve}from"./index-Z52Bw-_7.js";import{P as G}from"./plus-n8ZH8lwQ.js";import{S as He}from"./star-5_0v3QFF.js";import"html5-qrcode";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=A("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=A("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=A("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=A("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=A("Scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=A("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=A("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ye=({event:t,onUpdate:u})=>{var v,M,O,T,y;const[l,m]=P.useState(""),[j,N]=P.useState(1),[s,h]=P.useState(0),[w,c]=P.useState(0),n=b=>{u({canSellToMerchant:b.target.checked})},r=(b,z)=>{u({tradeConfig:{...t.tradeConfig||{warriorDiscount:10,clericDiscount:45,mageDiscount:25,rogueStealChance:30},[b]:z}})},o=()=>{if(!l)return;const b={id:l,stock:j,price:s,sellPrice:w};u({merchantItems:[...t.merchantItems||[],b]}),m(""),N(1),h(0),c(0)},d=b=>{u({merchantItems:(t.merchantItems||[]).filter((z,L)=>L!==b)})};return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-black border border-yellow-700 rounded-xl p-5 shadow-[0_0_30px_rgba(234,179,8,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500 border-b border-yellow-900/50 pb-2",children:[e.jsx(we,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Sklad Obchodníka"})]}),e.jsxs("div",{className:"mb-4 bg-yellow-900/20 p-3 rounded-lg border border-yellow-900/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-bold text-yellow-200 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Povolit Výkup od hráčů?"]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"canSellToMerchant",className:"sr-only peer",checked:t.canSellToMerchant??!1,onChange:n}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-yellow-500"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-yellow-900/30",children:[e.jsx("h4",{className:"text-[10px] font-bold text-yellow-500 uppercase mb-2",children:"Třídní Bonusy"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-red-900/50 flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Válečník Sleva %"}),e.jsx("input",{type:"number",value:((v=t.tradeConfig)==null?void 0:v.warriorDiscount)??10,onChange:b=>r("warriorDiscount",parseInt(b.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-yellow-900/50 flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Kněz (Heal) Sleva %"}),e.jsx("input",{type:"number",value:((M=t.tradeConfig)==null?void 0:M.clericDiscount)??45,onChange:b=>r("clericDiscount",parseInt(b.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-blue-900/50 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Mág (Svitky) Sleva %"}),e.jsx("input",{type:"number",value:((O=t.tradeConfig)==null?void 0:O.mageDiscount)??25,onChange:b=>r("mageDiscount",parseInt(b.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-green-900/50 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Zloděj Krádež %"}),e.jsx("input",{type:"number",value:((T=t.tradeConfig)==null?void 0:T.rogueStealChance)??30,onChange:b=>r("rogueStealChance",parseInt(b.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"ID Předmětu (např. ITEM-001)",value:l,onChange:b=>m(b.target.value),className:"flex-[2] bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm min-w-[150px]"}),e.jsx("input",{type:"number",placeholder:"Ks",value:j,onChange:b=>N(parseInt(b.target.value)),className:"w-16 bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm"}),e.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase",children:"Cena (Nákup)"}),e.jsx("input",{type:"number",placeholder:"Cena",value:s,onChange:b=>h(parseInt(b.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-yellow-500 font-mono text-sm font-bold"})]}),e.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase",children:"Cena (Výkup)"}),e.jsx("input",{type:"number",placeholder:"Výkup",value:w,onChange:b=>c(parseInt(b.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-green-500 font-mono text-sm font-bold"})]}),e.jsx("button",{type:"button",onClick:o,className:"px-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded flex items-center justify-center self-end h-10 mt-auto",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[(y=t.merchantItems)==null?void 0:y.map((b,z)=>e.jsxs("div",{className:"flex justify-between items-center bg-zinc-800 p-2 rounded border border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-bold",children:b.id}),e.jsxs("span",{className:"text-zinc-500 text-xs ml-2",children:["x",b.stock]}),e.jsxs("div",{className:"inline-flex gap-3 ml-3",children:[e.jsxs("span",{className:"text-yellow-500 text-xs font-mono font-bold",children:["Nákup: ",b.price||0]}),e.jsxs("span",{className:"text-green-500 text-xs font-mono font-bold",children:["Prodej: ",b.sellPrice||0]})]})]}),e.jsx("button",{type:"button",onClick:()=>d(z),className:"text-red-500 hover:text-white",children:e.jsx(B,{className:"w-4 h-4"})})]},z)),(!t.merchantItems||t.merchantItems.length===0)&&e.jsx("p",{className:"text-zinc-600 text-xs italic text-center",children:"Žádné zboží na skladě."})]})]})},Xe=({event:t,onUpdate:u})=>{var w;const l=()=>{var n;const c={label:`Volba ${(((n=t.dilemmaOptions)==null?void 0:n.length)||0)+1}`,successChance:100,consequenceText:"Úspěch!",rewards:[],failMessage:"Nezdařilo se.",failDamage:0,physicalInstruction:""};u({dilemmaOptions:[...t.dilemmaOptions||[],c]})},m=(c,n)=>{const r=[...t.dilemmaOptions||[]];r[c]={...r[c],...n},u({dilemmaOptions:r})},j=c=>{u({dilemmaOptions:(t.dilemmaOptions||[]).filter((n,r)=>r!==c)})},N=c=>{const n=[...t.dilemmaOptions||[]];n[c].rewards||(n[c].rewards=[]),n[c].rewards.push({type:"GOLD",value:10}),u({dilemmaOptions:n})},s=(c,n,r,o)=>{const d=[...t.dilemmaOptions||[]];d[c].rewards&&(d[c].rewards[n]={...d[c].rewards[n],[r]:o},u({dilemmaOptions:d}))},h=(c,n)=>{const r=[...t.dilemmaOptions||[]];r[c].rewards&&(r[c].rewards=r[c].rewards.filter((o,d)=>d!==n),u({dilemmaOptions:r}))};return e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-black border border-purple-700 rounded-xl p-5 shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-neon-purple border-b border-purple-900/50 pb-2",children:[e.jsx($e,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Editor Křižovatky"})]}),e.jsxs("div",{className:"mb-6 p-3 bg-black/40 rounded border border-purple-500/30 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-purple-300 uppercase tracking-wider",children:"Dosah Dilematu"}),e.jsx("span",{className:"text-[10px] text-zinc-500",children:"Kdo má toto dilema řešit?"})]}),e.jsxs("div",{className:"flex bg-zinc-900 rounded-lg p-1 border border-zinc-700",children:[e.jsxs("button",{type:"button",onClick:()=>u({dilemmaScope:"INDIVIDUAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${t.dilemmaScope==="INDIVIDUAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(ze,{className:"w-3 h-3"})," Jen Hráč"]}),e.jsxs("button",{type:"button",onClick:()=>u({dilemmaScope:"GLOBAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${t.dilemmaScope==="GLOBAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(ge,{className:"w-3 h-3"})," Všichni"]})]})]}),e.jsx("div",{className:"space-y-6",children:(w=t.dilemmaOptions)==null?void 0:w.map((c,n)=>{var r;return e.jsxs("div",{className:"bg-black/40 border border-purple-500/30 rounded-xl overflow-hidden animate-in slide-in-from-left-4",children:[e.jsxs("div",{className:"bg-purple-900/20 p-3 border-b border-purple-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-[10px] font-black uppercase",children:["Volba ",String.fromCharCode(65+n)]}),e.jsx("input",{value:c.label,onChange:o=>m(n,{label:o.target.value}),placeholder:"Název akce (např. Zaútočit)",className:"bg-transparent border-b border-transparent hover:border-purple-500/50 focus:border-purple-500 text-white font-bold text-sm outline-none px-1"})]}),e.jsx("button",{onClick:()=>j(n),className:"text-red-500 hover:text-red-400 p-1",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold uppercase tracking-wider text-zinc-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"})," Šance na úspěch"]}),e.jsxs("span",{className:c.successChance<100?"text-orange-400":"text-green-400",children:[c.successChance,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:c.successChance,onChange:o=>m(n,{successChance:parseInt(o.target.value)}),className:"w-full h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-green-900/10 border border-green-500/20 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest",children:"Při Úspěchu"}),e.jsx("textarea",{value:c.consequenceText,onChange:o=>m(n,{consequenceText:o.target.value}),placeholder:"Příběhový text při úspěchu...",className:"w-full bg-black/50 border border-green-900/50 rounded p-2 text-zinc-300 text-xs focus:border-green-500 outline-none",rows:2}),e.jsxs("div",{className:"space-y-2",children:[(r=c.rewards)==null?void 0:r.map((o,d)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:o.type,onChange:v=>s(n,d,"type",v.target.value),className:"bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded uppercase font-bold outline-none",children:[e.jsx("option",{value:"GOLD",children:"Gold"}),e.jsx("option",{value:"HP",children:"HP"}),e.jsx("option",{value:"MANA",children:"Mana"}),e.jsx("option",{value:"XP",children:"XP"})]}),e.jsx("input",{type:"number",value:o.value,onChange:v=>s(n,d,"value",parseInt(v.target.value)),className:"w-16 bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded font-mono",placeholder:"Val"}),e.jsx("button",{onClick:()=>h(n,d),className:"text-zinc-600 hover:text-red-500",children:e.jsx($,{className:"w-3 h-3"})})]},d)),e.jsxs("button",{onClick:()=>N(n),className:"text-[9px] font-bold text-green-400 hover:text-green-300 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(G,{className:"w-3 h-3"})," Přidat Odměnu"]})]})]}),c.successChance<100&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-red-900/10 border border-red-500/20 rounded-lg animate-in fade-in",children:[e.jsxs("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"})," Při Neúspěchu"]}),e.jsx("textarea",{value:c.failMessage||"",onChange:o=>m(n,{failMessage:o.target.value}),placeholder:"Příběhový text při selhání...",className:"w-full bg-black/50 border border-red-900/50 rounded p-2 text-zinc-300 text-xs focus:border-red-500 outline-none",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[10px] text-red-400 uppercase font-bold",children:"Poškození (DMG):"}),e.jsx("input",{type:"number",value:c.failDamage||0,onChange:o=>m(n,{failDamage:parseInt(o.target.value)}),className:"w-20 bg-black/50 border border-red-900/50 rounded p-1.5 text-red-500 text-xs font-mono font-bold"})]})]}),e.jsxs("div",{className:"p-3 bg-yellow-900/10 border border-yellow-700/30 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-yellow-500 uppercase tracking-widest block mb-2",children:"Instrukce pro desku (Volitelné)"}),e.jsx("textarea",{value:c.physicalInstruction||"",onChange:o=>m(n,{physicalInstruction:o.target.value}),placeholder:"Např: Posuň figurku o 3 pole zpět...",className:"w-full bg-black/50 border border-yellow-900/50 rounded p-2 text-yellow-200 text-xs font-mono focus:border-yellow-500 outline-none",rows:1})]})]})]},n)})}),e.jsx("button",{type:"button",onClick:l,className:"w-full mt-6 py-3 bg-purple-600 hover:bg-purple-500 text-black font-black uppercase text-xs rounded-xl shadow-lg shadow-purple-500/20 transition-all",children:"+ Přidat Novou Cestu"})]})},Je=({event:t,onUpdate:u})=>{var n;const l=t.type===k.BOSS,m=t.type===k.TRAP,j=(()=>{switch(t.rarity){case"Legendary":return 10;case"Epic":return 30;case"Rare":return 50;default:return 80}})(),N=r=>{var o,d;return((d=(o=t.stats)==null?void 0:o.find(v=>v.label===r))==null?void 0:d.value.toString())||""},s=(r,o)=>{const v=(t.stats?[...t.stats]:[]).filter(M=>M.label!==r);o&&o!=="0"&&v.unshift({label:r,value:o}),u({stats:v})},h=()=>{const r={name:"Nová Fáze",description:"Boss se rozzuří...",triggerType:"HP_PERCENT",triggerValue:50,damageBonus:5};u({bossPhases:[...t.bossPhases||[],r]})},w=(r,o,d)=>{const v=[...t.bossPhases||[]];v[r]={...v[r],[o]:d},u({bossPhases:v})},c=r=>{u({bossPhases:(t.bossPhases||[]).filter((o,d)=>d!==r)})};return l?e.jsxs("div",{className:"bg-gradient-to-br from-red-950 to-black border-2 border-red-800 rounded-xl p-6 shadow-[0_0_50px_rgba(153,27,27,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-red-600 border-b border-red-900 pb-4",children:[e.jsx(Pe,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-display font-black uppercase tracking-widest",children:"Ultimátní Boss"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-900/20 p-3 rounded border border-red-800 text-center",children:[e.jsx(W,{className:"w-5 h-5 text-red-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:N("HP"),onChange:r=>s("HP",r.target.value),placeholder:"HP",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-orange-900/20 p-3 rounded border border-orange-800 text-center",children:[e.jsx(Z,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:N("ATK"),onChange:r=>s("ATK",r.target.value),placeholder:"ATK",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-blue-900/20 p-3 rounded border border-blue-800 text-center",children:[e.jsx(Q,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:N("DEF"),onChange:r=>s("DEF",r.target.value),placeholder:"DEF",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-red-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"})," Fáze Boje"]}),(n=t.bossPhases)==null?void 0:n.map((r,o)=>e.jsxs("div",{className:"bg-black/60 border border-red-800/50 p-4 rounded-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>c(o),className:"absolute top-2 right-2 text-red-500",children:e.jsx($,{className:"w-4 h-4"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsx("input",{placeholder:"Název Fáze",value:r.name,onChange:d=>w(o,"name",d.target.value),className:"bg-zinc-900 border border-zinc-700 rounded p-2 text-white text-sm font-bold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase",children:"Spustit při % HP:"}),e.jsx("input",{type:"number",value:r.triggerValue,onChange:d=>w(o,"triggerValue",parseInt(d.target.value)),className:"w-16 bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm"})]})]}),e.jsx("textarea",{placeholder:"Popis schopnosti bosse v této fázi...",value:r.description,onChange:d=>w(o,"description",d.target.value),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-zinc-400 text-xs mb-2",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Bonusové Poškození:"}),e.jsx("input",{type:"number",value:r.damageBonus,onChange:d=>w(o,"damageBonus",parseInt(d.target.value)),className:"w-20 bg-red-900/20 border border-red-800 rounded p-1 text-red-400 font-mono text-sm"})]})]},o)),e.jsx("button",{type:"button",onClick:h,className:"w-full py-3 bg-red-900/30 border border-red-600 text-red-400 font-bold uppercase rounded hover:bg-red-900/50 transition-colors",children:"+ Přidat Fázi"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-red-950/40 to-black border border-red-900 rounded-xl p-5 shadow-[0_0_30px_rgba(220,38,38,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-500 border-b border-red-900/50 pb-2",children:[e.jsx(fe,{className:"w-6 h-6"}),e.jsxs("h3",{className:"font-display font-bold uppercase tracking-widest",children:["Konfigurace ",m?"Pasti":"Nepřítele"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3 text-red-500"})," ",m?"Obtížnost":"Zdraví (HP)"]}),e.jsx("input",{type:"number",placeholder:"50",value:N("HP"),onChange:r=>s("HP",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-red-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3 text-orange-500"})," ",m?"Poškození":"Útok (ATK)"]}),e.jsx("input",{type:"number",placeholder:"10",value:N("ATK"),onChange:r=>s("ATK",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-orange-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3 text-blue-500"})," ",m?"Odolnost":"Obrana (DEF)"]}),e.jsx("input",{type:"number",placeholder:"0",value:N("DEF"),onChange:r=>s("DEF",r.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 text-xs bg-black/40 p-3 rounded border border-zinc-800/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"})," Mechanika Souboje"]}),e.jsxs("ul",{className:"text-zinc-600 space-y-1 list-disc pl-3",children:[e.jsx("li",{children:"Hráč hází kostkou na útok."}),e.jsxs("li",{children:["Poškození = Hod - ",e.jsx("strong",{children:"Obrana"}),"."]}),e.jsxs("li",{children:["Pokud Poškození ",">"," 0, odečte se od ",e.jsx("strong",{children:"HP"}),"."]})]})]}),!m&&e.jsxs("div",{className:"flex-1 border-l border-zinc-800 pl-4",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3"})," Šance na Útěk"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Závisí na vzácnosti:"}),e.jsxs("span",{className:`font-mono font-bold ${j<30?"text-red-500":"text-green-500"}`,children:[j,"%"]})]}),e.jsx("p",{className:"text-[10px] text-zinc-600 mt-1",children:"Legendární monstra se loví, před těmi se neutíká."})]})]})]})},We=({event:t,onUpdate:u,masterCatalog:l=[]})=>{var C,S,E,q,F,ae,se,re,ne,le,oe,ce,ie,de,xe,pe,be;const[m,j]=P.useState(""),[N,s]=P.useState(1),[h,w]=P.useState(""),[c,n]=P.useState(1),[r,o]=P.useState(""),[d,v]=P.useState(.8),M=(a,i="+10")=>{const g=[...t.stats||[]];g.some(I=>I.label.toUpperCase()===a.toUpperCase())||u({stats:[...g,{label:a,value:i}]})},O=(a,i,g)=>{const I=[...t.stats||[]];I[a]={...I[a],[i]:g},u({stats:I})},T=a=>{u({stats:(t.stats||[]).filter((i,g)=>g!==a)})},y=(a,i)=>{u({resourceConfig:{...t.resourceConfig||{isResourceContainer:!1,resourceName:"Kovový šrot",resourceAmount:1},[a]:i}})},b=(a,i)=>{u({craftingRecipe:{...t.craftingRecipe||{enabled:!1,requiredResources:[],craftingTimeSeconds:60},[a]:i}})},z=(a,i)=>{u({marketConfig:{...t.marketConfig||{enabled:!1,marketPrice:void 0,saleChance:0,classModifiers:[],recyclingOutput:[]},[a]:i}})},L=()=>{var i;if(!m)return;const a=((i=t.craftingRecipe)==null?void 0:i.requiredResources)||[];a.some(g=>g.resourceName===m)||(b("requiredResources",[...a,{resourceName:m,amount:N}]),s(1))},D=a=>{var g;const i=((g=t.craftingRecipe)==null?void 0:g.requiredResources)||[];b("requiredResources",i.filter((I,R)=>R!==a))},K=()=>{var i;if(!h)return;const a=((i=t.marketConfig)==null?void 0:i.recyclingOutput)||[];a.some(g=>g.resourceName===h)||(z("recyclingOutput",[...a,{resourceName:h,amount:c}]),n(1))},_=a=>{var g;const i=((g=t.marketConfig)==null?void 0:g.recyclingOutput)||[];z("recyclingOutput",i.filter((I,R)=>R!==a))},V=()=>{var i;if(!r)return;const a=((i=t.marketConfig)==null?void 0:i.classModifiers)||[];a.some(g=>g.playerClass===r)||(z("classModifiers",[...a,{playerClass:r,priceMultiplier:d}]),o(""),v(.8))},x=a=>{var g;const i=((g=t.marketConfig)==null?void 0:g.classModifiers)||[];z("classModifiers",i.filter((I,R)=>R!==a))},p=l.filter(a=>{var i;return(i=a.resourceConfig)==null?void 0:i.isResourceContainer}),f=[{label:"HP",icon:W,color:"text-red-500"},{label:"DMG",icon:Z,color:"text-orange-500"},{label:"ARMOR",icon:Q,color:"text-zinc-200"},{label:"MANA",icon:ee,color:"text-cyan-400"},{label:"PALIVO",icon:ve,color:"text-orange-500"},{label:"ZLATO",icon:U,color:"text-yellow-500"},{label:"ŠTĚSTÍ",icon:he,color:"text-purple-400"},{label:"KYSLÍK",icon:te,color:"text-cyan-400"}];return e.jsxs("div",{className:"space-y-6 bg-arc-panel p-5 border border-arc-border relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-arc-yellow border-b border-arc-border pb-3",children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-[0.2em]",children:"Konfigurace_Assetu:"})]}),e.jsx("div",{className:"bg-black border border-arc-border/50 rounded-lg overflow-hidden transition-colors hover:border-arc-yellow",children:e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:t.isConsumable,onChange:a=>u({isConsumable:a.target.checked}),className:"w-6 h-6 rounded border-arc-border bg-zinc-900 text-arc-yellow focus:ring-arc-yellow accent-arc-yellow"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[11px] font-black uppercase tracking-widest transition-colors ${t.isConsumable?"text-arc-yellow":"text-white"}`,children:"Spotřebovatelný Předmět"}),e.jsx("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Asset bude zničen po jednom použití"})]})]})}),e.jsxs("div",{className:"bg-black border border-arc-border/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-500",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Tržní Hodnota (Cena)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.price||0,onChange:a=>u({price:parseInt(a.target.value)}),className:"w-full bg-zinc-900 border border-zinc-700 p-3 text-white font-mono text-sm focus:border-yellow-500 outline-none"}),e.jsx("span",{className:"absolute right-3 top-3 text-[10px] text-zinc-500 font-bold",children:"GOLD"})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(C=t.marketConfig)!=null&&C.enabled?"bg-indigo-950/20 border-indigo-500/50":"bg-black border-arc-border/50"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((S=t.marketConfig)==null?void 0:S.enabled)||!1,onChange:a=>z("enabled",a.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-indigo-500 focus:ring-indigo-500 accent-indigo-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(E=t.marketConfig)!=null&&E.enabled?"text-indigo-400":"text-zinc-400"}`,children:[e.jsx(Re,{className:"w-3 h-3"})," Konfigurace Tržiště & Recyklace"]})})]}),((q=t.marketConfig)==null?void 0:q.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-5 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Override Tržní Ceny (Volitelné)"}),e.jsx("input",{type:"number",placeholder:"Standardní cena (zleva)",value:t.marketConfig.marketPrice||"",onChange:a=>z("marketPrice",a.target.value?parseInt(a.target.value):void 0),className:"w-full bg-black border border-indigo-500/30 p-2 text-white text-xs font-mono outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[e.jsx(Ze,{className:"w-3 h-3"})," Šance na Akci (%)"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.marketConfig.saleChance||0,onChange:a=>z("saleChance",parseInt(a.target.value)),className:"w-full h-2 bg-black rounded-lg appearance-none cursor-pointer accent-indigo-500 mb-1"}),e.jsxs("div",{className:"text-right text-[10px] font-mono text-indigo-400",children:[t.marketConfig.saleChance||0,"%"]})]})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-indigo-500/20",children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"})," Třídní Slevy / Přirážky"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:r,onChange:a=>o(a.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"-- Třída --"}),Object.values(Y).map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{value:d,onChange:a=>v(parseFloat(a.target.value)),className:"flex-1 bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none",children:[e.jsx("option",{value:.5,children:"-50% (Sleva)"}),e.jsx("option",{value:.8,children:"-20% (Sleva)"}),e.jsx("option",{value:1.2,children:"+20% (Dražší)"}),e.jsx("option",{value:1.5,children:"+50% (Dražší)"})]}),e.jsx("button",{type:"button",onClick:V,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-2 rounded",children:e.jsx(G,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(F=t.marketConfig.classModifiers)==null?void 0:F.map((a,i)=>e.jsxs("div",{className:"flex justify-between items-center bg-indigo-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-indigo-500/10",children:[e.jsx("span",{children:a.playerClass}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a.priceMultiplier<1?"text-green-400":"text-red-400",children:a.priceMultiplier<1?`SLEVA ${Math.round((1-a.priceMultiplier)*100)}%`:`PŘIRÁŽKA ${Math.round((a.priceMultiplier-1)*100)}%`}),e.jsx("button",{onClick:()=>x(i),className:"text-zinc-500 hover:text-white",children:e.jsx($,{className:"w-3 h-3"})})]})]},i))})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-orange-500/20",children:[e.jsxs("label",{className:"text-[8px] text-orange-400 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"})," Výstup Recyklace"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:h,onChange:a=>w(a.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-orange-500",children:[e.jsx("option",{value:"",children:"-- Surovina --"}),p.map(a=>{var i,g;return e.jsx("option",{value:((i=a.resourceConfig)==null?void 0:i.resourceName)||a.title,children:((g=a.resourceConfig)==null?void 0:g.resourceName)||a.title},a.id)})]}),e.jsx("input",{type:"number",value:c,onChange:a=>n(parseInt(a.target.value)),className:"w-12 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-1.5 rounded outline-none focus:border-orange-500"}),e.jsx("button",{type:"button",onClick:K,className:"bg-orange-600 hover:bg-orange-500 text-white px-2 rounded",children:e.jsx(G,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(ae=t.marketConfig.recyclingOutput)==null?void 0:ae.map((a,i)=>e.jsxs("div",{className:"flex justify-between items-center bg-orange-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-orange-500/10",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3 text-orange-500"})," ",a.resourceName]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono font-bold text-white",children:["x",a.amount]}),e.jsx("button",{onClick:()=>_(i),className:"text-zinc-500 hover:text-white",children:e.jsx($,{className:"w-3 h-3"})})]})]},i))})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(se=t.resourceConfig)!=null&&se.isResourceContainer?"bg-orange-950/20 border-orange-500/50":"bg-black border-arc-border/50"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((re=t.resourceConfig)==null?void 0:re.isResourceContainer)||!1,onChange:a=>y("isResourceContainer",a.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-orange-500 focus:ring-orange-500 accent-orange-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(ne=t.resourceConfig)!=null&&ne.isResourceContainer?"text-orange-500":"text-zinc-400"}`,children:[e.jsx(ue,{className:"w-3 h-3"})," Je to Surovina?"]})})]}),((le=t.resourceConfig)==null?void 0:le.isResourceContainer)&&e.jsxs("div",{className:"p-4 pt-0 space-y-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-[2fr_1fr] gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Název Suroviny (ID pro crafting)"}),e.jsx("input",{type:"text",value:t.resourceConfig.resourceName||"",onChange:a=>y("resourceName",a.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500",placeholder:"např. Kovový šrot"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Množství v balíku"}),e.jsx("input",{type:"number",value:t.resourceConfig.resourceAmount||1,onChange:a=>y("resourceAmount",parseInt(a.target.value)),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-orange-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Vlastní nápis v Batohu"}),e.jsx("input",{type:"text",value:t.resourceConfig.customLabel||"",onChange:a=>y("customLabel",a.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500",placeholder:"Výchozí: Surovina k Těžbě"})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(oe=t.craftingRecipe)!=null&&oe.enabled?"bg-cyan-950/20 border-cyan-500/50":"bg-black border-arc-border/50"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ce=t.craftingRecipe)==null?void 0:ce.enabled)||!1,onChange:a=>b("enabled",a.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-cyan-500 focus:ring-cyan-500 accent-cyan-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(ie=t.craftingRecipe)!=null&&ie.enabled?"text-cyan-500":"text-zinc-400"}`,children:[e.jsx(Ue,{className:"w-3 h-3"})," Povolit Výrobu (Recept)"]})})]}),((de=t.craftingRecipe)==null?void 0:de.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-4 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-cyan-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyan-400",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Doba výroby (sekundy)"})]}),e.jsx("input",{type:"number",value:t.craftingRecipe.craftingTimeSeconds||60,onChange:a=>b("craftingTimeSeconds",parseInt(a.target.value)),className:"w-20 bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-cyan-500"})]}),e.jsxs("div",{className:"p-3 bg-zinc-900/50 rounded border border-zinc-700",children:[e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest block mb-2",children:"Přidat Ingredienci"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:m,onChange:a=>j(a.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-2 rounded outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"-- Vyberte Surovinu --"}),p.map(a=>{var i,g;return e.jsxs("option",{value:((i=a.resourceConfig)==null?void 0:i.resourceName)||a.title,children:[((g=a.resourceConfig)==null?void 0:g.resourceName)||a.title," (",a.id,")"]},a.id)})]}),e.jsx("input",{type:"number",placeholder:"Ks",value:N,onChange:a=>s(parseInt(a.target.value)),className:"w-14 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-2 rounded outline-none focus:border-cyan-500"}),e.jsx("button",{type:"button",onClick:L,className:"bg-cyan-600 hover:bg-cyan-500 text-white px-3 rounded flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] text-cyan-400/70 uppercase font-bold tracking-widest block",children:"Seznam Požadovaných Surovin:"}),((xe=t.craftingRecipe.requiredResources)==null?void 0:xe.length)===0&&e.jsx("p",{className:"text-[10px] text-zinc-600 italic text-center py-2",children:"Žádné suroviny. Předmět půjde vyrobit zdarma."}),(pe=t.craftingRecipe.requiredResources)==null?void 0:pe.map((a,i)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-cyan-500/20 rounded hover:border-cyan-500/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Surovina"}),e.jsx("span",{className:"text-xs text-white font-mono",children:a.resourceName})]}),e.jsxs("div",{className:"px-3 border-l border-zinc-800",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Množství"}),e.jsxs("span",{className:"text-xs text-cyan-400 font-mono font-bold",children:["x",a.amount]})]}),e.jsx("button",{type:"button",onClick:()=>D(i),className:"text-red-500 hover:text-red-400 p-2 ml-2",children:e.jsx(B,{className:"w-4 h-4"})})]},i))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest",children:"Aktivní_stats na kartě:"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(a=>e.jsxs("button",{type:"button",onClick:()=>M(a.label),className:"flex items-center gap-1.5 px-3 py-1.5 border border-arc-border hover:border-arc-yellow transition-all active:scale-95 bg-black",children:[e.jsx(a.icon,{className:`w-3 h-3 ${a.color}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-200",children:a.label})]},a.label))}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto no-scrollbar pr-1",children:(be=t.stats)==null?void 0:be.map((a,i)=>{const g=a.label.toUpperCase(),I=f.find(R=>g.includes(R.label)||R.label==="ARMOR"&&g.includes("ARMOR")||R.label==="KYSLÍK"&&g.includes("OXYGEN")||R.label==="HP"&&(g.includes("HEALTH")||g.includes("ŽIVOT"))||R.label==="PALIVO"&&(g.includes("FUEL")||g.includes("PALIVO")));return e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-arc-border animate-in slide-in-from-left-2 duration-200",children:[e.jsx("div",{className:"p-2 border border-zinc-800 bg-arc-panel",children:I?e.jsx(I.icon,{className:`w-4 h-4 ${I.color}`}):e.jsx(he,{className:"w-4 h-4 text-zinc-400"})}),e.jsx("input",{value:a.label,onChange:R=>O(i,"label",R.target.value),className:"w-24 bg-transparent border-none p-1 text-[10px] font-bold text-white placeholder-zinc-700 outline-none uppercase font-mono",placeholder:"TAG"}),e.jsx("input",{value:a.value,onChange:R=>O(i,"value",R.target.value),className:"flex-1 bg-arc-panel border border-zinc-800 px-3 py-2 text-xs text-white font-mono placeholder-zinc-700 focus:border-arc-yellow outline-none",placeholder:"HODNOTA (+/-)"}),e.jsx("button",{type:"button",onClick:()=>T(i),className:"p-2 text-zinc-400 hover:text-arc-red transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]},i)})})]})]})},et=({event:t,onUpdate:u})=>{var m,j,N;const l=(s,h)=>{u({trapConfig:{...t.trapConfig||{difficulty:10,damage:20,disarmClass:Y.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!"},[s]:h}})};return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-arc-red/30 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-arc-red border-b border-arc-red/20 pb-2",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Nástraha_konfigurace:"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Kolik musí hodit hráč kostkou??"}),e.jsx("input",{type:"number",value:((m=t.trapConfig)==null?void 0:m.difficulty)??10,onChange:s=>l("difficulty",parseInt(s.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"DMG po prohře:"}),e.jsx("input",{type:"number",value:((j=t.trapConfig)==null?void 0:j.damage)??20,onChange:s=>l("damage",parseInt(s.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-arc-red font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Pro jakou postavu ??"}),e.jsxs("select",{value:((N=t.trapConfig)==null?void 0:N.disarmClass)??"ANY",onChange:s=>l("disarmClass",s.target.value),className:"w-full bg-black border border-arc-border p-3 text-white text-xs font-mono uppercase focus:ring-1 focus:ring-arc-yellow outline-none",children:[e.jsx("option",{value:"ANY",className:"bg-arc-panel text-white",children:"UNSPECIFIED"}),Object.values(Y).map(s=>e.jsx("option",{value:s,className:"bg-arc-panel text-white",children:s},s))]})]})]})},tt=({event:t,onUpdate:u})=>{var m,j,N;const l=(s,h)=>{u({enemyLoot:{...t.enemyLoot||{goldReward:20,xpReward:10,dropItemChance:0},[s]:h}})};return e.jsxs("div",{className:"mt-4 bg-arc-panel p-5 border border-arc-yellow/20 text-white",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-arc-yellow uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Odměna_po_boji:"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Zlato"}),e.jsx("input",{type:"number",value:((m=t.enemyLoot)==null?void 0:m.goldReward)??0,onChange:s=>l("goldReward",parseInt(s.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Exp_Data"}),e.jsx("input",{type:"number",value:((j=t.enemyLoot)==null?void 0:j.xpReward)??0,onChange:s=>l("xpReward",parseInt(s.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase",children:"Drop_%"}),e.jsx("input",{type:"number",value:((N=t.enemyLoot)==null?void 0:N.dropItemChance)??0,onChange:s=>l("dropItemChance",parseInt(s.target.value)),className:"w-full bg-black border border-arc-border p-2 text-white text-xs text-center font-mono"})]})]})]})},at=({event:t,onUpdate:u})=>{var s,h,w,c;const l=n=>{u({timeVariant:{...t.timeVariant||{enabled:!1,nightStats:[]},...n}})},m=()=>{var r;const n=[...((r=t.timeVariant)==null?void 0:r.nightStats)||[]];n.push({label:"NIGHT_MOD",value:"+5"}),l({nightStats:n})},j=(n,r,o)=>{var v;const d=[...((v=t.timeVariant)==null?void 0:v.nightStats)||[]];d[n]&&(d[n]={...d[n],[r]:o},l({nightStats:d}))},N=n=>{var o;const r=(((o=t.timeVariant)==null?void 0:o.nightStats)||[]).filter((d,v)=>v!==n);l({nightStats:r})};return e.jsxs("div",{className:`mt-6 p-5 border rounded-xl transition-all ${(s=t.timeVariant)!=null&&s.enabled?"bg-indigo-950/30 border-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.2)]":"bg-white/5 border-white/10 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Noční_Protokol_v2.0"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((h=t.timeVariant)==null?void 0:h.enabled)||!1,onChange:n=>l({enabled:n.target.checked})}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-500"})]})]}),((w=t.timeVariant)==null?void 0:w.enabled)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Název karty v noci (Override):"}),e.jsx("input",{value:t.timeVariant.nightTitle||"",onChange:n=>l({nightTitle:n.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-white text-sm outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis karty v noci (Override):"}),e.jsx("textarea",{value:t.timeVariant.nightDescription||"",onChange:n=>l({nightDescription:n.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-zinc-300 text-xs font-mono outline-none focus:border-indigo-500",rows:2})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest",children:"Noční_Statistiky (Nahrazují původní):"}),e.jsx("button",{type:"button",onClick:m,className:"text-[8px] bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded border border-indigo-500/30 font-bold uppercase",children:"+ PŘIDAT NOČNÍ STAT"})]}),(c=t.timeVariant.nightStats)==null?void 0:c.map((n,r)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black/40 p-2 border border-indigo-900/30",children:[e.jsx("input",{value:n.label,onChange:o=>j(r,"label",o.target.value),className:"w-20 bg-transparent border-none p-1 text-[9px] font-bold text-indigo-300 uppercase font-mono",placeholder:"TAG"}),e.jsx("input",{value:n.value,onChange:o=>j(r,"value",o.target.value),className:"flex-1 bg-indigo-950/40 border border-indigo-900/50 px-2 py-1 text-xs text-white font-mono focus:border-indigo-400 outline-none",placeholder:"HODNOTA"}),e.jsx("button",{type:"button",onClick:()=>N(r),className:"text-red-500 p-1 hover:text-red-400",children:e.jsx(B,{className:"w-3.5 h-3.5"})})]},r))]})]})]})},st=({event:t,onUpdate:u})=>{var m,j,N,s;const l=(h,w)=>{u({stationConfig:{...t.stationConfig||{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},[h]:w}})};return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-cyan-500/30 text-white shadow-[0_0_20px_rgba(34,211,238,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-cyan-400 border-b border-cyan-500/20 pb-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Konfigurace Stanice:"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(Oe,{className:"w-3 h-3"})," Uvítací Zpráva:"]}),e.jsx("input",{type:"text",value:((m=t.stationConfig)==null?void 0:m.welcomeMessage)??"Vítejte na palubě.",onChange:h=>l("welcomeMessage",h.target.value),className:"w-full bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono",placeholder:"Systémy online..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(ve,{className:"w-3 h-3 text-orange-500"})," Palivo (Darování)"]}),e.jsx("input",{type:"number",value:((j=t.stationConfig)==null?void 0:j.fuelReward)??50,onChange:h=>l("fuelReward",parseInt(h.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(Q,{className:"w-3 h-3 text-slate-300"})," Oprava Lodi (+HP)"]}),e.jsx("input",{type:"number",value:((N=t.stationConfig)==null?void 0:N.repairAmount)??30,onChange:h=>l("repairAmount",parseInt(h.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-cyan-500/20 p-3 rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-cyan-200"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-zinc-300",children:"Doplnit Kyslík (100%)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((s=t.stationConfig)==null?void 0:s.refillO2)??!0,onChange:h=>l("refillO2",h.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-cyan-500"})]})]})]})},rt=({event:t,onUpdate:u})=>{var w,c,n,r,o,d,v,M,O,T,y,b,z,L,D,K,_,V;const l=(x,p)=>{u({planetConfig:{...t.planetConfig||{realName:"Nová Planeta",unknownName:"Neznámý Objekt",planetType:"HABITABLE",scanCost:10,scanProgressPerAction:20,layers:[],finalReward:{gold:50,xp:100}},[x]:p}})},m=(x,p)=>{var C;const f=((C=t.planetConfig)==null?void 0:C.finalReward)||{gold:0,xp:0};l("finalReward",{...f,[x]:p})},j=(x,p)=>{var C;const f=((C=t.planetConfig)==null?void 0:C.passiveReward)||{};l("passiveReward",{...f,[x]:p})},N=()=>{var f;const x=[...((f=t.planetConfig)==null?void 0:f.layers)||[]],p=x.length===0?33:x.length===1?66:100;x.push({requiredProgress:p,logText:"Nové log..."}),l("layers",x)},s=(x,p,f)=>{var S;const C=[...((S=t.planetConfig)==null?void 0:S.layers)||[]];C[x]={...C[x],[p]:f},l("layers",C)},h=x=>{var f;const p=(((f=t.planetConfig)==null?void 0:f.layers)||[]).filter((C,S)=>S!==x);l("layers",p)};return e.jsxs("div",{className:"bg-gradient-to-br from-indigo-950/40 to-black border border-indigo-500/50 rounded-xl p-5 shadow-[0_0_30px_rgba(99,102,241,0.15)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-indigo-400 border-b border-indigo-900/50 pb-2",children:[e.jsx(ge,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Konfigurace Planety"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest block mb-1",children:"Tajné Jméno (Odhalení 100%)"}),e.jsx("input",{value:((w=t.planetConfig)==null?void 0:w.realName)||"",onChange:x=>l("realName",x.target.value),placeholder:"Např. Kepler-186f",className:"w-full bg-black border border-indigo-900 p-2 text-white font-mono text-sm focus:border-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest block mb-1",children:"Krycí Jméno (Před skenováním)"}),e.jsx("input",{value:((c=t.planetConfig)==null?void 0:c.unknownName)||"",onChange:x=>l("unknownName",x.target.value),placeholder:"Např. Anomálie #832",className:"w-full bg-black border border-indigo-900 p-2 text-white font-mono text-sm focus:border-indigo-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold block mb-1",children:"Typ Planety"}),e.jsxs("select",{value:((n=t.planetConfig)==null?void 0:n.planetType)||"HABITABLE",onChange:x=>l("planetType",x.target.value),className:"w-full bg-black border border-indigo-900 p-2 text-white text-xs",children:[e.jsx("option",{value:"HABITABLE",children:"Obyvatelná (Zelená)"}),e.jsx("option",{value:"BARREN",children:"Pustá (Šedá)"}),e.jsx("option",{value:"ANOMALY",children:"Anomálie (Fialová)"}),e.jsx("option",{value:"COLONY",children:"Kolonie (Oranžová)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold block mb-1",children:"Cena Skenu (Palivo)"}),e.jsx("input",{type:"number",value:((r=t.planetConfig)==null?void 0:r.scanCost)||10,onChange:x=>l("scanCost",parseInt(x.target.value)),className:"w-full bg-black border border-indigo-900 p-2 text-white text-xs text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold block mb-1",children:"% za Sken"}),e.jsx("input",{type:"number",value:((o=t.planetConfig)==null?void 0:o.scanProgressPerAction)||20,onChange:x=>l("scanProgressPerAction",parseInt(x.target.value)),className:"w-full bg-black border border-indigo-900 p-2 text-white text-xs text-center"})]})]}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-indigo-900/30 pb-1",children:[e.jsxs("span",{className:"text-[10px] font-bold text-indigo-400 uppercase flex items-center gap-2",children:[e.jsx(_e,{className:"w-3 h-3"})," Fáze Odhalování (Vrstvy)"]}),e.jsx("button",{onClick:N,className:"text-[9px] bg-indigo-900/50 text-indigo-300 px-2 py-1 rounded hover:bg-indigo-800 uppercase font-bold",children:"+ Přidat Fázi"})]}),(d=t.planetConfig)==null?void 0:d.layers.map((x,p)=>e.jsxs("div",{className:"bg-black/40 border border-indigo-900/50 p-3 rounded flex gap-3 items-start",children:[e.jsxs("div",{className:"w-16",children:[e.jsx("label",{className:"text-[8px] text-zinc-500 uppercase block",children:"Kdy (%)"}),e.jsx("input",{type:"number",value:x.requiredProgress,onChange:f=>s(p,"requiredProgress",parseInt(f.target.value)),className:"w-full bg-black border border-zinc-800 p-1 text-white text-xs text-center"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[8px] text-zinc-500 uppercase block",children:"Palubní Log (Příběh)"}),e.jsx("textarea",{value:x.logText,onChange:f=>s(p,"logText",f.target.value),className:"w-full bg-black border border-zinc-800 p-1 text-zinc-300 text-xs font-mono",rows:2})]}),e.jsx("button",{onClick:()=>h(p),className:"text-red-500 hover:text-red-400 mt-4",children:e.jsx(B,{className:"w-3 h-3"})})]},p))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-700/30 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-500",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Jednorázová Odměna (100%)"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-zinc-400 font-bold",children:"Gold:"}),e.jsx("input",{type:"number",value:((M=(v=t.planetConfig)==null?void 0:v.finalReward)==null?void 0:M.gold)||0,onChange:x=>m("gold",parseInt(x.target.value)),className:"w-16 bg-black border border-yellow-900/50 p-1 text-yellow-500 font-mono text-sm text-center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-zinc-400 font-bold",children:"XP:"}),e.jsx("input",{type:"number",value:((T=(O=t.planetConfig)==null?void 0:O.finalReward)==null?void 0:T.xp)||0,onChange:x=>m("xp",parseInt(x.target.value)),className:"w-16 bg-black border border-yellow-900/50 p-1 text-purple-400 font-mono text-sm text-center"})]})]})]}),e.jsxs("div",{className:"bg-green-900/10 border border-green-700/30 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-500",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Pasivní Příjem (Každé Kolo)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-black/30 p-1 rounded",children:[e.jsx(U,{className:"w-3 h-3 text-yellow-500"}),e.jsx("input",{type:"number",placeholder:"Gold/Turn",value:((b=(y=t.planetConfig)==null?void 0:y.passiveReward)==null?void 0:b.goldPerTurn)||0,onChange:x=>j("goldPerTurn",parseInt(x.target.value)),className:"w-12 bg-transparent text-white text-xs font-mono text-center outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/30 p-1 rounded",children:[e.jsx(He,{className:"w-3 h-3 text-purple-400"}),e.jsx("input",{type:"number",placeholder:"XP/Turn",value:((L=(z=t.planetConfig)==null?void 0:z.passiveReward)==null?void 0:L.xpPerTurn)||0,onChange:x=>j("xpPerTurn",parseInt(x.target.value)),className:"w-12 bg-transparent text-white text-xs font-mono text-center outline-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/30 p-1 rounded border border-green-500/10",children:[e.jsx(je,{className:"w-3 h-3 text-orange-400"}),e.jsx("input",{type:"text",placeholder:"ID Suroviny (volitelné)",value:((K=(D=t.planetConfig)==null?void 0:D.passiveReward)==null?void 0:K.resourceId)||"",onChange:x=>j("resourceId",x.target.value),className:"flex-1 bg-transparent text-white text-[10px] font-mono outline-none"}),e.jsx("input",{type:"number",placeholder:"Ks",value:((V=(_=t.planetConfig)==null?void 0:_.passiveReward)==null?void 0:V.resourceAmount)||0,onChange:x=>j("resourceAmount",parseInt(x.target.value)),className:"w-8 bg-transparent text-white text-xs text-center font-mono outline-none"})]})]})]})]})]})},H={id:"",title:"",description:"",type:k.ITEM,rarity:"Common",flavorText:"",stats:[],isShareable:!0,isConsumable:!1,canBeSaved:!0,price:0,trapConfig:{difficulty:10,damage:20,disarmClass:Y.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!"},enemyLoot:{goldReward:20,xpReward:10,dropItemChance:0},timeVariant:{enabled:!1,nightStats:[]},stationConfig:{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},resourceConfig:{isResourceContainer:!1,resourceName:"Surovina",resourceAmount:1,customLabel:"Surovina k Těžbě"},craftingRecipe:{enabled:!1,requiredResources:[],craftingTimeSeconds:60},planetConfig:{realName:"Planeta X",unknownName:"Neznámý Objekt",planetType:"HABITABLE",scanCost:10,scanProgressPerAction:25,layers:[],finalReward:{gold:50,xp:100}}},it=({onSaveCard:t,userEmail:u,initialData:l,onClearData:m,onDelete:j,masterCatalog:N=[]})=>{const[s,h]=P.useState(H),[w,c]=P.useState({message:"",type:null}),[n,r]=P.useState(!1),[o,d]=P.useState(!1),[v,M]=P.useState(!1),[O,T]=P.useState(!1);P.useEffect(()=>{var p,f,C,S,E,q,F;l?(h({...H,...l,price:l.price!==void 0&&l.price!==null?l.price:H.price,resourceConfig:{isResourceContainer:((p=l.resourceConfig)==null?void 0:p.isResourceContainer)??!1,resourceName:((f=l.resourceConfig)==null?void 0:f.resourceName)??"Surovina",resourceAmount:((C=l.resourceConfig)==null?void 0:C.resourceAmount)??1,customLabel:(S=l.resourceConfig)==null?void 0:S.customLabel},craftingRecipe:{enabled:((E=l.craftingRecipe)==null?void 0:E.enabled)??!1,requiredResources:((q=l.craftingRecipe)==null?void 0:q.requiredResources)??[],craftingTimeSeconds:((F=l.craftingRecipe)==null?void 0:F.craftingTimeSeconds)??60},planetConfig:l.planetConfig||H.planetConfig}),r(!0)):(h(H),r(!1))},[l]);const y=p=>h(f=>({...f,...p})),b=p=>y({[p.target.name]:p.target.value}),z=()=>{!j||!s.id||(X("error"),Ve(50),T(!0))},L=()=>{j&&s.id&&(j(s.id),T(!1))},D=async()=>{M(!0);try{await De(),c({message:"Záloha stažena.",type:"success"}),X("success")}catch{c({message:"Chyba zálohování.",type:"error"}),X("error")}finally{M(!1)}},_=((p,f)=>p?`https://api.qrserver.com/v1/create-qr-code/?size=1000x1000&color=${{[k.BOSS]:"ff3b30",[k.TRAP]:"f5c518",[k.ENCOUNTER]:"ff3b30",[k.DILEMA]:"9333ea",[k.MERCHANT]:"f5c518",[k.ITEM]:"007aff",[k.SPACE_STATION]:"22d3ee",[k.PLANET]:"4ade80"}[f]||"ffffff"}&bgcolor=0a0a0c&margin=20&data=${encodeURIComponent(p)}`:"")(s.id,s.type),V=async()=>{if(!_||!s.id){c({message:"Identifikátor chybí.",type:"error"});return}d(!0);try{const f=await(await fetch(_)).blob(),C=window.URL.createObjectURL(f),S=document.createElement("a");S.href=C;const E=s.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"unnamed_asset";S.download=`nexus_${s.type.toLowerCase()}_${E}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(C),c({message:"Identifikátor stažen do lokální cache.",type:"success"})}catch{c({message:"Chyba protokolu stahování.",type:"error"})}finally{d(!1)}},x=async p=>{if(p.preventDefault(),!u||!s.id){c({message:"Zadejte ID assetu.",type:"error"});return}try{const f={...s};u==="zbynekbal97@gmail.com"&&(f.qrCodeUrl=_),await t(f),c({message:"Data synchronizována se serverem.",type:"success"}),n||h(H)}catch(f){c({message:f.message,type:"error"})}};return e.jsxs("div",{className:"h-full overflow-y-auto p-6 pb-24 no-scrollbar bg-arc-bg text-white relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 sticky top-0 bg-arc-bg/95 backdrop-blur z-20 pb-4 border-b border-arc-border",children:[e.jsxs("h1",{className:"text-2xl font-bold uppercase tracking-tighter text-white",children:[n?"Editovat":"FABRIKACE"," ",e.jsx("span",{className:"text-arc-yellow",children:"Assetu"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:D,className:"p-2 bg-black border border-blue-500 text-blue-500 hover:bg-blue-500/10 active:scale-95 transition-all",title:"Stáhnout Zálohu DB",children:v?e.jsx(J,{className:"w-5 h-5 animate-spin"}):e.jsx(Ge,{className:"w-5 h-5"})}),n&&j&&e.jsx("button",{type:"button",onClick:z,className:"p-2 bg-black border border-red-900/50 text-red-500 hover:bg-red-900/20 active:scale-95 transition-all",children:e.jsx(B,{className:"w-5 h-5"})}),n&&e.jsx("button",{type:"button",onClick:m,className:"p-2 bg-black border border-arc-border text-arc-yellow hover:bg-arc-yellow/10 active:scale-95 transition-all",children:e.jsx(J,{className:"w-5 h-5"})})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-8",children:[e.jsxs("div",{className:"bg-arc-panel p-6 border border-arc-border space-y-6 relative bracket-tl bracket-tr",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"ID_KARTY (jedinečné!):"}),e.jsx("input",{name:"id",value:s.id,onChange:b,placeholder:"NXS-001",className:"w-full bg-black border border-arc-border p-3 text-white font-mono uppercase focus:border-arc-yellow outline-none text-sm",required:!0,readOnly:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"TYP_karty:"}),e.jsx("select",{name:"type",value:s.type,onChange:b,className:"w-full bg-black border border-arc-border p-3 text-white font-mono uppercase focus:border-arc-yellow outline-none text-sm",children:Object.values(k).map(p=>e.jsx("option",{value:p,className:"bg-arc-panel text-white",children:p},p))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Název_karty:"}),e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2",children:[e.jsx("input",{name:"title",value:s.title,onChange:b,placeholder:"NÁZEV ASSETU",className:"bg-black border border-arc-border p-3 text-white font-bold uppercase focus:border-arc-yellow outline-none text-sm",required:!0}),e.jsx("select",{name:"rarity",value:s.rarity,onChange:b,className:"bg-black border border-arc-border p-3 text-[10px] text-zinc-200 font-mono uppercase outline-none",children:["Common","Rare","Epic","Legendary"].map(p=>e.jsx("option",{value:p,className:"bg-arc-panel text-white",children:p},p))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis_karty:"}),e.jsx("textarea",{name:"description",value:s.description,onChange:b,placeholder:"Analýza objektu...",rows:3,className:"w-full bg-black border border-arc-border p-3 text-zinc-100 text-xs font-mono focus:border-arc-yellow outline-none",required:!0})]})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.type===k.ITEM&&e.jsx(We,{event:s,onUpdate:y,masterCatalog:N}),s.type===k.TRAP&&e.jsx(et,{event:s,onUpdate:y}),(s.type===k.ENCOUNTER||s.type===k.BOSS)&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{event:s,onUpdate:y}),s.type===k.ENCOUNTER&&e.jsx(tt,{event:s,onUpdate:y})]}),s.type===k.MERCHANT&&e.jsx(Ye,{event:s,onUpdate:y}),s.type===k.SPACE_STATION&&e.jsx(st,{event:s,onUpdate:y}),s.type===k.PLANET&&e.jsx(rt,{event:s,onUpdate:y}),s.type===k.DILEMA&&e.jsx(Xe,{event:s,onUpdate:y}),e.jsx(at,{event:s,onUpdate:y})]}),e.jsxs("div",{className:"flex items-center gap-6 bg-black p-6 border border-arc-border relative bracket-bl bracket-br",children:[e.jsx("div",{className:"bg-white p-2 border border-zinc-800 shrink-0",children:s.id?e.jsx("img",{src:_,alt:"QR",className:"w-24 h-24 object-contain invert"}):e.jsx("div",{className:"w-24 h-24 flex items-center justify-center bg-zinc-900 border border-zinc-800",children:e.jsx(Fe,{className:"w-10 h-10 text-zinc-700"})})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.3em] mb-1",children:"QR kod karty!:"}),e.jsx("p",{className:"text-[10px] text-zinc-200 font-mono truncate max-w-[120px]",children:s.id||"WAITING_FOR_ID"})]}),e.jsxs("button",{type:"button",onClick:V,disabled:!s.id||o,className:`w-full py-3 px-4 text-[10px] uppercase font-bold flex items-center justify-center gap-2 border-2 transition-all ${s.id?"text-arc-yellow border-arc-yellow hover:bg-arc-yellow hover:text-black":"text-zinc-700 border-zinc-800 cursor-not-allowed"}`,children:[o?e.jsx(J,{className:"w-3 h-3 animate-spin"}):e.jsx(Ke,{className:"w-3 h-3"}),o?"Stahování...":"Uložit_PNG_Kód"]})]})]}),w.message&&e.jsxs("div",{className:`p-4 border font-mono text-[10px] uppercase tracking-widest text-center animate-pulse ${w.type==="success"?"text-arc-yellow border-arc-yellow/30 bg-arc-yellow/5":"text-arc-red border-arc-red/30 bg-arc-red/5"}`,children:[">"," ",w.message]}),e.jsxs("button",{type:"submit",className:"w-full py-6 bg-signal-amber border-2 border-signal-amber/50 text-black font-black uppercase text-sm tracking-[0.4em] hover:bg-white hover:text-black transition-all shadow-[0_0_30px_rgba(255,157,0,0.3)] rounded-xl flex items-center justify-center gap-3",children:[e.jsx(Qe,{className:"w-5 h-5"}),n?"Synchronizovat_Změny":"Nahrát kartu do databáze!"]})]}),e.jsx(Le,{children:O&&e.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-sm flex items-center justify-center p-6",children:e.jsxs(me.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-black border-2 border-red-600 w-full max-w-xs shadow-[0_0_60px_rgba(220,38,38,0.4)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-red-600 animate-pulse"}),e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-red-600/10 rounded-full border border-red-600/50",children:e.jsx(Ee,{className:"w-12 h-12 text-red-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-600 uppercase tracking-tighter",children:"Destrukce Dat"}),e.jsx("p",{className:"text-[10px] text-red-600/60 font-mono mt-1 font-bold tracking-widest",children:"PROCES JE NEVRATNÝ"})]}),e.jsxs("p",{className:"text-xs text-zinc-300 font-bold leading-relaxed",children:["Opravdu chcete trvale vymazat asset ",e.jsx("span",{className:"text-white font-mono bg-white/10 px-1",children:s.id})," z databáze?"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"py-3 bg-zinc-900 text-zinc-400 font-bold uppercase text-[10px] tracking-widest hover:bg-zinc-800 transition-colors border border-zinc-800",children:"Zrušit"}),e.jsx("button",{onClick:L,className:"py-3 bg-red-600 text-black font-black uppercase text-[10px] tracking-widest hover:bg-red-500 transition-colors shadow-lg animate-pulse",children:"Smazat"})]})]})]})})})]})};export{it as default};
