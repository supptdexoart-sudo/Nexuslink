import{r as f,j as e,at as K,D as J,ax as R,b as X,m as v,ay as q,a4 as P,_ as C,ak as W,az as ee,aA as ae,aB as se,L as te,aC as re,A as ne,aD as ce,G as le,a7 as ie,O as z,a8 as oe,a6 as de,X as xe,Z as pe}from"./vendor-Dgu-9KXE.js";import{G as o,p as N,v as O}from"./index-DaMuFrk8.js";import"html5-qrcode";import"./utils-BOwlEK-f.js";const I=(b,p)=>{if(p===o.BOSS)return{border:"border-signal-hazard shadow-[0_0_15px_rgba(255,60,60,0.3)]",text:"text-signal-hazard",label:"BOSS_LEVEL"};if(p===o.SPACE_STATION)return{border:"border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",text:"text-cyan-400",label:"ORBITÁLNÍ"};if(p===o.PLANET)return{border:"border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]",text:"text-indigo-400",label:"NAVIGAČNÍ DATA"};switch((b||"Common").toLowerCase()){case"legendary":return{border:"border-signal-amber shadow-[0_0_15px_rgba(255,157,0,0.4)]",text:"text-signal-amber",label:"LEGENDÁRNÍ"};case"epic":return{border:"border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.3)]",text:"text-purple-400",label:"EPICKÉ"};case"rare":return{border:"border-signal-cyan shadow-[0_0_10px_rgba(0,242,255,0.2)]",text:"text-signal-cyan",label:"VZÁCNÉ"};default:return{border:"border-white/20",text:"text-white/40",label:"BĚŽNÉ"}}},L=(b,p)=>{if(p)return e.jsx(P,{className:"w-4 h-4"});switch(b){case o.BOSS:return e.jsx(de,{className:"w-4 h-4"});case o.ITEM:return e.jsx(C,{className:"w-4 h-4"});case o.MERCHANT:return e.jsx(oe,{className:"w-4 h-4"});case o.TRAP:return e.jsx(z,{className:"w-4 h-4"});case o.ENCOUNTER:return e.jsx(z,{className:"w-4 h-4"});case o.SPACE_STATION:return e.jsx(ie,{className:"w-4 h-4"});case o.PLANET:return e.jsx(le,{className:"w-4 h-4"});default:return e.jsx(ce,{className:"w-4 h-4"})}},ue=({inventory:b,loadingInventory:p,isRefreshing:w,playerClass:g,onRefresh:V,onItemClick:B,isTestMode:k,isNight:M,getAdjustedItem:$})=>{const[h,D]=f.useState("ALL"),[j,F]=f.useState("DEFAULT"),[u,Z]=f.useState(!1),[x,m]=f.useState([]),H=s=>{if(u){N("click"),O(10),x.some(i=>i.id===s.id)?m(i=>i.filter(c=>c.id!==s.id)):x.length<2&&m(i=>[...i,s]);return}N("click"),B(s)},U=()=>{Z(!u),m([]),N(u?"click":"open"),O(20)},_=f.useMemo(()=>{const s=new Map;b.map(t=>$(t,M,g)).forEach(t=>{var l;const a=!!((l=t.resourceConfig)!=null&&l.isResourceContainer),r=a?`RES-${t.resourceConfig.resourceName}`:`ITEM-${t.title}-${t.type}-${t.rarity}`;if(s.has(r)){const n=s.get(r);a?n.resourceConfig.resourceAmount+=t.resourceConfig.resourceAmount:n._stackQty+=1}else{const n={...t,_stackQty:1,_virtualStack:!0,resourceConfig:t.resourceConfig?{...t.resourceConfig}:void 0};s.set(r,n)}});let c=Array.from(s.values());if(h==="RESOURCES")c=c.filter(t=>{var a;return(a=t.resourceConfig)==null?void 0:a.isResourceContainer});else if(h==="ITEMS")c=c.filter(t=>{var a;return(t.type===o.ITEM||t.type==="PŘEDMĚT")&&!((a=t.resourceConfig)!=null&&a.isResourceContainer)});else if(h==="OTHERS"){const t=[o.ENCOUNTER,o.TRAP,o.DILEMA,o.BOSS,o.SPACE_STATION,o.PLANET];c=c.filter(a=>t.includes(a.type))}if(j==="RARITY"){const t={legendary:3,epic:2,rare:1,common:0};c.sort((a,r)=>{const l=(a.rarity||"Common").toLowerCase(),n=(r.rarity||"Common").toLowerCase();return(t[n]||0)-(t[l]||0)})}else j==="SPECIALIZATION"&&g?c.sort((t,a)=>{const r=t.classVariants&&t.classVariants[g]?1:0;return(a.classVariants&&a.classVariants[g]?1:0)-r}):(c.sort((t,a)=>{var n,d;const r=(n=t.resourceConfig)!=null&&n.isResourceContainer?1:0,l=(d=a.resourceConfig)!=null&&d.isResourceContainer?1:0;return r!==l?l-r:0}),c.reverse());return c},[b,h,j,g]),G=[{id:"DEFAULT",label:"VÝCHOZÍ",icon:ee},{id:"RARITY",label:"VZÁCNOST",icon:ae},{id:"SPECIALIZATION",label:"TŘÍDA",icon:se}],Q=[{id:"ALL",label:"VŠE",icon:q},{id:"RESOURCES",label:"SUROVINY",icon:P},{id:"ITEMS",label:"VYBAVENÍ",icon:C},{id:"OTHERS",label:"OSTATNÍ",icon:W}],Y=()=>{if(x.length!==2)return null;const[s,i]=x,c=Array.from(new Set([...(s.stats||[]).map(a=>a.label),...(i.stats||[]).map(a=>a.label)])),t=a=>{const r=parseInt(String(a).replace(/[^0-9-]/g,""));return isNaN(r)?0:r};return e.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[150] bg-black/95 backdrop-blur-xl p-6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black uppercase text-signal-cyan chromatic-text",children:"Taktické Srovnání"}),e.jsx("p",{className:"text-[10px] text-white/40 font-mono uppercase tracking-widest",children:"Analýza_Assetů_v1.0"})]}),e.jsx("button",{onClick:()=>m([]),className:"p-3 bg-white/5 rounded-full text-zinc-400 hover:text-white",children:e.jsx(xe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[s,i].map((a,r)=>{var n;const l=I(a.rarity,a.type);return e.jsxs("div",{className:`p-4 tactical-card bg-white/5 border-t-4 ${l.border}`,children:[e.jsx("div",{className:`mb-2 ${l.text}`,children:L(a.type,!!((n=a.resourceConfig)!=null&&n.isResourceContainer))}),e.jsx("h3",{className:"text-xs font-black uppercase text-white truncate leading-tight",children:a.title}),e.jsx("p",{className:"text-[8px] text-zinc-500 font-mono mt-1",children:l.label})]},r)})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-500 uppercase tracking-widest border-b border-white/10 pb-2",children:[e.jsx(pe,{className:"w-3 h-3"})," Parametry_Modulů"]}),c.map(a=>{var A,S,E,T;const r=((S=(A=s.stats)==null?void 0:A.find(y=>y.label===a))==null?void 0:S.value)||"---",l=((T=(E=i.stats)==null?void 0:E.find(y=>y.label===a))==null?void 0:T.value)||"---",n=t(r),d=t(l);return e.jsxs("div",{className:"bg-white/[0.02] border border-white/5 p-3 rounded-xl",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("span",{className:"text-[9px] font-black text-zinc-400 uppercase tracking-widest",children:a})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 relative",children:[e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-px h-6 bg-white/10"}),e.jsxs("div",{className:`text-center font-mono font-black text-lg ${n>d?"text-signal-cyan":n<d?"text-zinc-600":"text-white"}`,children:[r,n>d&&e.jsx("div",{className:"text-[8px] text-signal-cyan/50 mt-1",children:"▲ LEPŠÍ"})]}),e.jsxs("div",{className:`text-center font-mono font-black text-lg ${d>n?"text-signal-cyan":d<n?"text-zinc-600":"text-white"}`,children:[l,d>n&&e.jsx("div",{className:"text-[8px] text-signal-cyan/50 mt-1",children:"▲ LEPŠÍ"})]})]})]},a)})]})]}),e.jsx("button",{onClick:()=>m([]),className:"w-full py-5 bg-signal-cyan text-black font-black uppercase text-xs tracking-[0.3em] rounded-2xl mt-6 shadow-[0_0_30px_rgba(0,242,255,0.2)]",children:"Ukončit_Analýzu"})]})};return e.jsxs("div",{className:"w-full h-full flex flex-col p-6 bg-[#0a0b0d] overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5 z-0",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"30px 30px"}}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-20",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-3xl font-black uppercase tracking-tighter text-white font-sans chromatic-text leading-none",children:"MŮJ BATOH"}),e.jsx("div",{className:"flex items-center gap-3 mt-1.5",children:k?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 text-orange-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] text-orange-500 font-mono font-bold uppercase tracking-[0.4em]",children:"TESTOVACÍ_PROFIL"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 text-signal-cyan/50"}),e.jsx("span",{className:"text-[10px] text-white/40 font-mono font-bold uppercase tracking-[0.4em]",children:"Osobní_Zásoby"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:U,className:`p-3 tactical-card transition-all active:scale-90 border-2 ${u?"bg-signal-cyan border-signal-cyan text-black":"bg-white/5 border-white/10 text-signal-cyan"}`,title:"Srovnání Assetů",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>V(),disabled:w,className:"p-3 tactical-card bg-white/5 border-white/10 hover:border-signal-cyan transition-all active:scale-90 disabled:opacity-50",children:e.jsx(X,{className:`w-4 h-4 text-signal-cyan ${w?"animate-spin":""}`})})]})]}),k&&e.jsx("div",{className:"mb-4 bg-orange-950/30 border border-orange-500/50 p-2 rounded text-center relative z-20",children:e.jsx("p",{className:"text-[9px] text-orange-500 font-bold uppercase tracking-widest",children:"POZOR: Operujete v testovacím trezoru. Data zde neovlivňují Master Databázi."})}),u&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-signal-cyan/10 border border-signal-cyan/30 rounded-xl flex items-center justify-between relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-signal-cyan rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-signal-cyan uppercase tracking-widest",children:x.length===0?"Vyberte první asset...":x.length===1?"Vyberte druhý asset z Batohu":"Analýza připravena"})]}),x.length>0&&e.jsx("button",{onClick:()=>m([]),className:"text-[9px] font-black text-zinc-500 uppercase underline",children:"Reset"})]}),e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto no-scrollbar pb-1 relative z-20",children:Q.map(s=>e.jsxs("button",{onClick:()=>{D(s.id),N("click")},className:`px-4 py-2.5 rounded-lg flex items-center gap-2 border transition-all whitespace-nowrap ${h===s.id?"bg-white text-black border-white shadow-[0_0_15px_rgba(255,255,255,0.3)]":"bg-white/5 border-white/10 text-zinc-500 hover:text-white hover:border-white/30"}`,children:[e.jsx(s.icon,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:s.label})]},s.id))}),e.jsx("div",{className:"flex gap-2 mb-4 relative z-20",children:G.map(s=>e.jsxs("button",{onClick:()=>{F(s.id),N("click")},className:`flex-1 py-2 flex flex-col items-center justify-center gap-1 border rounded transition-all ${j===s.id?"bg-signal-cyan/20 border-signal-cyan text-signal-cyan shadow-[0_0_10px_rgba(0,242,255,0.2)]":"bg-white/5 border-white/10 text-white/40"}`,children:[e.jsx(s.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest",children:s.label})]},s.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-24 no-scrollbar relative z-10",children:p?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4",children:[e.jsx(te,{className:"w-10 h-10 animate-spin text-signal-cyan"}),e.jsx("span",{className:"text-[10px] font-mono text-zinc-500 uppercase tracking-widest",children:"Prohledávám Batoh..."})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.length===0?e.jsxs("div",{className:"col-span-2 flex flex-col items-center justify-center py-10 opacity-50",children:[e.jsx(C,{className:"w-12 h-12 text-zinc-600 mb-2"}),e.jsx("span",{className:"text-xs font-mono uppercase text-zinc-500 font-bold",children:"Kategorie je prázdná"})]}):_.map(s=>{var r,l;const i=!!((r=s.resourceConfig)!=null&&r.isResourceContainer),c=i?{border:"border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.2)]",text:"text-orange-500",label:"SUROVINA"}:I(s.rarity,s.type),t=x.some(n=>n.id===s.id),a=s;return e.jsxs(v.div,{onClick:()=>H(s),initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`tactical-card h-48 flex flex-col justify-between p-4 bg-black/40 border-t-2 ${c.border} active:scale-95 transition-transform group relative ${t?"scale-90 border-2 border-signal-cyan ring-4 ring-signal-cyan/20":""} ${i?"bg-orange-950/10":""}`,children:[t&&e.jsx("div",{className:"absolute inset-0 bg-signal-cyan/10 flex items-center justify-center z-10",children:e.jsx("div",{className:"bg-signal-cyan text-black p-2 rounded-full shadow-[0_0_20px_#00f2ff]",children:e.jsx(R,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`${c.text}`,children:L(s.type,i)}),i&&e.jsxs("div",{className:"text-xs font-mono font-bold text-orange-500 bg-orange-950/50 px-2 py-0.5 rounded border border-orange-500/30 shadow-[0_0_10px_rgba(249,115,22,0.2)]",children:["x",((l=s.resourceConfig)==null?void 0:l.resourceAmount)||1]}),!i&&a._stackQty>1&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-white bg-red-600 px-2 py-0.5 rounded shadow-[0_0_10px_rgba(220,38,38,0.5)] border border-red-400",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsxs("span",{children:["x",a._stackQty]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-[10px] uppercase line-clamp-2 transition-colors ${i?"text-orange-100 group-hover:text-orange-400":"text-white group-hover:text-signal-cyan"}`,children:s.title}),e.jsx("p",{className:"text-[8px] text-zinc-500 font-mono mt-1",children:c.label})]})]},s.id)})})}),e.jsx(ne,{children:Y()})]})};export{ue as default};
