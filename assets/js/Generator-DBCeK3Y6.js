import{r as P,j as e,a8 as ke,Y as D,O as Q,n as Ce,l as ze,F as Se,a2 as ge,aE as V,a5 as E,aF as Pe,U as Oe,G as ve,X as J,z as ie,a6 as Ie,y as W,x as X,Z as ee,aB as Te,J as Re,N as te,_ as Ae,ac as Me,aj as Ee,aG as Le,o as _e,al as Ve,a4 as fe,aH as De,ai as Be,ae as de,aI as ye,aJ as He,au as Ke,a7 as Ge,ad as $e,aK as Ue,ay as Fe,g as Ze,aL as me,e as qe,aM as Ye,T as je,u as Qe,aN as Je,aO as We,aP as Xe,A as Ne,m as ce}from"./vendor-Dgu-9KXE.js";import{G as j,P as Y,d as et,p as B,v as we,a as tt}from"./index-BYoI-clz.js";import"html5-qrcode";import"./utils-BOwlEK-f.js";const st=({event:t,onUpdate:u})=>{var l,N,C,O,z;const[c,h]=P.useState(""),[y,v]=P.useState(1),[r,g]=P.useState(0),[k,o]=P.useState(0),[a,i]=P.useState(0),d=x=>{u({canSellToMerchant:x.target.checked})},b=(x,A)=>{u({tradeConfig:{...t.tradeConfig||{warriorDiscount:10,clericDiscount:45,mageDiscount:25,rogueStealChance:30},[x]:A}})},n=()=>{if(!c)return;const x={id:c,stock:y,price:r,sellPrice:k,saleChance:a};u({merchantItems:[...t.merchantItems||[],x]}),h(""),v(1),g(0),o(0),i(0)},m=x=>{u({merchantItems:(t.merchantItems||[]).filter((A,H)=>H!==x)})};return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-black border border-yellow-700 rounded-xl p-5 shadow-[0_0_30px_rgba(234,179,8,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500 border-b border-yellow-900/50 pb-2",children:[e.jsx(ke,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Sklad Obchodníka"})]}),e.jsxs("div",{className:"mb-4 bg-yellow-900/20 p-3 rounded-lg border border-yellow-900/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-bold text-yellow-200 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Povolit Výkup od hráčů?"]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"canSellToMerchant",className:"sr-only peer",checked:t.canSellToMerchant??!1,onChange:d}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-yellow-500"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-yellow-900/30",children:[e.jsx("h4",{className:"text-[10px] font-bold text-yellow-500 uppercase mb-2",children:"Třídní Bonusy"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-red-900/50 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Válečník Sleva %"}),e.jsx("input",{type:"number",value:((l=t.tradeConfig)==null?void 0:l.warriorDiscount)??10,onChange:x=>b("warriorDiscount",parseInt(x.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-yellow-900/50 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Kněz (Heal) Sleva %"}),e.jsx("input",{type:"number",value:((N=t.tradeConfig)==null?void 0:N.clericDiscount)??45,onChange:x=>b("clericDiscount",parseInt(x.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-blue-900/50 flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Mág (Svitky) Sleva %"}),e.jsx("input",{type:"number",value:((C=t.tradeConfig)==null?void 0:C.mageDiscount)??25,onChange:x=>b("mageDiscount",parseInt(x.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded border border-green-900/50 flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[9px] text-zinc-400 block",children:"Zloděj Krádež %"}),e.jsx("input",{type:"number",value:((O=t.tradeConfig)==null?void 0:O.rogueStealChance)??30,onChange:x=>b("rogueStealChance",parseInt(x.target.value)),className:"w-full bg-transparent text-white font-mono font-bold text-xs outline-none"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap items-end bg-black/40 p-3 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex-[2] min-w-[150px]",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase block mb-1",children:"ID Předmětu (např. ITEM-001)"}),e.jsx("input",{type:"text",value:c,onChange:x=>h(x.target.value),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm uppercase"})]}),e.jsxs("div",{className:"w-16",children:[e.jsx("label",{className:"text-[9px] text-zinc-500 uppercase block mb-1",children:"Sklad"}),e.jsx("input",{type:"number",value:y,onChange:x=>v(parseInt(x.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm text-center"})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("label",{className:"text-[9px] text-yellow-500 uppercase block mb-1 font-bold",children:"Cena (Buy)"}),e.jsx("input",{type:"number",value:r,onChange:x=>g(parseInt(x.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-yellow-500 font-mono text-sm font-bold text-center"})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("label",{className:"text-[9px] text-green-500 uppercase block mb-1 font-bold",children:"Výkup (Sell)"}),e.jsx("input",{type:"number",value:k,onChange:x=>o(parseInt(x.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-green-500 font-mono text-sm font-bold text-center"})]}),e.jsxs("div",{className:"w-20",children:[e.jsxs("label",{className:"text-[9px] text-pink-500 uppercase block mb-1 font-bold flex gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," Sleva %"]}),e.jsx("input",{type:"number",min:"0",max:"100",value:a,onChange:x=>i(parseInt(x.target.value)),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-pink-500 font-mono text-sm font-bold text-center",title:"Šance, že bude zboží při návštěvě ve slevě"})]}),e.jsx("button",{type:"button",onClick:n,className:"px-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded flex items-center justify-center h-9 shadow-lg",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[(z=t.merchantItems)==null?void 0:z.map((x,A)=>e.jsxs("div",{className:"flex justify-between items-center bg-zinc-800 p-2 rounded border border-zinc-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-white font-mono font-bold text-xs",children:x.id}),e.jsxs("span",{className:"text-zinc-500 text-[10px] ml-2 font-mono bg-black/30 px-1.5 rounded",children:["x",x.stock]}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsxs("span",{className:"text-yellow-500 text-[10px] font-mono font-bold",children:["Nákup: ",x.price||0," G"]}),e.jsxs("span",{className:"text-green-500 text-[10px] font-mono font-bold",children:["Výkup: ",x.sellPrice||0," G"]}),x.saleChance&&x.saleChance>0&&e.jsxs("span",{className:"text-pink-500 text-[10px] font-mono font-bold flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," Chance: ",x.saleChance,"%"]})]})]}),e.jsx("button",{type:"button",onClick:()=>m(A),className:"text-red-500 hover:text-white p-2",children:e.jsx(E,{className:"w-4 h-4"})})]},A)),(!t.merchantItems||t.merchantItems.length===0)&&e.jsx("p",{className:"text-zinc-600 text-xs italic text-center py-4",children:"Žádné zboží na skladě."})]})]})},at=({event:t,onUpdate:u})=>{var k;const c=()=>{var a;const o={label:`Volba ${(((a=t.dilemmaOptions)==null?void 0:a.length)||0)+1}`,successChance:100,consequenceText:"Úspěch!",rewards:[],failMessage:"Nezdařilo se.",failDamage:0,physicalInstruction:""};u({dilemmaOptions:[...t.dilemmaOptions||[],o]})},h=(o,a)=>{const i=[...t.dilemmaOptions||[]];i[o]={...i[o],...a},u({dilemmaOptions:i})},y=o=>{u({dilemmaOptions:(t.dilemmaOptions||[]).filter((a,i)=>i!==o)})},v=o=>{const a=[...t.dilemmaOptions||[]];a[o].rewards||(a[o].rewards=[]),a[o].rewards.push({type:"GOLD",value:10}),u({dilemmaOptions:a})},r=(o,a,i,d)=>{const b=[...t.dilemmaOptions||[]];b[o].rewards&&(b[o].rewards[a]={...b[o].rewards[a],[i]:d},u({dilemmaOptions:b}))},g=(o,a)=>{const i=[...t.dilemmaOptions||[]];i[o].rewards&&(i[o].rewards=i[o].rewards.filter((d,b)=>b!==a),u({dilemmaOptions:i}))};return e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-black border border-purple-700 rounded-xl p-5 shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-neon-purple border-b border-purple-900/50 pb-2",children:[e.jsx(Pe,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-display font-bold uppercase tracking-widest",children:"Editor Křižovatky"})]}),e.jsxs("div",{className:"mb-6 p-3 bg-black/40 rounded border border-purple-500/30 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-purple-300 uppercase tracking-wider",children:"Dosah Dilematu"}),e.jsx("span",{className:"text-[10px] text-zinc-500",children:"Kdo má toto dilema řešit?"})]}),e.jsxs("div",{className:"flex bg-zinc-900 rounded-lg p-1 border border-zinc-700",children:[e.jsxs("button",{type:"button",onClick:()=>u({dilemmaScope:"INDIVIDUAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${t.dilemmaScope==="INDIVIDUAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(Oe,{className:"w-3 h-3"})," Jen Hráč"]}),e.jsxs("button",{type:"button",onClick:()=>u({dilemmaScope:"GLOBAL"}),className:`px-3 py-1.5 rounded text-xs font-bold uppercase flex items-center gap-2 transition-all ${t.dilemmaScope==="GLOBAL"?"bg-purple-600 text-white shadow":"text-zinc-500 hover:text-white"}`,children:[e.jsx(ve,{className:"w-3 h-3"})," Všichni"]})]})]}),e.jsx("div",{className:"space-y-6",children:(k=t.dilemmaOptions)==null?void 0:k.map((o,a)=>{var i;return e.jsxs("div",{className:"bg-black/40 border border-purple-500/30 rounded-xl overflow-hidden animate-in slide-in-from-left-4",children:[e.jsxs("div",{className:"bg-purple-900/20 p-3 border-b border-purple-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-[10px] font-black uppercase",children:["Volba ",String.fromCharCode(65+a)]}),e.jsx("input",{value:o.label,onChange:d=>h(a,{label:d.target.value}),placeholder:"Název akce (např. Zaútočit)",className:"bg-transparent border-b border-transparent hover:border-purple-500/50 focus:border-purple-500 text-white font-bold text-sm outline-none px-1"})]}),e.jsx("button",{onClick:()=>y(a),className:"text-red-500 hover:text-red-400 p-1",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold uppercase tracking-wider text-zinc-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," Šance na úspěch"]}),e.jsxs("span",{className:o.successChance<100?"text-orange-400":"text-green-400",children:[o.successChance,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:o.successChance,onChange:d=>h(a,{successChance:parseInt(d.target.value)}),className:"w-full h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-green-900/10 border border-green-500/20 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest",children:"Při Úspěchu"}),e.jsx("textarea",{value:o.consequenceText,onChange:d=>h(a,{consequenceText:d.target.value}),placeholder:"Příběhový text při úspěchu...",className:"w-full bg-black/50 border border-green-900/50 rounded p-2 text-zinc-300 text-xs focus:border-green-500 outline-none",rows:2}),e.jsxs("div",{className:"space-y-2",children:[(i=o.rewards)==null?void 0:i.map((d,b)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:d.type,onChange:n=>r(a,b,"type",n.target.value),className:"bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded uppercase font-bold outline-none",children:[e.jsx("option",{value:"GOLD",children:"Gold"}),e.jsx("option",{value:"HP",children:"HP"}),e.jsx("option",{value:"MANA",children:"Mana"})]}),e.jsx("input",{type:"number",value:d.value,onChange:n=>r(a,b,"value",parseInt(n.target.value)),className:"w-16 bg-black border border-zinc-700 text-white text-[10px] p-1.5 rounded font-mono",placeholder:"Val"}),e.jsx("button",{onClick:()=>g(a,b),className:"text-zinc-600 hover:text-red-500",children:e.jsx(J,{className:"w-3 h-3"})})]},b)),e.jsxs("button",{onClick:()=>v(a),className:"text-[9px] font-bold text-green-400 hover:text-green-300 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(V,{className:"w-3 h-3"})," Přidat Odměnu"]})]})]}),o.successChance<100&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-3 bg-red-900/10 border border-red-500/20 rounded-lg animate-in fade-in",children:[e.jsxs("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"})," Při Neúspěchu"]}),e.jsx("textarea",{value:o.failMessage||"",onChange:d=>h(a,{failMessage:d.target.value}),placeholder:"Příběhový text při selhání...",className:"w-full bg-black/50 border border-red-900/50 rounded p-2 text-zinc-300 text-xs focus:border-red-500 outline-none",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[10px] text-red-400 uppercase font-bold",children:"Poškození (DMG):"}),e.jsx("input",{type:"number",value:o.failDamage||0,onChange:d=>h(a,{failDamage:parseInt(d.target.value)}),className:"w-20 bg-black/50 border border-red-900/50 rounded p-1.5 text-red-500 text-xs font-mono font-bold"})]})]}),e.jsxs("div",{className:"p-3 bg-yellow-900/10 border border-yellow-700/30 rounded-lg",children:[e.jsx("span",{className:"text-[9px] font-black text-yellow-500 uppercase tracking-widest block mb-2",children:"Instrukce pro desku (Volitelné)"}),e.jsx("textarea",{value:o.physicalInstruction||"",onChange:d=>h(a,{physicalInstruction:d.target.value}),placeholder:"Např: Posuň figurku o 3 pole zpět...",className:"w-full bg-black/50 border border-yellow-900/50 rounded p-2 text-yellow-200 text-xs font-mono focus:border-yellow-500 outline-none",rows:1})]})]})]},a)})}),e.jsx("button",{type:"button",onClick:c,className:"w-full mt-6 py-3 bg-purple-600 hover:bg-purple-500 text-black font-black uppercase text-xs rounded-xl shadow-lg shadow-purple-500/20 transition-all",children:"+ Přidat Novou Cestu"})]})},rt=({event:t,onUpdate:u})=>{var i,d,b;const c=t.type===j.BOSS,h=t.type===j.TRAP,y=(()=>{switch(t.rarity){case"Legendary":return 10;case"Epic":return 30;case"Rare":return 50;default:return 80}})(),v=n=>{var m,l;return((l=(m=t.stats)==null?void 0:m.find(N=>N.label===n))==null?void 0:l.value.toString())||""},r=(n,m)=>{const N=(t.stats?[...t.stats]:[]).filter(C=>C.label!==n);m&&m!=="0"&&N.unshift({label:n,value:m}),u({stats:N})},g=(n,m)=>{u({combatConfig:{...t.combatConfig||{defBreakChance:0},[n]:m}})},k=()=>{const n={name:"Nová Fáze",description:"Boss se rozzuří...",triggerType:"HP_PERCENT",triggerValue:50,damageBonus:5};u({bossPhases:[...t.bossPhases||[],n]})},o=(n,m,l)=>{const N=[...t.bossPhases||[]];N[n]={...N[n],[m]:l},u({bossPhases:N})},a=n=>{u({bossPhases:(t.bossPhases||[]).filter((m,l)=>l!==n)})};return c?e.jsxs("div",{className:"bg-gradient-to-br from-red-950 to-black border-2 border-red-800 rounded-xl p-6 shadow-[0_0_50px_rgba(153,27,27,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-red-600 border-b border-red-900 pb-4",children:[e.jsx(Ie,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-display font-black uppercase tracking-widest",children:"Ultimátní Boss"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-900/20 p-3 rounded border border-red-800 text-center",children:[e.jsx(W,{className:"w-5 h-5 text-red-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:v("HP"),onChange:n=>r("HP",n.target.value),placeholder:"HP",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-orange-900/20 p-3 rounded border border-orange-800 text-center",children:[e.jsx(Q,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:v("ATK"),onChange:n=>r("ATK",n.target.value),placeholder:"ATK",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]}),e.jsxs("div",{className:"bg-blue-900/20 p-3 rounded border border-blue-800 text-center",children:[e.jsx(X,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),e.jsx("input",{type:"number",value:v("DEF"),onChange:n=>r("DEF",n.target.value),placeholder:"DEF",className:"w-full bg-transparent text-center text-white font-bold font-mono outline-none"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-red-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"})," Fáze Boje"]}),(i=t.bossPhases)==null?void 0:i.map((n,m)=>e.jsxs("div",{className:"bg-black/60 border border-red-800/50 p-4 rounded-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>a(m),className:"absolute top-2 right-2 text-red-500",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsx("input",{placeholder:"Název Fáze",value:n.name,onChange:l=>o(m,"name",l.target.value),className:"bg-zinc-900 border border-zinc-700 rounded p-2 text-white text-sm font-bold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase",children:"Spustit při % HP:"}),e.jsx("input",{type:"number",value:n.triggerValue,onChange:l=>o(m,"triggerValue",parseInt(l.target.value)),className:"w-16 bg-zinc-900 border border-zinc-700 rounded p-2 text-white font-mono text-sm"})]})]}),e.jsx("textarea",{placeholder:"Popis schopnosti bosse v této fázi...",value:n.description,onChange:l=>o(m,"description",l.target.value),className:"w-full bg-zinc-900 border border-zinc-700 rounded p-2 text-zinc-400 text-xs mb-2",rows:2}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Bonusové Poškození:"}),e.jsx("input",{type:"number",value:n.damageBonus,onChange:l=>o(m,"damageBonus",parseInt(l.target.value)),className:"w-20 bg-red-900/20 border border-red-800 rounded p-1 text-red-400 font-mono text-sm"})]})]},m)),e.jsx("button",{type:"button",onClick:k,className:"w-full py-3 bg-red-900/30 border border-red-600 text-red-400 font-bold uppercase rounded hover:bg-red-900/50 transition-colors",children:"+ Přidat Fázi"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-red-950/40 to-black border border-red-900 rounded-xl p-5 shadow-[0_0_30px_rgba(220,38,38,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-500 border-b border-red-900/50 pb-2",children:[e.jsx(ie,{className:"w-6 h-6"}),e.jsxs("h3",{className:"font-display font-bold uppercase tracking-widest",children:["Konfigurace ",h?"Pasti":"Nepřítele"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3 text-red-500"})," ",h?"Obtížnost":"Zdraví (HP)"]}),e.jsx("input",{type:"number",placeholder:"50",value:v("HP"),onChange:n=>r("HP",n.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-red-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3 text-orange-500"})," ",h?"Poškození":"Útok (ATK)"]}),e.jsx("input",{type:"number",placeholder:"10",value:v("ATK"),onChange:n=>r("ATK",n.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-orange-500 outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-zinc-500 flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3 text-blue-500"})," ",h?"Odolnost":"Obrana (DEF)"]}),e.jsx("input",{type:"number",placeholder:"0",value:v("DEF"),onChange:n=>r("DEF",n.target.value),className:"bg-black border border-zinc-800 rounded p-2 text-white font-mono focus:border-blue-500 outline-none"})]})]}),!h&&e.jsxs("div",{className:"mb-4 bg-green-900/10 p-3 rounded border border-green-900/30",children:[e.jsxs("label",{className:"text-[10px] uppercase font-bold text-green-400 flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"w-4 h-4"})," % Šance na rozbití obrany nepřítele (Weakness)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:((d=t.combatConfig)==null?void 0:d.defBreakChance)||0,onChange:n=>g("defBreakChance",parseInt(n.target.value)),className:"flex-1 h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-green-500"}),e.jsxs("span",{className:"text-sm font-mono font-bold text-white w-12 text-right",children:[((b=t.combatConfig)==null?void 0:b.defBreakChance)||0,"%"]})]}),e.jsxs("p",{className:"text-[9px] text-zinc-500 mt-1 leading-tight",children:["Šance pro ",e.jsx("strong",{children:"HRÁČE"}),", že při útoku zcela ignoruje obranu tohoto nepřítele (Critical Weakness)."]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 text-xs bg-black/40 p-3 rounded border border-zinc-800/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"})," Mechanika Souboje"]}),e.jsxs("ul",{className:"text-zinc-600 space-y-1 list-disc pl-3",children:[e.jsx("li",{children:"Hráč má štíty (ARMOR), které se ničí jako první."}),e.jsx("li",{children:"Nepřítel má DEF, která snižuje DMG hráče."}),e.jsx("li",{children:"Weakness = Šance hráče ignorovat DEF nepřítele."})]})]}),!h&&e.jsxs("div",{className:"flex-1 border-l border-zinc-800 pl-4",children:[e.jsxs("h4",{className:"font-bold text-zinc-400 mb-1 flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3"})," Šance na Útěk"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Závisí na vzácnosti:"}),e.jsxs("span",{className:`font-mono font-bold ${y<30?"text-red-500":"text-green-500"}`,children:[y,"%"]})]})]})]})]})},nt=({event:t,onUpdate:u,masterCatalog:c=[]})=>{var ue,L,re,ne,w,S,R,I,_,K,G,$,U,F,Z,le,oe;const[h,y]=P.useState(""),[v,r]=P.useState(1),[g,k]=P.useState(""),[o,a]=P.useState(1),[i,d]=P.useState(""),[b,n]=P.useState(.8),m=(s,p="+10")=>{const f=[...t.stats||[]];f.some(M=>M.label.toUpperCase()===s.toUpperCase())||u({stats:[...f,{label:s,value:p}]})},l=(s,p,f)=>{const M=[...t.stats||[]];M[s]={...M[s],[p]:f},u({stats:M})},N=s=>{u({stats:(t.stats||[]).filter((p,f)=>f!==s)})},C=(s,p)=>{u({resourceConfig:{...t.resourceConfig||{isResourceContainer:!1,resourceName:"Kovový šrot",resourceAmount:1},[s]:p}})},O=(s,p)=>{u({craftingRecipe:{...t.craftingRecipe||{enabled:!1,requiredResources:[],craftingTimeSeconds:60},[s]:p}})},z=(s,p)=>{u({marketConfig:{...t.marketConfig||{enabled:!1,marketPrice:void 0,saleChance:0,classModifiers:[],recyclingOutput:[]},[s]:p}})},x=()=>{var p;if(!h)return;const s=((p=t.craftingRecipe)==null?void 0:p.requiredResources)||[];s.some(f=>f.resourceName===h)||(O("requiredResources",[...s,{resourceName:h,amount:v}]),r(1))},A=s=>{var f;const p=((f=t.craftingRecipe)==null?void 0:f.requiredResources)||[];O("requiredResources",p.filter((M,T)=>T!==s))},H=()=>{var p;if(!g)return;const s=((p=t.marketConfig)==null?void 0:p.recyclingOutput)||[];s.some(f=>f.resourceName===g)||(z("recyclingOutput",[...s,{resourceName:g,amount:o}]),a(1))},xe=s=>{var f;const p=((f=t.marketConfig)==null?void 0:f.recyclingOutput)||[];z("recyclingOutput",p.filter((M,T)=>T!==s))},pe=()=>{var p;if(!i)return;const s=((p=t.marketConfig)==null?void 0:p.classModifiers)||[];s.some(f=>f.playerClass===i)||(z("classModifiers",[...s,{playerClass:i,priceMultiplier:b}]),d(""),n(.8))},be=s=>{var f;const p=((f=t.marketConfig)==null?void 0:f.classModifiers)||[];z("classModifiers",p.filter((M,T)=>T!==s))},se=c.filter(s=>{var p;return(p=s.resourceConfig)==null?void 0:p.isResourceContainer}),ae=[{label:"HP",icon:W,color:"text-red-500"},{label:"DMG",icon:Q,color:"text-orange-500"},{label:"ARMOR",icon:X,color:"text-zinc-200"},{label:"MANA",icon:ee,color:"text-cyan-400"},{label:"PALIVO",icon:de,color:"text-orange-500"},{label:"ZLATO",icon:D,color:"text-yellow-500"},{label:"KYSLÍK",icon:te,color:"text-cyan-400"}];return e.jsxs("div",{className:"space-y-6 bg-zinc-900/50 p-5 border border-zinc-700 relative rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 border-b border-zinc-700 pb-3",children:[e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-[0.2em]",children:"Konfigurace_Assetu:"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-black border border-zinc-700 rounded-lg overflow-hidden transition-colors hover:border-yellow-500",children:e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:t.isConsumable,onChange:s=>u({isConsumable:s.target.checked}),className:"w-6 h-6 rounded border-zinc-700 bg-zinc-900 text-yellow-500 focus:ring-yellow-500 accent-yellow-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[11px] font-black uppercase tracking-widest transition-colors ${t.isConsumable?"text-yellow-500":"text-white"}`,children:"Spotřebovatelný"}),e.jsx("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Zmizí po použití"})]})]})}),e.jsx("div",{className:"bg-black border border-zinc-700 rounded-lg overflow-hidden transition-colors hover:border-red-500",children:e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:t.isSellOnly,onChange:s=>u({isSellOnly:s.target.checked}),className:"w-6 h-6 rounded border-zinc-700 bg-zinc-900 text-red-500 focus:ring-red-500 accent-red-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest transition-colors flex items-center gap-2 ${t.isSellOnly?"text-red-500":"text-white"}`,children:[e.jsx(Me,{className:"w-3 h-3"})," Jen pro Prodej"]}),e.jsx("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Nelze použít, jen prodat"})]})]})})]}),e.jsxs("div",{className:"bg-black border border-zinc-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-500",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Tržní Hodnota (Cena)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.price||0,onChange:s=>u({price:parseInt(s.target.value)}),className:"w-full bg-zinc-900 border border-zinc-700 p-3 text-white font-mono text-sm focus:border-yellow-500 outline-none rounded"}),e.jsx("span",{className:"absolute right-3 top-3 text-[10px] text-zinc-500 font-bold",children:"GOLD"})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(ue=t.marketConfig)!=null&&ue.enabled?"bg-indigo-950/20 border-indigo-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((L=t.marketConfig)==null?void 0:L.enabled)||!1,onChange:s=>z("enabled",s.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-indigo-500 focus:ring-indigo-500 accent-indigo-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(re=t.marketConfig)!=null&&re.enabled?"text-indigo-400":"text-zinc-400"}`,children:[e.jsx(Ee,{className:"w-3 h-3"})," Konfigurace Tržiště & Recyklace"]})})]}),((ne=t.marketConfig)==null?void 0:ne.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-5 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Override Tržní Ceny (Volitelné)"}),e.jsx("input",{type:"number",placeholder:"Standardní cena (zleva)",value:t.marketConfig.marketPrice||"",onChange:s=>z("marketPrice",s.target.value?parseInt(s.target.value):void 0),className:"w-full bg-black border border-indigo-500/30 p-2 text-white text-xs font-mono outline-none focus:border-indigo-500 rounded"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," Šance na Akci (%)"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.marketConfig.saleChance||0,onChange:s=>z("saleChance",parseInt(s.target.value)),className:"w-full h-2 bg-black rounded-lg appearance-none cursor-pointer accent-indigo-500 mb-1"}),e.jsxs("div",{className:"text-right text-[10px] font-mono text-indigo-400",children:[t.marketConfig.saleChance||0,"%"]})]})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-indigo-500/20",children:[e.jsxs("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(_e,{className:"w-3 h-3"})," Třídní Slevy / Přirážky"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:i,onChange:s=>d(s.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"-- Třída --"}),Object.values(Y).map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:b,onChange:s=>n(parseFloat(s.target.value)),className:"flex-1 bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none",children:[e.jsx("option",{value:.5,children:"-50% (Sleva)"}),e.jsx("option",{value:.8,children:"-20% (Sleva)"}),e.jsx("option",{value:1.2,children:"+20% (Dražší)"}),e.jsx("option",{value:1.5,children:"+50% (Dražší)"})]}),e.jsx("button",{type:"button",onClick:pe,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-2 rounded",children:e.jsx(V,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(w=t.marketConfig.classModifiers)==null?void 0:w.map((s,p)=>e.jsxs("div",{className:"flex justify-between items-center bg-indigo-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-indigo-500/10",children:[e.jsx("span",{children:s.playerClass}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:s.priceMultiplier<1?"text-green-400":"text-red-400",children:s.priceMultiplier<1?`SLEVA ${Math.round((1-s.priceMultiplier)*100)}%`:`PŘIRÁŽKA ${Math.round((s.priceMultiplier-1)*100)}%`}),e.jsx("button",{onClick:()=>be(p),className:"text-zinc-500 hover:text-white",children:e.jsx(J,{className:"w-3 h-3"})})]})]},p))})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-orange-500/20",children:[e.jsxs("label",{className:"text-[8px] text-orange-400 uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Výstup Recyklace"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("select",{value:g,onChange:s=>k(s.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-1.5 rounded outline-none focus:border-orange-500",children:[e.jsx("option",{value:"",children:"-- Surovina --"}),se.map(s=>{var p,f;return e.jsx("option",{value:((p=s.resourceConfig)==null?void 0:p.resourceName)||s.title,children:((f=s.resourceConfig)==null?void 0:f.resourceName)||s.title},s.id)})]}),e.jsx("input",{type:"number",value:o,onChange:s=>a(parseInt(s.target.value)),className:"w-12 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-1.5 rounded outline-none focus:border-orange-500"}),e.jsx("button",{type:"button",onClick:H,className:"bg-orange-600 hover:bg-orange-500 text-white px-2 rounded",children:e.jsx(V,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"space-y-1",children:(S=t.marketConfig.recyclingOutput)==null?void 0:S.map((s,p)=>e.jsxs("div",{className:"flex justify-between items-center bg-orange-900/20 px-2 py-1 rounded text-[10px] text-zinc-300 border border-orange-500/10",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3 text-orange-500"})," ",s.resourceName]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono font-bold text-white",children:["x",s.amount]}),e.jsx("button",{onClick:()=>xe(p),className:"text-zinc-500 hover:text-white",children:e.jsx(J,{className:"w-3 h-3"})})]})]},p))})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(R=t.resourceConfig)!=null&&R.isResourceContainer?"bg-orange-950/20 border-orange-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((I=t.resourceConfig)==null?void 0:I.isResourceContainer)||!1,onChange:s=>C("isResourceContainer",s.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-orange-500 focus:ring-orange-500 accent-orange-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(_=t.resourceConfig)!=null&&_.isResourceContainer?"text-orange-500":"text-zinc-400"}`,children:[e.jsx(fe,{className:"w-3 h-3"})," Je to Surovina?"]})})]}),((K=t.resourceConfig)==null?void 0:K.isResourceContainer)&&e.jsxs("div",{className:"p-4 pt-0 space-y-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-[2fr_1fr] gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Název Suroviny (ID pro crafting)"}),e.jsx("input",{type:"text",value:t.resourceConfig.resourceName||"",onChange:s=>C("resourceName",s.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500 rounded",placeholder:"např. Kovový šrot"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Množství v balíku"}),e.jsx("input",{type:"number",value:t.resourceConfig.resourceAmount||1,onChange:s=>C("resourceAmount",parseInt(s.target.value)),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-orange-500 rounded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-orange-400/70 uppercase font-bold tracking-widest mb-1 block",children:"Vlastní nápis v Batohu"}),e.jsx("input",{type:"text",value:t.resourceConfig.customLabel||"",onChange:s=>C("customLabel",s.target.value),className:"w-full bg-black border border-orange-500/30 p-2 text-white text-xs font-mono outline-none focus:border-orange-500 rounded",placeholder:"Výchozí: Surovina k Těžbě"})]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${(G=t.craftingRecipe)!=null&&G.enabled?"bg-cyan-950/20 border-cyan-500/50":"bg-black border-zinc-700"}`,children:[e.jsxs("label",{className:"flex items-center gap-4 p-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(($=t.craftingRecipe)==null?void 0:$.enabled)||!1,onChange:s=>O("enabled",s.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-cyan-500 focus:ring-cyan-500 accent-cyan-500"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 ${(U=t.craftingRecipe)!=null&&U.enabled?"text-cyan-500":"text-zinc-400"}`,children:[e.jsx(De,{className:"w-3 h-3"})," Povolit Výrobu (Recept)"]})})]}),((F=t.craftingRecipe)==null?void 0:F.enabled)&&e.jsxs("div",{className:"p-4 pt-0 space-y-4 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-cyan-500/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyan-400",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("label",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Doba výroby (sekundy)"})]}),e.jsx("input",{type:"number",value:t.craftingRecipe.craftingTimeSeconds||60,onChange:s=>O("craftingTimeSeconds",parseInt(s.target.value)),className:"w-20 bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono text-center outline-none focus:border-cyan-500 rounded"})]}),e.jsxs("div",{className:"p-3 bg-zinc-900/50 rounded border border-zinc-700",children:[e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest block mb-2",children:"Přidat Ingredienci"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h,onChange:s=>y(s.target.value),className:"flex-[2] bg-black border border-zinc-600 text-white text-xs font-mono p-2 rounded outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"-- Vyberte Surovinu --"}),se.map(s=>{var p,f;return e.jsxs("option",{value:((p=s.resourceConfig)==null?void 0:p.resourceName)||s.title,children:[((f=s.resourceConfig)==null?void 0:f.resourceName)||s.title," (",s.id,")"]},s.id)})]}),e.jsx("input",{type:"number",placeholder:"Ks",value:v,onChange:s=>r(parseInt(s.target.value)),className:"w-14 bg-black border border-zinc-600 text-white text-xs text-center font-mono p-2 rounded outline-none focus:border-cyan-500"}),e.jsx("button",{type:"button",onClick:x,className:"bg-cyan-600 hover:bg-cyan-500 text-white px-3 rounded flex items-center justify-center",children:e.jsx(V,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] text-cyan-400/70 uppercase font-bold tracking-widest block",children:"Seznam Požadovaných Surovin:"}),((Z=t.craftingRecipe.requiredResources)==null?void 0:Z.length)===0&&e.jsx("p",{className:"text-[10px] text-zinc-600 italic text-center py-2",children:"Žádné suroviny. Předmět půjde vyrobit zdarma."}),(le=t.craftingRecipe.requiredResources)==null?void 0:le.map((s,p)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-cyan-500/20 rounded hover:border-cyan-500/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Surovina"}),e.jsx("span",{className:"text-xs text-white font-mono",children:s.resourceName})]}),e.jsxs("div",{className:"px-3 border-l border-zinc-800",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 block uppercase tracking-wide",children:"Množství"}),e.jsxs("span",{className:"text-xs text-cyan-400 font-mono font-bold",children:["x",s.amount]})]}),e.jsx("button",{type:"button",onClick:()=>A(p),className:"text-red-500 hover:text-red-400 p-2 ml-2",children:e.jsx(E,{className:"w-4 h-4"})})]},p))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest",children:"Aktivní_stats na kartě:"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map(s=>e.jsxs("button",{type:"button",onClick:()=>m(s.label),className:"flex items-center gap-1.5 px-3 py-1.5 border border-zinc-700 hover:border-yellow-500 transition-all active:scale-95 bg-black rounded",children:[e.jsx(s.icon,{className:`w-3 h-3 ${s.color}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-200",children:s.label})]},s.label))}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto no-scrollbar pr-1",children:(oe=t.stats)==null?void 0:oe.map((s,p)=>{const f=s.label.toUpperCase(),M=ae.find(T=>f.includes(T.label)||T.label==="ARMOR"&&f.includes("ARMOR")||T.label==="KYSLÍK"&&f.includes("OXYGEN")||T.label==="HP"&&(f.includes("HEALTH")||f.includes("ŽIVOT"))||T.label==="PALIVO"&&(f.includes("FUEL")||f.includes("PALIVO")));return e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-zinc-700 rounded animate-in slide-in-from-left-2 duration-200",children:[e.jsx("div",{className:"p-2 border border-zinc-800 bg-zinc-900 rounded",children:M?e.jsx(M.icon,{className:`w-4 h-4 ${M.color}`}):e.jsx(ye,{className:"w-4 h-4 text-zinc-400"})}),e.jsx("input",{value:s.label,onChange:T=>l(p,"label",T.target.value),className:"w-24 bg-zinc-900 border border-zinc-700 p-2 text-[10px] font-bold text-white placeholder-zinc-600 outline-none uppercase font-mono rounded focus:border-yellow-500",placeholder:"TAG"}),e.jsx("input",{value:s.value,onChange:T=>l(p,"value",T.target.value),className:"flex-1 bg-zinc-900 border border-zinc-700 px-3 py-2 text-xs text-white font-mono placeholder-zinc-600 focus:border-yellow-500 outline-none rounded",placeholder:"HODNOTA (+/-)"}),e.jsx("button",{type:"button",onClick:()=>N(p),className:"p-2 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(E,{className:"w-4 h-4"})})]},p)})})]})]})},lt=({event:t,onUpdate:u})=>{var g,k,o,a,i,d,b,n,m;const c=(l,N)=>{u({trapConfig:{...t.trapConfig||{difficulty:10,damage:20,disarmClass:Y.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!",loot:[]},[l]:N}})},h=(l="ZLATO",N="+10")=>{const C=t.trapConfig||{difficulty:10,damage:20,disarmClass:Y.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!",loot:[]},O=C.loot||[];u({trapConfig:{...C,loot:[...O,{label:l,value:N}]}})},y=(l,N,C)=>{var z;const O=[...((z=t.trapConfig)==null?void 0:z.loot)||[]];O[l]&&(O[l]={...O[l],[N]:C},c("loot",O))},v=l=>{var C;const N=(((C=t.trapConfig)==null?void 0:C.loot)||[]).filter((O,z)=>z!==l);c("loot",N)},r=[{label:"HP",icon:W,color:"text-red-500"},{label:"DMG",icon:Q,color:"text-orange-500"},{label:"ARMOR",icon:X,color:"text-zinc-200"},{label:"MANA",icon:ee,color:"text-cyan-400"},{label:"PALIVO",icon:de,color:"text-orange-500"},{label:"ZLATO",icon:D,color:"text-yellow-500"},{label:"KYSLÍK",icon:te,color:"text-cyan-400"}];return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-arc-red/30 text-white shadow-[0_0_20px_rgba(239,68,68,0.1)] rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-arc-red border-b border-arc-red/20 pb-2",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Nástraha_konfigurace:"})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-white/5",children:[e.jsxs("label",{className:"text-[8px] text-zinc-400 uppercase font-bold tracking-widest flex items-center gap-1 mb-2",children:[e.jsx(He,{className:"w-3 h-3"})," Specifikace / Typ Pasti"]}),e.jsx("input",{type:"text",value:((g=t.trapConfig)==null?void 0:g.trapType)??"",onChange:l=>c("trapType",l.target.value),placeholder:"Např. MECHANICKÁ, BIOLOGICKÁ, HACKING...",className:"w-full bg-black border border-zinc-700 p-2 text-white text-xs font-mono outline-none focus:border-arc-red rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Obtížnost (Hod kostkou):"}),e.jsx("input",{type:"number",value:((k=t.trapConfig)==null?void 0:k.difficulty)??10,onChange:l=>c("difficulty",parseInt(l.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-white font-mono text-sm rounded focus:border-arc-red outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"DMG po selhání:"}),e.jsx("input",{type:"number",value:((o=t.trapConfig)==null?void 0:o.damage)??20,onChange:l=>c("damage",parseInt(l.target.value)),className:"w-full bg-black border border-arc-red/40 p-3 text-arc-red font-mono text-sm rounded focus:border-arc-red outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Expert na zneškodnění (Bonus Class):"}),e.jsxs("select",{value:((a=t.trapConfig)==null?void 0:a.disarmClass)??"ANY",onChange:l=>c("disarmClass",l.target.value),className:"w-full bg-black border border-arc-border p-3 text-white text-xs font-mono uppercase focus:ring-1 focus:ring-arc-yellow outline-none rounded",children:[e.jsx("option",{value:"ANY",className:"bg-arc-panel text-white",children:"KDOKOLIV (Bez bonusu)"}),Object.values(Y).map(l=>e.jsx("option",{value:l,className:"bg-arc-panel text-white",children:l},l))]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-green-500 uppercase font-bold tracking-widest",children:"Zpráva při úspěchu:"}),e.jsx("input",{type:"text",value:((i=t.trapConfig)==null?void 0:i.successMessage)??"Past zneškodněna.",onChange:l=>c("successMessage",l.target.value),className:"w-full bg-black border border-green-500/30 p-2 text-zinc-300 text-xs font-mono rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-red-500 uppercase font-bold tracking-widest",children:"Zpráva při selhání:"}),e.jsx("input",{type:"text",value:((d=t.trapConfig)==null?void 0:d.failMessage)??"Past sklapla!",onChange:l=>c("failMessage",l.target.value),className:"w-full bg-black border border-red-500/30 p-2 text-zinc-300 text-xs font-mono rounded"})]})]}),e.jsxs("div",{className:"bg-arc-yellow/5 border border-arc-yellow/20 p-3 rounded-xl mt-2",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("label",{className:"text-[9px] text-arc-yellow uppercase font-bold tracking-widest flex items-center gap-2",children:[e.jsx(D,{className:"w-3 h-3"})," Odměna za zneškodnění (Loot)"]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.map(l=>e.jsxs("button",{type:"button",onClick:()=>h(l.label,"+10"),className:"flex items-center gap-1.5 px-3 py-1.5 border border-zinc-700 hover:border-arc-yellow transition-all active:scale-95 bg-black rounded",children:[e.jsx(l.icon,{className:`w-3 h-3 ${l.color}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-200",children:l.label})]},l.label)),e.jsxs("button",{type:"button",onClick:()=>h("JINÉ","+1"),className:"flex items-center gap-1.5 px-3 py-1.5 border border-zinc-700 hover:border-white transition-all active:scale-95 bg-black rounded",children:[e.jsx(V,{className:"w-3 h-3 text-zinc-400"}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-400",children:"Vlastní"})]})]}),e.jsxs("div",{className:"space-y-2",children:[(!((b=t.trapConfig)!=null&&b.loot)||t.trapConfig.loot.length===0)&&e.jsx("p",{className:"text-[9px] text-zinc-500 italic text-center py-2",children:"Žádná odměna. Past se jen vypne."}),(m=(n=t.trapConfig)==null?void 0:n.loot)==null?void 0:m.map((l,N)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-zinc-700 rounded animate-in slide-in-from-left-2",children:[e.jsx("input",{value:l.label,onChange:C=>y(N,"label",C.target.value),className:"w-24 bg-zinc-900 border border-zinc-600 p-2 text-[10px] font-bold text-arc-yellow uppercase font-mono rounded outline-none",placeholder:"TYP"}),e.jsx("input",{value:l.value,onChange:C=>y(N,"value",C.target.value),className:"flex-1 bg-zinc-900 border border-zinc-600 px-3 py-2 text-xs text-white font-mono outline-none rounded",placeholder:"HODNOTA"}),e.jsx("button",{type:"button",onClick:()=>v(N),className:"p-2 text-zinc-500 hover:text-red-500 transition-colors",children:e.jsx(E,{className:"w-4 h-4"})})]},N))]})]})]})},ot=({event:t,onUpdate:u})=>{var k,o;const c=((k=t.enemyLoot)==null?void 0:k.lootStats)||[],h=a=>{u({enemyLoot:{...t.enemyLoot||{},...a}})},y=(a,i="+10")=>{c.some(d=>d.label.toUpperCase()===a.toUpperCase())||h({lootStats:[...c,{label:a,value:i}]})},v=(a,i,d)=>{const b=[...c];b[a]={...b[a],[i]:d},h({lootStats:b})},r=a=>{h({lootStats:c.filter((i,d)=>d!==a)})},g=[{label:"ZLATO",icon:D,color:"text-yellow-500"},{label:"HP",icon:W,color:"text-red-500"},{label:"MANA",icon:ee,color:"text-cyan-400"},{label:"PALIVO",icon:de,color:"text-orange-500"},{label:"O2",icon:te,color:"text-cyan-200"}];return e.jsxs("div",{className:"mt-4 bg-arc-panel p-5 border border-arc-yellow/20 text-white rounded-xl",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-arc-yellow uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Odměna po boji (Vyzvednutí):"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-black/40 p-2 rounded border border-white/5",children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest",children:"Šance na Drop Předmětu % (Volitelné)"}),e.jsx("input",{type:"number",value:((o=t.enemyLoot)==null?void 0:o.dropItemChance)??0,onChange:a=>h({dropItemChance:parseInt(a.target.value)}),className:"w-16 bg-black border border-arc-border p-1 text-white text-xs text-center font-mono rounded"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.map(a=>e.jsxs("button",{type:"button",onClick:()=>y(a.label),className:"flex items-center gap-1.5 px-3 py-1.5 border border-zinc-700 hover:border-yellow-500 transition-all active:scale-95 bg-black rounded",children:[e.jsx(a.icon,{className:`w-3 h-3 ${a.color}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-zinc-200",children:a.label})]},a.label))}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto no-scrollbar pr-1",children:[c.length===0&&e.jsx("p",{className:"text-[10px] text-zinc-500 italic text-center py-4",children:"Žádná garantovaná odměna. Přidejte staty výše."}),c.map((a,i)=>{const d=a.label.toUpperCase(),b=g.find(n=>d.includes(n.label));return e.jsxs("div",{className:"flex gap-2 items-center bg-black p-2 border border-zinc-700 rounded animate-in slide-in-from-left-2 duration-200",children:[e.jsx("div",{className:"p-2 border border-zinc-800 bg-zinc-900 rounded",children:b?e.jsx(b.icon,{className:`w-4 h-4 ${b.color}`}):e.jsx(ye,{className:"w-4 h-4 text-zinc-400"})}),e.jsx("input",{value:a.label,onChange:n=>v(i,"label",n.target.value),className:"w-24 bg-zinc-900 border border-zinc-700 p-2 text-[10px] font-bold text-white placeholder-zinc-600 outline-none uppercase font-mono rounded focus:border-yellow-500",placeholder:"TAG"}),e.jsx("input",{value:a.value,onChange:n=>v(i,"value",n.target.value),className:"flex-1 bg-zinc-900 border border-zinc-700 px-3 py-2 text-xs text-white font-mono placeholder-zinc-600 focus:border-yellow-500 outline-none rounded",placeholder:"HODNOTA (+/-)"}),e.jsx("button",{type:"button",onClick:()=>r(i),className:"p-2 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(E,{className:"w-4 h-4"})})]},i)})]})]})]})},ct=({event:t,onUpdate:u})=>{var r,g,k,o;const c=a=>{u({timeVariant:{...t.timeVariant||{enabled:!1,nightStats:[]},...a}})},h=()=>{var i;const a=[...((i=t.timeVariant)==null?void 0:i.nightStats)||[]];a.push({label:"NIGHT_MOD",value:"+5"}),c({nightStats:a})},y=(a,i,d)=>{var n;const b=[...((n=t.timeVariant)==null?void 0:n.nightStats)||[]];b[a]&&(b[a]={...b[a],[i]:d},c({nightStats:b}))},v=a=>{var d;const i=(((d=t.timeVariant)==null?void 0:d.nightStats)||[]).filter((b,n)=>n!==a);c({nightStats:i})};return e.jsxs("div",{className:`mt-6 p-5 border rounded-xl transition-all ${(r=t.timeVariant)!=null&&r.enabled?"bg-indigo-950/30 border-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.2)]":"bg-white/5 border-white/10 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Noční_Protokol_v2.0"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((g=t.timeVariant)==null?void 0:g.enabled)||!1,onChange:a=>c({enabled:a.target.checked})}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-500"})]})]}),((k=t.timeVariant)==null?void 0:k.enabled)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Název karty v noci (Override):"}),e.jsx("input",{value:t.timeVariant.nightTitle||"",onChange:a=>c({nightTitle:a.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-white text-sm outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis karty v noci (Override):"}),e.jsx("textarea",{value:t.timeVariant.nightDescription||"",onChange:a=>c({nightDescription:a.target.value}),placeholder:"Ponechte prázdné pro původní",className:"w-full bg-black border border-indigo-900/50 p-3 text-zinc-300 text-xs font-mono outline-none focus:border-indigo-500",rows:2})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[8px] text-indigo-300 uppercase font-bold tracking-widest",children:"Noční_Statistiky (Nahrazují původní):"}),e.jsx("button",{type:"button",onClick:h,className:"text-[8px] bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded border border-indigo-500/30 font-bold uppercase",children:"+ PŘIDAT NOČNÍ STAT"})]}),(o=t.timeVariant.nightStats)==null?void 0:o.map((a,i)=>e.jsxs("div",{className:"flex gap-2 items-center bg-black/40 p-2 border border-indigo-900/30",children:[e.jsx("input",{value:a.label,onChange:d=>y(i,"label",d.target.value),className:"w-20 bg-transparent border-none p-1 text-[9px] font-bold text-indigo-300 uppercase font-mono",placeholder:"TAG"}),e.jsx("input",{value:a.value,onChange:d=>y(i,"value",d.target.value),className:"flex-1 bg-indigo-950/40 border border-indigo-900/50 px-2 py-1 text-xs text-white font-mono focus:border-indigo-400 outline-none",placeholder:"HODNOTA"}),e.jsx("button",{type:"button",onClick:()=>v(i),className:"text-red-500 p-1 hover:text-red-400",children:e.jsx(E,{className:"w-3.5 h-3.5"})})]},i))]})]})]})},it=({event:t,onUpdate:u})=>{var h,y,v,r;const c=(g,k)=>{u({stationConfig:{...t.stationConfig||{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},[g]:k}})};return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-cyan-500/30 text-white shadow-[0_0_20px_rgba(34,211,238,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-cyan-400 border-b border-cyan-500/20 pb-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Konfigurace Stanice:"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx($e,{className:"w-3 h-3"})," Uvítací Zpráva:"]}),e.jsx("input",{type:"text",value:((h=t.stationConfig)==null?void 0:h.welcomeMessage)??"Vítejte na palubě.",onChange:g=>c("welcomeMessage",g.target.value),className:"w-full bg-black border border-cyan-500/30 p-2 text-white text-xs font-mono",placeholder:"Systémy online..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(de,{className:"w-3 h-3 text-orange-500"})," Palivo (Darování)"]}),e.jsx("input",{type:"number",value:((y=t.stationConfig)==null?void 0:y.fuelReward)??50,onChange:g=>c("fuelReward",parseInt(g.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-1",children:[e.jsx(X,{className:"w-3 h-3 text-slate-300"})," Oprava Lodi (+HP)"]}),e.jsx("input",{type:"number",value:((v=t.stationConfig)==null?void 0:v.repairAmount)??30,onChange:g=>c("repairAmount",parseInt(g.target.value)),className:"w-full bg-black border border-cyan-500/30 p-2 text-white font-mono text-sm text-center"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-cyan-500/20 p-3 rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-cyan-200"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-zinc-300",children:"Doplnit Kyslík (100%)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((r=t.stationConfig)==null?void 0:r.refillO2)??!0,onChange:g=>c("refillO2",g.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-zinc-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-cyan-500"})]})]})]})},dt=({event:t,onUpdate:u,masterCatalog:c})=>{var k,o,a,i,d,b;const h=(n,m)=>{u({planetConfig:{...t.planetConfig||{planetId:"p1",landingEventType:j.ENCOUNTER,phases:[]},[n]:m}})},y=()=>{var m;const n=((m=t.planetConfig)==null?void 0:m.phases)||[];h("phases",[...n,""])},v=(n,m)=>{var N;const l=[...((N=t.planetConfig)==null?void 0:N.phases)||[]];l[n]=m,h("phases",l)},r=n=>{var l;const m=(((l=t.planetConfig)==null?void 0:l.phases)||[]).filter((N,C)=>C!==n);h("phases",m)},g=c.filter(n=>n.type!==j.PLANET);return e.jsxs("div",{className:"space-y-4 bg-arc-panel p-5 border border-indigo-500/30 text-white shadow-[0_0_20px_rgba(99,102,241,0.1)]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-400 border-b border-indigo-500/20 pb-2",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-[10px] font-mono font-bold uppercase tracking-widest",children:"Konfigurace Planety (Kampaň):"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest flex items-center gap-1 mb-2",children:[e.jsx(Ue,{className:"w-3 h-3"})," Cílová Planeta (UI):"]}),e.jsxs("select",{value:((k=t.planetConfig)==null?void 0:k.planetId)??"p1",onChange:n=>h("planetId",n.target.value),className:"w-full bg-black border border-indigo-500/30 p-3 text-white text-xs font-mono focus:border-indigo-500 outline-none rounded",children:[e.jsx("option",{value:"p1",children:"p1 (Terra Nova - Obyvatelná)"}),e.jsx("option",{value:"p2",children:"p2 (Kepler-186f - Ledová)"}),e.jsx("option",{value:"p3",children:"p3 (Mars Outpost - Kolonie)"}),e.jsx("option",{value:"p4",children:"p4 (Black Nebula - Anomálie)"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-indigo-500/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"text-[9px] font-black text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"})," Fáze Mise (Vlny)"]}),e.jsxs("span",{className:"text-[8px] font-mono text-zinc-500",children:[((a=(o=t.planetConfig)==null?void 0:o.phases)==null?void 0:a.length)||0," Fází"]})]}),e.jsxs("div",{className:"space-y-3",children:[(d=(i=t.planetConfig)==null?void 0:i.phases)==null?void 0:d.map((n,m)=>e.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-indigo-900/50 rounded text-[9px] font-bold text-indigo-300 shrink-0 border border-indigo-500/30",children:m+1}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("select",{value:n,onChange:l=>v(m,l.target.value),className:"w-full bg-zinc-900 border border-zinc-700 p-2 text-white text-xs font-mono outline-none focus:border-indigo-500 rounded pl-2 pr-8 appearance-none",children:[e.jsx("option",{value:"",children:"-- Vyberte Kartu --"}),g.map(l=>e.jsxs("option",{value:l.id,children:["[",l.type,"] ",l.title]},l.id))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-500",children:e.jsx(Ze,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>r(m),className:"p-2 text-zinc-500 hover:text-red-500 transition-colors",children:e.jsx(E,{className:"w-4 h-4"})})]},m)),(!((b=t.planetConfig)!=null&&b.phases)||t.planetConfig.phases.length===0)&&e.jsx("div",{className:"text-center p-4 border border-dashed border-zinc-800 rounded-lg text-zinc-600 text-[10px] uppercase font-bold",children:"Žádné fáze. Planeta bude neaktivní."})]}),e.jsxs("button",{type:"button",onClick:y,className:"w-full mt-4 py-3 bg-indigo-600/10 border border-indigo-500/30 hover:bg-indigo-600/20 text-indigo-400 font-bold uppercase text-[10px] tracking-widest rounded-lg flex items-center justify-center gap-2 transition-all",children:[e.jsx(V,{className:"w-4 h-4"})," Přidat Fázi (Krok)"]})]}),e.jsx("p",{className:"text-[9px] text-zinc-500 italic mt-2 border-t border-zinc-800 pt-2 leading-relaxed",children:'Každý "Skok" v lodi spotřebuje palivo a posune hráče na další fázi v seznamu. Po dokončení poslední fáze je planeta dobyta.'})]})},q={id:"",title:"",description:"",type:j.ITEM,rarity:"Common",flavorText:"",stats:[],isShareable:!0,isConsumable:!0,isSellOnly:!1,canBeSaved:!0,price:0,trapConfig:{difficulty:10,damage:20,disarmClass:Y.ROGUE,successMessage:"Past zneškodněna.",failMessage:"Past sklapla!"},enemyLoot:{goldReward:20,dropItemChance:0},timeVariant:{enabled:!1,nightStats:[]},stationConfig:{fuelReward:50,repairAmount:30,refillO2:!0,welcomeMessage:"Vítejte na palubě."},resourceConfig:{isResourceContainer:!1,resourceName:"Surovina",resourceAmount:1,customLabel:"Surovina k Těžbě"},craftingRecipe:{enabled:!1,requiredResources:[],craftingTimeSeconds:60},planetConfig:{planetId:"p1",landingEventType:j.ENCOUNTER,phases:[]}},he={[j.ITEM]:"PRE-",[j.ENCOUNTER]:"SET-",[j.TRAP]:"NAS-",[j.MERCHANT]:"OBCH-",[j.DILEMA]:"DIL-",[j.BOSS]:"BOSS-",[j.SPACE_STATION]:"VS-",[j.PLANET]:"PLA-"},mt=({onSaveCard:t,userEmail:u,initialData:c,onClearData:h,onDelete:y,masterCatalog:v=[]})=>{const[r,g]=P.useState(q),[k,o]=P.useState({message:"",type:null}),[a,i]=P.useState(!1),[d,b]=P.useState(!1),[n,m]=P.useState(!1),[l,N]=P.useState(!1),[C,O]=P.useState(!1),z=P.useMemo(()=>!r.id||a&&(c==null?void 0:c.id)===r.id?!1:v.some(w=>w.id.toLowerCase()===r.id.toLowerCase()),[r.id,v,a,c]);P.useEffect(()=>{var w,S,R,I,_,K,G,$,U,F,Z;if(c)g({...q,...c,price:c.price!==void 0&&c.price!==null?c.price:q.price,resourceConfig:{isResourceContainer:((w=c.resourceConfig)==null?void 0:w.isResourceContainer)??!1,resourceName:((S=c.resourceConfig)==null?void 0:S.resourceName)??"Surovina",resourceAmount:((R=c.resourceConfig)==null?void 0:R.resourceAmount)??1,customLabel:(I=c.resourceConfig)==null?void 0:I.customLabel},craftingRecipe:{enabled:((_=c.craftingRecipe)==null?void 0:_.enabled)??!1,requiredResources:((K=c.craftingRecipe)==null?void 0:K.requiredResources)??[],craftingTimeSeconds:((G=c.craftingRecipe)==null?void 0:G.craftingTimeSeconds)??60},planetConfig:{planetId:(($=c.planetConfig)==null?void 0:$.planetId)??"p1",landingEventType:((U=c.planetConfig)==null?void 0:U.landingEventType)??j.ENCOUNTER,landingEventId:(F=c.planetConfig)==null?void 0:F.landingEventId,phases:((Z=c.planetConfig)==null?void 0:Z.phases)??[]},isSellOnly:c.isSellOnly??!1}),i(!0);else{const le=he[j.ITEM],oe=Math.floor(Math.random()*9e3)+1e3;g({...q,id:`${le}${oe}`}),i(!1)}},[c]);const x=w=>g(S=>({...S,...w})),A=w=>x({[w.target.name]:w.target.value}),H=w=>{const S=w.target.value;if(a)x({type:S});else{const R=he[S]||"GEN-",I=Math.floor(Math.random()*9e3)+1e3;x({type:S,id:`${R}${I}`})}},xe=()=>{!y||!r.id||(B("error"),we(50),N(!0))},pe=()=>{r.id&&(B("siren"),we([100,100,100]),O(!0))},be=()=>{y&&r.id&&(y(r.id),N(!1))},se=async()=>{if(r.id)try{await tt(r.id),o({message:"GLOBÁLNÍ VYHLAZENÍ DOKONČENO.",type:"success"}),B("damage"),y&&y(r.id),O(!1)}catch(w){o({message:`Chyba vyhlazení: ${w.message}`,type:"error"})}},ae=async()=>{m(!0);try{await et(),o({message:"Záloha stažena.",type:"success"}),B("success")}catch{o({message:"Chyba zálohování.",type:"error"}),B("error")}finally{m(!1)}},L=((w,S)=>w?`https://api.qrserver.com/v1/create-qr-code/?size=1000x1000&color=${{[j.BOSS]:"ff3b30",[j.TRAP]:"f5c518",[j.ENCOUNTER]:"ff3b30",[j.DILEMA]:"9333ea",[j.MERCHANT]:"f5c518",[j.ITEM]:"007aff",[j.SPACE_STATION]:"22d3ee",[j.PLANET]:"6366f1"}[S]||"ffffff"}&bgcolor=0a0a0c&margin=20&data=${encodeURIComponent(w)}`:"")(r.id,r.type),re=async()=>{if(!L||!r.id){o({message:"Identifikátor chybí.",type:"error"});return}b(!0);try{const S=await(await fetch(L)).blob(),R=window.URL.createObjectURL(S),I=document.createElement("a");I.href=R;const _=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"unnamed_asset";I.download=`nexus_${r.type.toLowerCase()}_${_}.png`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(R),o({message:"Identifikátor stažen do lokální cache.",type:"success"})}catch{o({message:"Chyba protokolu stahování.",type:"error"})}finally{b(!1)}},ne=async w=>{if(w.preventDefault(),!u||!r.id){o({message:"Zadejte ID assetu.",type:"error"});return}if(z){o({message:"CHYBA: Toto ID již existuje!",type:"error"}),B("error");return}try{const S={...r};if(u==="zbynekbal97@gmail.com"&&(S.qrCodeUrl=L),await t(S),o({message:"Data synchronizována se serverem.",type:"success"}),!a){const R=he[j.ITEM],I=Math.floor(Math.random()*9e3)+1e3;g({...q,id:`${R}${I}`})}}catch(S){o({message:S.message,type:"error"})}};return e.jsxs("div",{className:"h-full overflow-y-auto p-6 pb-24 no-scrollbar bg-arc-bg text-white relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5 z-0",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"30px 30px"}}),e.jsxs("div",{className:"flex items-center justify-between mb-8 sticky top-0 bg-arc-bg/95 backdrop-blur z-20 pb-4 border-b border-arc-border",children:[e.jsxs("h1",{className:"text-2xl font-bold uppercase tracking-tighter text-white",children:[a?"Editovat":"FABRIKACE"," ",e.jsx("span",{className:"text-arc-yellow",children:"Assetu"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ae,className:"p-2 bg-black border border-blue-500 text-blue-500 hover:bg-blue-500/10 active:scale-95 transition-all",title:"Stáhnout Zálohu DB",children:n?e.jsx(me,{className:"w-5 h-5 animate-spin"}):e.jsx(qe,{className:"w-5 h-5"})}),a&&e.jsx("button",{type:"button",onClick:pe,className:"p-2 bg-black border border-red-600 text-red-600 hover:bg-red-600/20 active:scale-95 transition-all animate-pulse",title:"GLOBÁLNÍ VYHLAZENÍ",children:e.jsx(ie,{className:"w-5 h-5"})}),a&&y&&e.jsx("button",{type:"button",onClick:xe,className:"p-2 bg-black border border-red-900/50 text-red-500 hover:bg-red-900/20 active:scale-95 transition-all",children:e.jsx(E,{className:"w-5 h-5"})}),a&&e.jsx("button",{type:"button",onClick:h,className:"p-2 bg-black border border-arc-border text-arc-yellow hover:bg-arc-yellow/10 active:scale-95 transition-all",children:e.jsx(me,{className:"w-5 h-5"})})]})]}),e.jsxs("form",{onSubmit:ne,className:"space-y-8 relative z-10",children:[e.jsxs("div",{className:"bg-arc-panel p-6 border border-arc-border space-y-6 relative bracket-tl bracket-tr",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"ID_KARTY (jedinečné!):"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"id",value:r.id,onChange:A,placeholder:"NXS-001",className:`w-full bg-black border p-3 text-white font-mono uppercase outline-none text-sm transition-colors ${z?"border-red-500 focus:border-red-600 text-red-500":"border-arc-border focus:border-arc-yellow"}`,required:!0,readOnly:a}),z&&e.jsx("div",{className:"absolute right-3 top-3 animate-pulse",children:e.jsx(Ye,{className:"w-5 h-5 text-red-500"})})]}),z&&e.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1 tracking-widest flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"})," ID již existuje v databázi!"]}),!z&&r.id.length>3&&e.jsxs("p",{className:"text-[9px] text-green-500 font-bold uppercase mt-1 tracking-widest flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," ID Dostupné"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"TYP_karty:"}),e.jsx("select",{name:"type",value:r.type,onChange:H,className:"w-full bg-black border border-arc-border p-3 text-white font-mono uppercase focus:border-arc-yellow outline-none text-sm",children:Object.values(j).map(w=>e.jsx("option",{value:w,className:"bg-arc-panel text-white",children:w},w))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Název_karty:"}),e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2",children:[e.jsx("input",{name:"title",value:r.title,onChange:A,placeholder:"NÁZEV ASSETU",className:"bg-black border border-arc-border p-3 text-white font-bold uppercase focus:border-arc-yellow outline-none text-sm",required:!0}),e.jsx("select",{name:"rarity",value:r.rarity,onChange:A,className:"bg-black border border-arc-border p-3 text-[10px] text-zinc-200 font-mono uppercase outline-none",children:["Common","Rare","Epic","Legendary"].map(w=>e.jsx("option",{value:w,className:"bg-arc-panel text-white",children:w},w))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] text-zinc-300 uppercase font-bold tracking-widest mb-1 block",children:"Popis_karty:"}),e.jsx("textarea",{name:"description",value:r.description,onChange:A,placeholder:"Analýza objektu...",rows:3,className:"w-full bg-black border border-arc-border p-3 text-zinc-100 text-xs font-mono focus:border-arc-yellow outline-none",required:!0})]})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.type===j.ITEM&&e.jsx(nt,{event:r,onUpdate:x,masterCatalog:v}),r.type===j.TRAP&&e.jsx(lt,{event:r,onUpdate:x}),(r.type===j.ENCOUNTER||r.type===j.BOSS)&&e.jsxs(e.Fragment,{children:[e.jsx(rt,{event:r,onUpdate:x}),r.type===j.ENCOUNTER&&e.jsx(ot,{event:r,onUpdate:x})]}),r.type===j.MERCHANT&&e.jsx(st,{event:r,onUpdate:x}),r.type===j.SPACE_STATION&&e.jsx(it,{event:r,onUpdate:x}),r.type===j.PLANET&&e.jsx(dt,{event:r,onUpdate:x,masterCatalog:v}),r.type===j.DILEMA&&e.jsx(at,{event:r,onUpdate:x}),e.jsx(ct,{event:r,onUpdate:x})]}),e.jsxs("div",{className:"flex items-center gap-6 bg-black p-6 border border-arc-border relative bracket-bl bracket-br",children:[e.jsx("div",{className:"bg-white p-2 border border-zinc-800 shrink-0",children:r.id?e.jsx("img",{src:L,alt:"QR",className:"w-24 h-24 object-contain invert"}):e.jsx("div",{className:"w-24 h-24 flex items-center justify-center bg-zinc-900 border border-zinc-800",children:e.jsx(Je,{className:"w-10 h-10 text-zinc-700"})})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.3em] mb-1",children:"QR kod karty!:"}),e.jsx("p",{className:"text-[10px] text-zinc-200 font-mono truncate max-w-[120px]",children:r.id||"WAITING_FOR_ID"})]}),e.jsxs("button",{type:"button",onClick:re,disabled:!r.id||d,className:`w-full py-3 px-4 text-[10px] uppercase font-bold flex items-center justify-center gap-2 border-2 transition-all ${r.id?"text-arc-yellow border-arc-yellow hover:bg-arc-yellow hover:text-black":"text-zinc-700 border-zinc-800 cursor-not-allowed"}`,children:[d?e.jsx(me,{className:"w-3 h-3 animate-spin"}):e.jsx(We,{className:"w-3 h-3"}),d?"Stahování...":"Uložit_PNG_Kód"]})]})]}),k.message&&e.jsxs("div",{className:`p-4 border font-mono text-[10px] uppercase tracking-widest text-center animate-pulse ${k.type==="success"?"text-arc-yellow border-arc-yellow/30 bg-arc-yellow/5":"text-arc-red border-arc-red/30 bg-arc-red/5"}`,children:[">"," ",k.message]}),e.jsxs("button",{type:"submit",disabled:z,className:`w-full py-6 border-2 font-black uppercase text-sm tracking-[0.4em] transition-all shadow-[0_0_30px_rgba(255,157,0,0.3)] rounded-xl flex items-center justify-center gap-3 ${z?"bg-zinc-800 border-zinc-700 text-zinc-500 cursor-not-allowed":"bg-signal-amber border-signal-amber/50 text-black hover:bg-white hover:text-black"}`,children:[e.jsx(Xe,{className:"w-5 h-5"}),a?"Synchronizovat_Změny":"Nahrát kartu do databáze!"]})]}),e.jsx(Ne,{children:l&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-sm flex items-center justify-center p-6",children:e.jsxs(ce.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-black border-2 border-red-600 w-full max-w-xs shadow-[0_0_60px_rgba(220,38,38,0.4)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-red-600 animate-pulse"}),e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-red-600/10 rounded-full border border-red-600/50",children:e.jsx(je,{className:"w-12 h-12 text-red-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-600 uppercase tracking-tighter",children:"Destrukce Dat"}),e.jsx("p",{className:"text-[10px] text-red-600/60 font-mono mt-1 font-bold tracking-widest",children:"Smazat pouze z Master DB"})]}),e.jsxs("p",{className:"text-xs text-zinc-300 font-bold leading-relaxed",children:["Smaže kartu z katalogu. ",e.jsx("br",{}),"Hráči, kteří ji už mají, o ni nepřijdou."]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsx("button",{onClick:()=>N(!1),className:"py-3 bg-zinc-900 text-zinc-400 font-bold uppercase text-[10px] tracking-widest hover:bg-zinc-800 transition-colors border border-zinc-800",children:"Zrušit"}),e.jsx("button",{onClick:be,className:"py-3 bg-red-600 text-black font-black uppercase text-[10px] tracking-widest hover:bg-red-500 transition-colors shadow-lg animate-pulse",children:"Smazat"})]})]})]})})}),e.jsx(Ne,{children:C&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[250] bg-red-950/90 backdrop-blur-md flex items-center justify-center p-6",children:e.jsxs(ce.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-black border-4 border-red-600 w-full max-w-sm shadow-[0_0_100px_rgba(220,38,38,0.8)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-600 animate-pulse"}),e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-6 bg-red-600 rounded-full border-4 border-black animate-bounce",children:e.jsx(ie,{className:"w-16 h-16 text-black"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-black text-red-600 uppercase tracking-tighter",children:"GLOBÁLNÍ VYHLAZENÍ"}),e.jsx("p",{className:"text-xs text-white font-mono mt-2 font-bold tracking-[0.2em] bg-red-600 px-2 py-1 inline-block",children:"ADMIN OVERRIDE: LEVEL 5"})]}),e.jsxs("p",{className:"text-sm text-red-200 font-bold leading-relaxed border-y border-red-900/50 py-4",children:["TATO AKCE JE NEVRATNÁ.",e.jsx("br",{}),e.jsx("br",{}),"1. Smaže kartu z Master Databáze.",e.jsx("br",{}),"2. ",e.jsx("span",{className:"text-white underline",children:"NÁSILÍM ODSTRANÍ"})," kartu z batohu VŠECH hráčů na serveru."]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-6",children:[e.jsx("button",{onClick:se,className:"py-5 bg-red-600 text-black font-black uppercase text-sm tracking-[0.3em] hover:bg-white transition-colors shadow-xl",children:"PROVÉST VYHLAZENÍ"}),e.jsx("button",{onClick:()=>O(!1),className:"py-4 bg-transparent text-zinc-500 font-bold uppercase text-[10px] tracking-widest hover:text-white transition-colors",children:"Zrušit Protokol"})]})]})]})})})]})};export{mt as default};
